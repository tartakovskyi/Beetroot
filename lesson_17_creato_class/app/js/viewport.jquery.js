"use strict";function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(t){_defineProperty(e,t,i[t])})}return e}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(l){function e(t){return!!t&&(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)}function h(t){if(!t)return window.document.body;for(;"BODY"!==t.tagName&&!e(t);)t=t.parentElement;return t}function p(t,e){var i=e?"BODY"===e.tagName?{top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight}:e.getBoundingClientRect():{top:0,bottom:0,left:0,right:0,width:0,height:0},r=t?t.getBoundingClientRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};return{viewport:e,viewportWidth:i.width,viewportHeight:i.height,element:t,elementWidth:r.width,elementHeight:r.height,top:r.top-i.top,bottom:i.bottom-r.bottom,left:r.left-i.left,right:i.right-r.right}}function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=p(t,2<arguments.length?arguments[2]:void 0);return 0<=i.top-e&&0<=i.bottom-e&&0<=i.left-e&&0<=i.right-e}var t={hasScroll:function(){return!!this.length&&e(this[0])},scrollableParent:function(){return h(this[0])},relativePosition:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.scrollableParent();return p(this[0],t?t instanceof l?t[0]:t:this.scrollableParent())},inViewport:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length?arguments[1]:void 0;return!!this.length&&o(this[0],t,e||this.scrollableParent())},getState:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length?arguments[2]:void 0;return i=i||this.scrollableParent(),this.length?function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=p(t,3<arguments.length?arguments[3]:void 0);return r.inViewport=0<=r.top-e&&0<=r.bottom-e&&0<=r.left-e&&0<=r.right-e,0<=r.top-e&&0<=r.bottom-e?r.vertical="inside":r.top-e<=0&&r.bottom-e<=0?r.vertical="exceeds":r.vertical=i?r.top-e<=0?r.bottom-e-r.viewportHeight>r.elementHeight?"above":"partly-above":r.top-e-r.viewportHeight>r.elementHeight?"below":"partly-below":r.top-e<=0?"above":"below",0<=r.left-e&&0<=r.right-e?r.horizontal="inside":r.left-e<=0&&r.right-e<=0?r.horizontal="exceeds":r.horizontal=i?r.left-e<=0?r.right-e-r.viewportWidth>r.elementWidth?"left":"partly-left":r.left-e-r.viewportWidth>r.elementWidth?"right":"partly-right":r.top-e<=0?"left":"right",r}(this[0],t,e,i):{inViewport:!1,vertical:"inside",horizontal:"inside",top:0,bottom:0,left:0,right:0,width:0,height:0,viewportWidth:0,viewportHeight:0}}};l.fn.viewport=function(){return _objectSpread({},this,t)},l.extend(l.expr[":"],{hasScroll:function(t){return e(t)},hasScrollVertical:function(t){return t.offsetHeight<t.scrollHeight},hasScrollHorizontal:function(t){return t.offsetWidth<t.scrollWidth},inViewport:function(t,e,i){var r=(i[3]||"").split(",");return o(t,r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t))},aboveTheViewport:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.top-o<=0&&0<=n.bottom},belowTheViewport:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.bottom-o<=0&&0<=n.top},leftOfViewport:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.left-o<=0&&0<=n.right},rightOfViewport:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.right-o<=0&&0<=n.left},aboveTheViewportPartly:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.top-o<=0&&0<=n.bottom&&n.bottom-o-n.viewportHeight>n.elementHeight},belowTheViewportPartly:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.bottom-o<=0&&0<=n.top&&n.top-o-n.viewportHeight>n.elementHeight},leftOfViewportPartly:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.left-o<=0&&0<=n.right&&n.left-o-n.viewportWidth>n.elementWidth},rightOfViewportPartly:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.right-o<=0&&0<=n.left&&n.right-o-n.viewportWidth>n.elementWidth},exceedsViewport:function(t,e,i){var r=(i[3]||"").split(",");return!o(t,r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t))},exceedsViewportVertical:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.top-o<0&&n.bottom-o<0},exceedsViewportHorizontal:function(t,e,i){var r=(i[3]||"").split(","),o=r[0]&&(r[0]=r[0].trim())?parseInt(r[0],10):0,n=p(t,r[1]&&(r[1]=r[1].trim())&&l(r[1])[0]||void 0||h(t));return n.left-o<0&&n.right-o<0}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZXdwb3J0LmpxdWVyeS5qcyJdLCJuYW1lcyI6WyIkIiwiaGFzU2Nyb2xsIiwiZWxlbWVudCIsIm9mZnNldEhlaWdodCIsInNjcm9sbEhlaWdodCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsV2lkdGgiLCJnZXRTY3JvbGxhYmxlUGFyZW50Iiwid2luZG93IiwiZG9jdW1lbnQiLCJib2R5IiwidGFnTmFtZSIsInBhcmVudEVsZW1lbnQiLCJnZXRSZWxhdGl2ZVBvc2l0aW9uIiwidmlld3BvcnQiLCJ0b3AiLCJsZWZ0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwicmlnaHQiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImJvdHRvbSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImVsUmVjdCIsInZwUmVjdCIsImVsZW1lbnRXaWR0aCIsImVsZW1lbnRIZWlnaHQiLCJpblZpZXdwb3J0IiwidGhyZXNob2xkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicG9zIiwidmlld3BvcnRGdW5jdGlvbnMiLCJ2ZXJ0aWNhbCIsInRoaXMiLCJhbGxvd1BhcnRseSIsInJlbGF0aXZlUG9zaXRpb24iLCJzY3JvbGxhYmxlUGFyZW50IiwiZ2V0U3RhdGUiLCJ2aWV3cG9ydEhlaWdodCIsImhvcml6b250YWwiLCJ2aWV3cG9ydFdpZHRoIiwiX29iamVjdFNwcmVhZCIsImV4dGVuZCIsImV4cHIiLCJoYXNTY3JvbGxWZXJ0aWNhbCIsImhhc1Njcm9sbEhvcml6b250YWwiLCJpIiwibWV0YSIsInBhcmFtIiwic3BsaXQiLCJ0cmltIiwicGFyc2VJbnQiLCJhYm92ZVRoZVZpZXdwb3J0IiwibGVmdE9mVmlld3BvcnQiLCJyaWdodE9mVmlld3BvcnQiLCJhYm92ZVRoZVZpZXdwb3J0UGFydGx5IiwiYmVsb3dUaGVWaWV3cG9ydFBhcnRseSIsImxlZnRPZlZpZXdwb3J0UGFydGx5IiwiYmVsb3dUaGVWaWV3cG9ydCIsInJpZ2h0T2ZWaWV3cG9ydFBhcnRseSIsImV4Y2Vl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QUVKd0Qsd0JBakRrQixTQUFBeEQsRUFBQStDLEVBQUFDLEdBa0RWQyxJQUFLQSxHQUFRRCxFQUFlRSxJQUFNLElBQXRDQSxNQUFBLEtBQ0l2QixFQUFrQnNCLEVBQVFBLEtBQUtBLEVBQU1BLEdBQUtBLEVBQUwsR0FBekJFLFFBQXFEQyxTQUFBSCxFQUFyRCxHQURoQixJQUFBLEVBR2dCdEMsRUFBQUEsRUFBNkJDLEVBRDVCcUMsRUFBYUEsS0FBQUEsRUFBV0EsR0FBQUEsRUFBQSxHQUF6QkUsU0FBK0NyRCxFQUFXbUQsRUFBTW5CLElBQUFBLFNBRmhGQSxHQUd5RHpCLEVBSHpETCxJQWxEYyxPQUFBK0IsRUFBQWxCLElBQUFjLEVBQUEsR0FBQUksRUFBQVgsT0FBQU8sRUFBQSxHQTBEZGtDLDBCQTFEYyxTQTBEa0JYLEVBQWhCSCxFQUFoQkMsR0FDSXJCLElBQUFBLEdBQWtCcUIsRUFBTCxJQUFrQixJQUFMRSxNQUFXRCxLQUNyQ3JDLEVBQWFxQyxFQUFhQSxLQUFBQSxFQUFXQSxHQUFBQSxFQUFBLEdBQXpCRSxRQUFxREMsU0FBV3RCLEVBQUFBLEdBQWhFLElBQTZFQSxFQUduRkMsRUFBVUosRUFBc0JkLEVBRjFCRixFQUFtQixLQUFDWCxFQUFTWSxHQUFRcUMsRUFBSTVDLEdBQUFBLFNBQUFBLEVBQW1CNEMsRUFBQ2pELElBSDdFLFNBQUE4QixHQUt1RHpCLEVBQTBCa0MsSUFFckZtQixPQUFBQSxFQUFBQSxLQWpFa0IvQixFQUFBLEdBQUFJLEVBQUFkLE1BaUVHakIsRUFBWWdELEtBaE16QyxDQWlNWWMiLCJmaWxlIjoidmlld3BvcnQuanF1ZXJ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkKSB7XHJcbiAgICAvKiogQHJldHVybiBib29sZWFuICovXHJcbiAgICBmdW5jdGlvbiBoYXNTY3JvbGwoZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50ID8gZWxlbWVudC5vZmZzZXRIZWlnaHQgPCBlbGVtZW50LnNjcm9sbEhlaWdodCB8fCBlbGVtZW50Lm9mZnNldFdpZHRoIDwgZWxlbWVudC5zY3JvbGxXaWR0aCA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAcmV0dXJuIEhUTUxFbGVtZW50ICovXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWVsZW1lbnQpIHsgcmV0dXJuIHdpbmRvdy5kb2N1bWVudC5ib2R5OyB9XHJcblxyXG4gICAgICAgIHdoaWxlIChlbGVtZW50LnRhZ05hbWUgIT09ICdCT0RZJyAmJiAhaGFzU2Nyb2xsKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQHJldHVybiB7dG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0LCB3aWR0aCwgaGVpZ2h0LCB2aWV3cG9ydFdpZHRoLCB2aWV3cG9ydEhlaWdodH0gKi9cclxuICAgIGZ1bmN0aW9uIGdldFJlbGF0aXZlUG9zaXRpb24oZWxlbWVudCwgdmlld3BvcnQpIHtcclxuICAgICAgICBsZXQgdnBSZWN0ID0gdmlld3BvcnRcclxuICAgICAgICAgICAgICAgICAgICAgPyAodmlld3BvcnQudGFnTmFtZSA9PT0gJ0JPRFknID8ge3RvcDogMCwgbGVmdDogMCwgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLCByaWdodDogd2luZG93LmlubmVyV2lkdGgsIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LCBib3R0b206IHdpbmRvdy5pbm5lckhlaWdodH0gOiB2aWV3cG9ydC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSlcclxuICAgICAgICAgICAgICAgICAgICAgOiB7dG9wOiAwLCBib3R0b206IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwfSxcclxuICAgICAgICAgICAgZWxSZWN0ID0gZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICA/IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuICAgICAgICAgICAgICAgICAgICAgOiB7dG9wOiAwLCBib3R0b206IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmlld3BvcnQsXHJcbiAgICAgICAgICAgIHZpZXdwb3J0V2lkdGg6ICB2cFJlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIHZpZXdwb3J0SGVpZ2h0OiB2cFJlY3QuaGVpZ2h0LFxyXG5cclxuICAgICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICAgICAgZWxlbWVudFdpZHRoOiAgZWxSZWN0LndpZHRoLFxyXG4gICAgICAgICAgICBlbGVtZW50SGVpZ2h0OiBlbFJlY3QuaGVpZ2h0LFxyXG5cclxuICAgICAgICAgICAgdG9wOiAgICBlbFJlY3QudG9wIC0gdnBSZWN0LnRvcCxcclxuICAgICAgICAgICAgYm90dG9tOiB2cFJlY3QuYm90dG9tIC0gZWxSZWN0LmJvdHRvbSxcclxuICAgICAgICAgICAgbGVmdDogICBlbFJlY3QubGVmdCAtIHZwUmVjdC5sZWZ0LFxyXG4gICAgICAgICAgICByaWdodDogIHZwUmVjdC5yaWdodCAtIGVsUmVjdC5yaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAcmV0dXJuIGJvb2xlYW4gKi9cclxuICAgIGZ1bmN0aW9uIGluVmlld3BvcnQoZWxlbWVudCwgdGhyZXNob2xkID0gMCwgdmlld3BvcnQpIHtcclxuICAgICAgICBsZXQgcG9zID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlbGVtZW50LCB2aWV3cG9ydCk7XHJcblxyXG4gICAgICAgIHJldHVybiBwb3MudG9wIC0gdGhyZXNob2xkID49IDAgJiYgcG9zLmJvdHRvbSAtIHRocmVzaG9sZCA+PSAwICYmIHBvcy5sZWZ0IC0gdGhyZXNob2xkID49IDAgJiYgcG9zLnJpZ2h0IC0gdGhyZXNob2xkID49IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEByZXR1cm4ge2luVmlld3BvcnQsIHZlcnRpY2FsLCBob3Jpem9udGFsLCB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQsIHdpZHRoLCBoZWlnaHQsIHZpZXdwb3J0V2lkdGgsIHZpZXdwb3J0SGVpZ2h0fSAgKi9cclxuICAgIGZ1bmN0aW9uIGdldFN0YXRlKGVsZW1lbnQsIHRocmVzaG9sZCA9IDAsIGFsbG93UGFydGx5ID0gZmFsc2UsIHZpZXdwb3J0KSB7XHJcbiAgICAgICAgbGV0IHBvcyA9IGdldFJlbGF0aXZlUG9zaXRpb24oZWxlbWVudCwgdmlld3BvcnQpO1xyXG5cclxuICAgICAgICBwb3MuaW5WaWV3cG9ydCA9IHBvcy50b3AgLSB0aHJlc2hvbGQgPj0gMCAmJiBwb3MuYm90dG9tIC0gdGhyZXNob2xkID49IDAgJiYgcG9zLmxlZnQgLSB0aHJlc2hvbGQgPj0gMCAmJiBwb3MucmlnaHQgLSB0aHJlc2hvbGQgPj0gMDtcclxuXHJcbiAgICAgICAgaWYgKHBvcy50b3AgLSB0aHJlc2hvbGQgPj0gMCAmJiBwb3MuYm90dG9tIC0gdGhyZXNob2xkID49IDApIHtcclxuICAgICAgICAgICAgcG9zLnZlcnRpY2FsID0gJ2luc2lkZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBvcy50b3AgLSB0aHJlc2hvbGQgPD0gMCAmJiBwb3MuYm90dG9tIC0gdGhyZXNob2xkIDw9IDApIHtcclxuICAgICAgICAgICAgcG9zLnZlcnRpY2FsID0gJ2V4Y2VlZHMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhbGxvd1BhcnRseSkge1xyXG4gICAgICAgICAgICBwb3MudmVydGljYWwgPSBwb3MudG9wIC0gdGhyZXNob2xkIDw9IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAocG9zLmJvdHRvbSAtIHRocmVzaG9sZCAtIHBvcy52aWV3cG9ydEhlaWdodCkgPiBwb3MuZWxlbWVudEhlaWdodCA/ICdhYm92ZScgOiAncGFydGx5LWFib3ZlJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICA6IChwb3MudG9wIC0gdGhyZXNob2xkIC0gcG9zLnZpZXdwb3J0SGVpZ2h0KSA+IHBvcy5lbGVtZW50SGVpZ2h0ID8gJ2JlbG93JyA6ICdwYXJ0bHktYmVsb3cnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcG9zLnZlcnRpY2FsID0gcG9zLnRvcCAtIHRocmVzaG9sZCA8PSAwID8gJ2Fib3ZlJyA6ICdiZWxvdyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocG9zLmxlZnQgLSB0aHJlc2hvbGQgPj0gMCAmJiBwb3MucmlnaHQgLSB0aHJlc2hvbGQgPj0gMCkge1xyXG4gICAgICAgICAgICBwb3MuaG9yaXpvbnRhbCA9ICdpbnNpZGUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwb3MubGVmdCAtIHRocmVzaG9sZCA8PSAwICYmIHBvcy5yaWdodCAtIHRocmVzaG9sZCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHBvcy5ob3Jpem9udGFsID0gJ2V4Y2VlZHMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhbGxvd1BhcnRseSkge1xyXG4gICAgICAgICAgICBwb3MuaG9yaXpvbnRhbCA9IHBvcy5sZWZ0IC0gdGhyZXNob2xkIDw9IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChwb3MucmlnaHQgLSB0aHJlc2hvbGQgLSBwb3Mudmlld3BvcnRXaWR0aCkgPiBwb3MuZWxlbWVudFdpZHRoID8gJ2xlZnQnIDogJ3BhcnRseS1sZWZ0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHBvcy5sZWZ0IC0gdGhyZXNob2xkIC0gcG9zLnZpZXdwb3J0V2lkdGgpID4gcG9zLmVsZW1lbnRXaWR0aCA/ICdyaWdodCcgOiAncGFydGx5LXJpZ2h0JztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBvcy5ob3Jpem9udGFsID0gcG9zLnRvcCAtIHRocmVzaG9sZCA8PSAwID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwb3M7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZpZXdwb3J0RnVuY3Rpb25zID0ge1xyXG4gICAgICAgIC8qKiBAcmV0dXJuIGJvb2xlYW4gKi9cclxuICAgICAgICBoYXNTY3JvbGwoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5sZW5ndGgpIHsgcmV0dXJuIGZhbHNlOyB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaGFzU2Nyb2xsKHRoaXNbMF0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKiBAcmV0dXJuIEhUTUxFbGVtZW50ICovXHJcbiAgICAgICAgc2Nyb2xsYWJsZVBhcmVudCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFNjcm9sbGFibGVQYXJlbnQodGhpc1swXSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqIEByZXR1cm4ge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodCwgd2lkdGgsIGhlaWdodCwgdmlld3BvcnRXaWR0aCwgdmlld3BvcnRIZWlnaHR9ICovXHJcbiAgICAgICAgcmVsYXRpdmVQb3NpdGlvbih2aWV3cG9ydCA9IHRoaXMuc2Nyb2xsYWJsZVBhcmVudCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRSZWxhdGl2ZVBvc2l0aW9uKHRoaXNbMF0sIHZpZXdwb3J0ID8gKHZpZXdwb3J0IGluc3RhbmNlb2YgJCA/IHZpZXdwb3J0WzBdIDogdmlld3BvcnQpIDogdGhpcy5zY3JvbGxhYmxlUGFyZW50KCkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKiBAcmV0dXJuIGJvb2xlYW4gKi9cclxuICAgICAgICBpblZpZXdwb3J0KHRocmVzaG9sZCA9IDAsIHZpZXdwb3J0KSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5sZW5ndGgpIHsgcmV0dXJuIGZhbHNlOyB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5WaWV3cG9ydCh0aGlzWzBdLCB0aHJlc2hvbGQsIHZpZXdwb3J0IHx8IHRoaXMuc2Nyb2xsYWJsZVBhcmVudCgpKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKiogQHJldHVybiB7aW5WaWV3cG9ydCwgdmVydGljYWwsIGhvcml6b250YWwsIHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCwgd2lkdGgsIGhlaWdodCwgdmlld3BvcnRXaWR0aCwgdmlld3BvcnRIZWlnaHR9ICAqL1xyXG4gICAgICAgIGdldFN0YXRlKHRocmVzaG9sZCA9IDAsIGFsbG93UGFydGx5ID0gZmFsc2UsIHZpZXdwb3J0KSB7XHJcbiAgICAgICAgICAgIHZpZXdwb3J0ID0gdmlld3BvcnQgfHwgdGhpcy5zY3JvbGxhYmxlUGFyZW50KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMubGVuZ3RoKSB7IHJldHVybiB7aW5WaWV3cG9ydDogZmFsc2UsIHZlcnRpY2FsOiAnaW5zaWRlJywgaG9yaXpvbnRhbDogJ2luc2lkZScsIHRvcDogMCwgYm90dG9tOiAwLCBsZWZ0OiAwLCByaWdodDogMCwgd2lkdGg6IDAsIGhlaWdodDogMCwgdmlld3BvcnRXaWR0aDogMCwgdmlld3BvcnRIZWlnaHQ6IDB9OyB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ2V0U3RhdGUodGhpc1swXSwgdGhyZXNob2xkLCBhbGxvd1BhcnRseSwgdmlld3BvcnQpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4udmlld3BvcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsuLi50aGlzLCAuLi52aWV3cG9ydEZ1bmN0aW9uc307XHJcbiAgICB9O1xyXG5cclxuICAgICQuZXh0ZW5kKCQuZXhwclsnOiddLCB7XHJcbiAgICAgICAgaGFzU2Nyb2xsKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhc1Njcm9sbChlbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhc1Njcm9sbFZlcnRpY2FsKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IDwgZWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYXNTY3JvbGxIb3Jpem9udGFsKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGggPCBlbGVtZW50LnNjcm9sbFdpZHRoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5WaWV3cG9ydChlbGVtZW50LCBpLCBtZXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbSAgICAgPSAobWV0YVszXSB8fCAnJykuc3BsaXQoJywnKSxcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZCA9IChwYXJhbVswXSAmJiAocGFyYW1bMF0gPSBwYXJhbVswXS50cmltKCkpKSA/IHBhcnNlSW50KHBhcmFtWzBdLCAxMCkgOiAwLFxyXG4gICAgICAgICAgICAgICAgdmlld3BvcnQgID0gKHBhcmFtWzFdICYmIChwYXJhbVsxXSA9IHBhcmFtWzFdLnRyaW0oKSkpID8gKCQocGFyYW1bMV0pWzBdIHx8IHVuZGVmaW5lZCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5WaWV3cG9ydChlbGVtZW50LCB0aHJlc2hvbGQsIHZpZXdwb3J0IHx8IGdldFNjcm9sbGFibGVQYXJlbnQoZWxlbWVudCkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWJvdmVUaGVWaWV3cG9ydChlbGVtZW50LCBpLCBtZXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbSAgICAgPSAobWV0YVszXSB8fCAnJykuc3BsaXQoJywnKSxcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZCA9IChwYXJhbVswXSAmJiAocGFyYW1bMF0gPSBwYXJhbVswXS50cmltKCkpKSA/IHBhcnNlSW50KHBhcmFtWzBdLCAxMCkgOiAwLFxyXG4gICAgICAgICAgICAgICAgdmlld3BvcnQgID0gKHBhcmFtWzFdICYmIChwYXJhbVsxXSA9IHBhcmFtWzFdLnRyaW0oKSkpID8gKCQocGFyYW1bMV0pWzBdIHx8IHVuZGVmaW5lZCkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBwb3MgICAgICAgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGVsZW1lbnQsIHZpZXdwb3J0IHx8IGdldFNjcm9sbGFibGVQYXJlbnQoZWxlbWVudCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBvcy50b3AgLSB0aHJlc2hvbGQgPD0gMCAmJiBwb3MuYm90dG9tID49IDA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBiZWxvd1RoZVZpZXdwb3J0KGVsZW1lbnQsIGksIG1ldGEpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmFtICAgICA9IChtZXRhWzNdIHx8ICcnKS5zcGxpdCgnLCcpLFxyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkID0gKHBhcmFtWzBdICYmIChwYXJhbVswXSA9IHBhcmFtWzBdLnRyaW0oKSkpID8gcGFyc2VJbnQocGFyYW1bMF0sIDEwKSA6IDAsXHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCAgPSAocGFyYW1bMV0gJiYgKHBhcmFtWzFdID0gcGFyYW1bMV0udHJpbSgpKSkgPyAoJChwYXJhbVsxXSlbMF0gfHwgdW5kZWZpbmVkKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHBvcyAgICAgICA9IGdldFJlbGF0aXZlUG9zaXRpb24oZWxlbWVudCwgdmlld3BvcnQgfHwgZ2V0U2Nyb2xsYWJsZVBhcmVudChlbGVtZW50KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcG9zLmJvdHRvbSAtIHRocmVzaG9sZCA8PSAwICYmIHBvcy50b3AgPj0gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxlZnRPZlZpZXdwb3J0KGVsZW1lbnQsIGksIG1ldGEpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmFtICAgICA9IChtZXRhWzNdIHx8ICcnKS5zcGxpdCgnLCcpLFxyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkID0gKHBhcmFtWzBdICYmIChwYXJhbVswXSA9IHBhcmFtWzBdLnRyaW0oKSkpID8gcGFyc2VJbnQocGFyYW1bMF0sIDEwKSA6IDAsXHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCAgPSAocGFyYW1bMV0gJiYgKHBhcmFtWzFdID0gcGFyYW1bMV0udHJpbSgpKSkgPyAoJChwYXJhbVsxXSlbMF0gfHwgdW5kZWZpbmVkKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHBvcyAgICAgICA9IGdldFJlbGF0aXZlUG9zaXRpb24oZWxlbWVudCwgdmlld3BvcnQgfHwgZ2V0U2Nyb2xsYWJsZVBhcmVudChlbGVtZW50KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcG9zLmxlZnQgLSB0aHJlc2hvbGQgPD0gMCAmJiBwb3MucmlnaHQgPj0gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJpZ2h0T2ZWaWV3cG9ydChlbGVtZW50LCBpLCBtZXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbSAgICAgPSAobWV0YVszXSB8fCAnJykuc3BsaXQoJywnKSxcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZCA9IChwYXJhbVswXSAmJiAocGFyYW1bMF0gPSBwYXJhbVswXS50cmltKCkpKSA/IHBhcnNlSW50KHBhcmFtWzBdLCAxMCkgOiAwLFxyXG4gICAgICAgICAgICAgICAgdmlld3BvcnQgID0gKHBhcmFtWzFdICYmIChwYXJhbVsxXSA9IHBhcmFtWzFdLnRyaW0oKSkpID8gKCQocGFyYW1bMV0pWzBdIHx8IHVuZGVmaW5lZCkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBwb3MgICAgICAgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGVsZW1lbnQsIHZpZXdwb3J0IHx8IGdldFNjcm9sbGFibGVQYXJlbnQoZWxlbWVudCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBvcy5yaWdodCAtIHRocmVzaG9sZCA8PSAwICYmIHBvcy5sZWZ0ID49IDA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhYm92ZVRoZVZpZXdwb3J0UGFydGx5KGVsZW1lbnQsIGksIG1ldGEpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmFtICAgICA9IChtZXRhWzNdIHx8ICcnKS5zcGxpdCgnLCcpLFxyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkID0gKHBhcmFtWzBdICYmIChwYXJhbVswXSA9IHBhcmFtWzBdLnRyaW0oKSkpID8gcGFyc2VJbnQocGFyYW1bMF0sIDEwKSA6IDAsXHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCAgPSAocGFyYW1bMV0gJiYgKHBhcmFtWzFdID0gcGFyYW1bMV0udHJpbSgpKSkgPyAoJChwYXJhbVsxXSlbMF0gfHwgdW5kZWZpbmVkKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHBvcyAgICAgICA9IGdldFJlbGF0aXZlUG9zaXRpb24oZWxlbWVudCwgdmlld3BvcnQgfHwgZ2V0U2Nyb2xsYWJsZVBhcmVudChlbGVtZW50KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcG9zLnRvcCAtIHRocmVzaG9sZCA8PSAwICYmIHBvcy5ib3R0b20gPj0gMCAmJiAocG9zLmJvdHRvbSAtIHRocmVzaG9sZCAtIHBvcy52aWV3cG9ydEhlaWdodCkgPiBwb3MuZWxlbWVudEhlaWdodDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJlbG93VGhlVmlld3BvcnRQYXJ0bHkoZWxlbWVudCwgaSwgbWV0YSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyYW0gICAgID0gKG1ldGFbM10gfHwgJycpLnNwbGl0KCcsJyksXHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgPSAocGFyYW1bMF0gJiYgKHBhcmFtWzBdID0gcGFyYW1bMF0udHJpbSgpKSkgPyBwYXJzZUludChwYXJhbVswXSwgMTApIDogMCxcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0ICA9IChwYXJhbVsxXSAmJiAocGFyYW1bMV0gPSBwYXJhbVsxXS50cmltKCkpKSA/ICgkKHBhcmFtWzFdKVswXSB8fCB1bmRlZmluZWQpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgcG9zICAgICAgID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlbGVtZW50LCB2aWV3cG9ydCB8fCBnZXRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwb3MuYm90dG9tIC0gdGhyZXNob2xkIDw9IDAgJiYgcG9zLnRvcCA+PSAwICYmIChwb3MudG9wIC0gdGhyZXNob2xkIC0gcG9zLnZpZXdwb3J0SGVpZ2h0KSA+IHBvcy5lbGVtZW50SGVpZ2h0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGVmdE9mVmlld3BvcnRQYXJ0bHkoZWxlbWVudCwgaSwgbWV0YSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyYW0gICAgID0gKG1ldGFbM10gfHwgJycpLnNwbGl0KCcsJyksXHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgPSAocGFyYW1bMF0gJiYgKHBhcmFtWzBdID0gcGFyYW1bMF0udHJpbSgpKSkgPyBwYXJzZUludChwYXJhbVswXSwgMTApIDogMCxcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0ICA9IChwYXJhbVsxXSAmJiAocGFyYW1bMV0gPSBwYXJhbVsxXS50cmltKCkpKSA/ICgkKHBhcmFtWzFdKVswXSB8fCB1bmRlZmluZWQpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgcG9zICAgICAgID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlbGVtZW50LCB2aWV3cG9ydCB8fCBnZXRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwb3MubGVmdCAtIHRocmVzaG9sZCA8PSAwICYmIHBvcy5yaWdodCA+PSAwICYmIChwb3MubGVmdCAtIHRocmVzaG9sZCAtIHBvcy52aWV3cG9ydFdpZHRoKSA+IHBvcy5lbGVtZW50V2lkdGg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByaWdodE9mVmlld3BvcnRQYXJ0bHkoZWxlbWVudCwgaSwgbWV0YSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyYW0gICAgID0gKG1ldGFbM10gfHwgJycpLnNwbGl0KCcsJyksXHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgPSAocGFyYW1bMF0gJiYgKHBhcmFtWzBdID0gcGFyYW1bMF0udHJpbSgpKSkgPyBwYXJzZUludChwYXJhbVswXSwgMTApIDogMCxcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0ICA9IChwYXJhbVsxXSAmJiAocGFyYW1bMV0gPSBwYXJhbVsxXS50cmltKCkpKSA/ICgkKHBhcmFtWzFdKVswXSB8fCB1bmRlZmluZWQpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgcG9zICAgICAgID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlbGVtZW50LCB2aWV3cG9ydCB8fCBnZXRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwb3MucmlnaHQgLSB0aHJlc2hvbGQgPD0gMCAmJiBwb3MubGVmdCA+PSAwICYmIChwb3MucmlnaHQgLSB0aHJlc2hvbGQgLSBwb3Mudmlld3BvcnRXaWR0aCkgPiBwb3MuZWxlbWVudFdpZHRoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXhjZWVkc1ZpZXdwb3J0KGVsZW1lbnQsIGksIG1ldGEpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmFtICAgICA9IChtZXRhWzNdIHx8ICcnKS5zcGxpdCgnLCcpLFxyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkID0gKHBhcmFtWzBdICYmIChwYXJhbVswXSA9IHBhcmFtWzBdLnRyaW0oKSkpID8gcGFyc2VJbnQocGFyYW1bMF0sIDEwKSA6IDAsXHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCAgPSAocGFyYW1bMV0gJiYgKHBhcmFtWzFdID0gcGFyYW1bMV0udHJpbSgpKSkgPyAoJChwYXJhbVsxXSlbMF0gfHwgdW5kZWZpbmVkKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAhaW5WaWV3cG9ydChlbGVtZW50LCB0aHJlc2hvbGQsIHZpZXdwb3J0IHx8IGdldFNjcm9sbGFibGVQYXJlbnQoZWxlbWVudCkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXhjZWVkc1ZpZXdwb3J0VmVydGljYWwoZWxlbWVudCwgaSwgbWV0YSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyYW0gICAgID0gKG1ldGFbM10gfHwgJycpLnNwbGl0KCcsJyksXHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgPSAocGFyYW1bMF0gJiYgKHBhcmFtWzBdID0gcGFyYW1bMF0udHJpbSgpKSkgPyBwYXJzZUludChwYXJhbVswXSwgMTApIDogMCxcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0ICA9IChwYXJhbVsxXSAmJiAocGFyYW1bMV0gPSBwYXJhbVsxXS50cmltKCkpKSA/ICgkKHBhcmFtWzFdKVswXSB8fCB1bmRlZmluZWQpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgcG9zICAgICAgID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlbGVtZW50LCB2aWV3cG9ydCB8fCBnZXRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwb3MudG9wIC0gdGhyZXNob2xkIDwgMCAmJiBwb3MuYm90dG9tIC0gdGhyZXNob2xkIDwgMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGV4Y2VlZHNWaWV3cG9ydEhvcml6b250YWwoZWxlbWVudCwgaSwgbWV0YSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyYW0gICAgID0gKG1ldGFbM10gfHwgJycpLnNwbGl0KCcsJyksXHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgPSAocGFyYW1bMF0gJiYgKHBhcmFtWzBdID0gcGFyYW1bMF0udHJpbSgpKSkgPyBwYXJzZUludChwYXJhbVswXSwgMTApIDogMCxcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0ICA9IChwYXJhbVsxXSAmJiAocGFyYW1bMV0gPSBwYXJhbVsxXS50cmltKCkpKSA/ICgkKHBhcmFtWzFdKVswXSB8fCB1bmRlZmluZWQpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgcG9zICAgICAgID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlbGVtZW50LCB2aWV3cG9ydCB8fCBnZXRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwb3MubGVmdCAtIHRocmVzaG9sZCA8IDAgJiYgcG9zLnJpZ2h0IC0gdGhyZXNob2xkIDwgMDtcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbn0pKGpRdWVyeSk7Il19
