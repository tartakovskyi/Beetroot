"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery")),_util=_interopRequireDefault(require("./util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var NAME="tab",VERSION="4.2.1",DATA_KEY="bs.tab",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],Event={HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),CLICK_DATA_API:"click".concat(EVENT_KEY).concat(DATA_API_KEY)},ClassName={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},Selector={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},Tab=function(){function r(e){_classCallCheck(this,r),this._element=e}return _createClass(r,[{key:"show",value:function(){var a=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&(0,_jquery.default)(this._element).hasClass(ClassName.ACTIVE)||(0,_jquery.default)(this._element).hasClass(ClassName.DISABLED))){var e,r,t=(0,_jquery.default)(this._element).closest(Selector.NAV_LIST_GROUP)[0],l=_util.default.getSelectorFromElement(this._element);if(t){var n="UL"===t.nodeName||"OL"===t.nodeName?Selector.ACTIVE_UL:Selector.ACTIVE;r=(r=_jquery.default.makeArray((0,_jquery.default)(t).find(n)))[r.length-1]}var u=_jquery.default.Event(Event.HIDE,{relatedTarget:this._element}),i=_jquery.default.Event(Event.SHOW,{relatedTarget:r});if(r&&(0,_jquery.default)(r).trigger(u),(0,_jquery.default)(this._element).trigger(i),!i.isDefaultPrevented()&&!u.isDefaultPrevented()){l&&(e=document.querySelector(l)),this._activate(this._element,t);var o=function(){var e=_jquery.default.Event(Event.HIDDEN,{relatedTarget:a._element}),t=_jquery.default.Event(Event.SHOWN,{relatedTarget:r});(0,_jquery.default)(r).trigger(e),(0,_jquery.default)(a._element).trigger(t)};e?this._activate(e,e.parentNode,o):o()}}}},{key:"dispose",value:function(){_jquery.default.removeData(this._element,DATA_KEY),this._element=null}},{key:"_activate",value:function(e,t,a){var r=this,l=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?(0,_jquery.default)(t).children(Selector.ACTIVE):(0,_jquery.default)(t).find(Selector.ACTIVE_UL))[0],n=a&&l&&(0,_jquery.default)(l).hasClass(ClassName.FADE),u=function(){return r._transitionComplete(e,l,a)};if(l&&n){var i=_util.default.getTransitionDurationFromElement(l);(0,_jquery.default)(l).removeClass(ClassName.SHOW).one(_util.default.TRANSITION_END,u).emulateTransitionEnd(i)}else u()}},{key:"_transitionComplete",value:function(e,t,a){if(t){(0,_jquery.default)(t).removeClass(ClassName.ACTIVE);var r=(0,_jquery.default)(t.parentNode).find(Selector.DROPDOWN_ACTIVE_CHILD)[0];r&&(0,_jquery.default)(r).removeClass(ClassName.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if((0,_jquery.default)(e).addClass(ClassName.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),_util.default.reflow(e),(0,_jquery.default)(e).addClass(ClassName.SHOW),e.parentNode&&(0,_jquery.default)(e.parentNode).hasClass(ClassName.DROPDOWN_MENU)){var l=(0,_jquery.default)(e).closest(Selector.DROPDOWN)[0];if(l){var n=[].slice.call(l.querySelectorAll(Selector.DROPDOWN_TOGGLE));(0,_jquery.default)(n).addClass(ClassName.ACTIVE)}e.setAttribute("aria-expanded",!0)}a&&a()}}],[{key:"_jQueryInterface",value:function(a){return this.each(function(){var e=(0,_jquery.default)(this),t=e.data(DATA_KEY);if(t||(t=new r(this),e.data(DATA_KEY,t)),"string"==typeof a){if(void 0===t[a])throw new TypeError('No method named "'.concat(a,'"'));t[a]()}})}},{key:"VERSION",get:function(){return VERSION}}]),r}();(0,_jquery.default)(document).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(e){e.preventDefault(),Tab._jQueryInterface.call((0,_jquery.default)(this),"show")}),_jquery.default.fn[NAME]=Tab._jQueryInterface,_jquery.default.fn[NAME].Constructor=Tab,_jquery.default.fn[NAME].noConflict=function(){return _jquery.default.fn[NAME]=JQUERY_NO_CONFLICT,Tab._jQueryInterface};var _default=Tab;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhYi5qcyJdLCJuYW1lcyI6WyJfanF1ZXJ5IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbCIsIk5BTUUiLCJWRVJTSU9OIiwiREFUQV9LRVkiLCJFVkVOVF9LRVkiLCJjb25jYXQiLCJEQVRBX0FQSV9LRVkiLCJKUVVFUllfTk9fQ09ORkxJQ1QiLCIkIiwiZm4iLCJFdmVudCIsIkhJREUiLCJISURERU4iLCJTSE9XIiwiU0hPV04iLCJDTElDS19EQVRBX0FQSSIsIkNsYXNzTmFtZSIsIkFDVElWRSIsIkRJU0FCTEVEIiwiRkFERSIsIkFDVElWRV9VTCIsIkRBVEFfVE9HR0xFIiwiRFJPUERPV04iLCJOQVZfTElTVF9HUk9VUCIsIlRhYiIsImVsZW1lbnQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2VsZW1lbnQiLCJfdGhpcyIsInBhcmVudE5vZGUiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCJkZWZhdWx0IiwiaGFzQ2xhc3MiLCJ0YXJnZXQiLCJwcmV2aW91cyIsImxpc3RFbGVtZW50IiwiY2xvc2VzdCIsIlNlbGVjdG9yIiwic2VsZWN0b3IiLCJVdGlsIiwiZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCIsIm5vZGVOYW1lIiwibWFrZUFycmF5IiwiZmluZCIsIml0ZW1TZWxlY3RvciIsImhpZGVFdmVudCIsInNob3dFdmVudCIsInJlbGF0ZWRUYXJnZXQiLCJ0cmlnZ2VyIiwiaXNEZWZhdWx0UHJldmVudGVkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2FjdGl2YXRlIiwiY29tcGxldGUiLCJzaG93bkV2ZW50IiwiaGlkZGVuRXZlbnQiLCJyZW1vdmVEYXRhIiwiY29udGFpbmVyIiwiY2FsbGJhY2siLCJfdGhpczIiLCJhY3RpdmUiLCJjaGlsZHJlbiIsImFjdGl2ZUVsZW1lbnRzIiwiaXNUcmFuc2l0aW9uaW5nIiwiZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQiLCJyZW1vdmVDbGFzcyIsIm9uZSIsIlRSQU5TSVRJT05fRU5EIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiZHJvcGRvd25DaGlsZCIsIkRST1BET1dOX0FDVElWRV9DSElMRCIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsImFkZENsYXNzIiwicmVmbG93IiwiRFJPUERPV05fTUVOVSIsImRyb3Bkb3duRWxlbWVudCIsImRyb3Bkb3duVG9nZ2xlTGlzdCIsInNsaWNlIiwiY2FsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJEUk9QRE9XTl9UT0dHTEUiLCJkYXRhIiwiZWFjaCIsIiR0aGlzIiwiY29uZmlnIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX2pRdWVyeUludGVyZmFjZSIsIkNvbnN0cnVjdG9yIiwibm9Db25mbGljdCJdLCJtYXBwaW5ncyI6IjJGQU9BLElBQUFBLFFBQUFDLHVCQUFBQyxRQUFBLFdBQ0FDLE1BQUFGLHVCQUFBQyxRQUFBLHlkQVFBLElBQU1FLEtBQXFCLE1BQ3JCQyxRQUFxQixRQUNyQkMsU0FBcUIsU0FSM0JDLFVBQUEsSUFBQUMsT0FBQUYsVUFVTUcsYUFBcUIsWUFDckJDLG1CQUFxQkMsUUFBQUEsUUFBRUMsR0FBR1IsTUFFMUJTLE1BQVEsQ0FQZEMsS0FBTVYsT0FBQUEsT0FBTkcsV0FDQVEsT0FBTVYsU0FBQUEsT0FBTkUsV0FDQVMsS0FBTVYsT0FBQUEsT0FBTkMsV0FDQVUsTUFBTVYsUUFBQUEsT0FBeUJELFdBQy9CWSxlQUFrQixRQUFBVixPQUFTRCxXQUFUQyxPQUFsQkMsZUFJTVUsVUFBQSxDQUNKSixjQUFNLGdCQUNOQyxPQUFJLFNBQ0pDLFNBQUssV0FDTEMsS0FBYyxPQUxoQkYsS0FBQSxRQVVFSSxTQUFnQixDQUNoQkMsU0FIZ0IsWUFJaEJDLGVBSmdCLG9CQUtoQk4sT0FBZ0IsVUFMbEJPLFVBQUEsaUJBUUFDLFlBQWlCLGtFQUNmQyxnQkFEZSxtQkFFZkMsc0JBQXdCLDRCQWNwQkMsZUFDSixTQUFBQSxFQUFZQyxHQUFTQyxnQkFBQUMsS0FBQUgsR0FD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Q3hEQSxFQUFNQyxpQkFDTm5FLElBQUlvRSxpQkFBaUJWLE1BQUssRUFBQXJGLFFBQUFxQyxTQUFFUCxNQUFPLFVBU3ZDbkIsUUFBQUEsUUFBRUMsR0FBR1IsTUFBUXVCLElBQUlvRSxpQkFDakJwRixRQUFBQSxRQUFFQyxHQUFHUixNQUFNNEYsWUFBY3JFLElBQ3pCaEIsUUFBQUEsUUFBRUMsR0FBR1IsTUFBTTZGLFdBQWEsV0FFdEIsT0FEQXRGLFFBQUFBLFFBQUVDLEdBQUdSLE1BQVFNLG1CQUNOaUIsSUFBSW9FLCtCQUdFcEUiLCJmaWxlIjoidGFiLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4yLjEpOiB0YWIuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSdcbmltcG9ydCBVdGlsIGZyb20gJy4vdXRpbCdcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIENvbnN0YW50c1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuY29uc3QgTkFNRSAgICAgICAgICAgICAgID0gJ3RhYidcbmNvbnN0IFZFUlNJT04gICAgICAgICAgICA9ICc0LjIuMSdcbmNvbnN0IERBVEFfS0VZICAgICAgICAgICA9ICdicy50YWInXG5jb25zdCBFVkVOVF9LRVkgICAgICAgICAgPSBgLiR7REFUQV9LRVl9YFxuY29uc3QgREFUQV9BUElfS0VZICAgICAgID0gJy5kYXRhLWFwaSdcbmNvbnN0IEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV1cblxuY29uc3QgRXZlbnQgPSB7XG4gIEhJREUgICAgICAgICAgIDogYGhpZGUke0VWRU5UX0tFWX1gLFxuICBISURERU4gICAgICAgICA6IGBoaWRkZW4ke0VWRU5UX0tFWX1gLFxuICBTSE9XICAgICAgICAgICA6IGBzaG93JHtFVkVOVF9LRVl9YCxcbiAgU0hPV04gICAgICAgICAgOiBgc2hvd24ke0VWRU5UX0tFWX1gLFxuICBDTElDS19EQVRBX0FQSSA6IGBjbGljayR7RVZFTlRfS0VZfSR7REFUQV9BUElfS0VZfWBcbn1cblxuY29uc3QgQ2xhc3NOYW1lID0ge1xuICBEUk9QRE9XTl9NRU5VIDogJ2Ryb3Bkb3duLW1lbnUnLFxuICBBQ1RJVkUgICAgICAgIDogJ2FjdGl2ZScsXG4gIERJU0FCTEVEICAgICAgOiAnZGlzYWJsZWQnLFxuICBGQURFICAgICAgICAgIDogJ2ZhZGUnLFxuICBTSE9XICAgICAgICAgIDogJ3Nob3cnXG59XG5cbmNvbnN0IFNlbGVjdG9yID0ge1xuICBEUk9QRE9XTiAgICAgICAgICAgICAgOiAnLmRyb3Bkb3duJyxcbiAgTkFWX0xJU1RfR1JPVVAgICAgICAgIDogJy5uYXYsIC5saXN0LWdyb3VwJyxcbiAgQUNUSVZFICAgICAgICAgICAgICAgIDogJy5hY3RpdmUnLFxuICBBQ1RJVkVfVUwgICAgICAgICAgICAgOiAnPiBsaSA+IC5hY3RpdmUnLFxuICBEQVRBX1RPR0dMRSAgICAgICAgICAgOiAnW2RhdGEtdG9nZ2xlPVwidGFiXCJdLCBbZGF0YS10b2dnbGU9XCJwaWxsXCJdLCBbZGF0YS10b2dnbGU9XCJsaXN0XCJdJyxcbiAgRFJPUERPV05fVE9HR0xFICAgICAgIDogJy5kcm9wZG93bi10b2dnbGUnLFxuICBEUk9QRE9XTl9BQ1RJVkVfQ0hJTEQgOiAnPiAuZHJvcGRvd24tbWVudSAuYWN0aXZlJ1xufVxuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQ2xhc3MgRGVmaW5pdGlvblxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuY2xhc3MgVGFiIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50XG4gIH1cblxuICAvLyBHZXR0ZXJzXG5cbiAgc3RhdGljIGdldCBWRVJTSU9OKCkge1xuICAgIHJldHVybiBWRVJTSU9OXG4gIH1cblxuICAvLyBQdWJsaWNcblxuICBzaG93KCkge1xuICAgIGlmICh0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgJiZcbiAgICAgICAgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJlxuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpIHx8XG4gICAgICAgICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IHRhcmdldFxuICAgIGxldCBwcmV2aW91c1xuICAgIGNvbnN0IGxpc3RFbGVtZW50ID0gJCh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLk5BVl9MSVNUX0dST1VQKVswXVxuICAgIGNvbnN0IHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpXG5cbiAgICBpZiAobGlzdEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGl0ZW1TZWxlY3RvciA9IGxpc3RFbGVtZW50Lm5vZGVOYW1lID09PSAnVUwnIHx8IGxpc3RFbGVtZW50Lm5vZGVOYW1lID09PSAnT0wnID8gU2VsZWN0b3IuQUNUSVZFX1VMIDogU2VsZWN0b3IuQUNUSVZFXG4gICAgICBwcmV2aW91cyA9ICQubWFrZUFycmF5KCQobGlzdEVsZW1lbnQpLmZpbmQoaXRlbVNlbGVjdG9yKSlcbiAgICAgIHByZXZpb3VzID0gcHJldmlvdXNbcHJldmlvdXMubGVuZ3RoIC0gMV1cbiAgICB9XG5cbiAgICBjb25zdCBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUsIHtcbiAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcbiAgICB9KVxuXG4gICAgY29uc3Qgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCB7XG4gICAgICByZWxhdGVkVGFyZ2V0OiBwcmV2aW91c1xuICAgIH0pXG5cbiAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICQocHJldmlvdXMpLnRyaWdnZXIoaGlkZUV2ZW50KVxuICAgIH1cblxuICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpXG5cbiAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XG4gICAgICAgIGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgIH1cblxuICAgIHRoaXMuX2FjdGl2YXRlKFxuICAgICAgdGhpcy5fZWxlbWVudCxcbiAgICAgIGxpc3RFbGVtZW50XG4gICAgKVxuXG4gICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBoaWRkZW5FdmVudCA9ICQuRXZlbnQoRXZlbnQuSElEREVOLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHNob3duRXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1dOLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHByZXZpb3VzXG4gICAgICB9KVxuXG4gICAgICAkKHByZXZpb3VzKS50cmlnZ2VyKGhpZGRlbkV2ZW50KVxuICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpXG4gICAgfVxuXG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgdGhpcy5fYWN0aXZhdGUodGFyZ2V0LCB0YXJnZXQucGFyZW50Tm9kZSwgY29tcGxldGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbXBsZXRlKClcbiAgICB9XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSlcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbFxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIF9hY3RpdmF0ZShlbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgYWN0aXZlRWxlbWVudHMgPSBjb250YWluZXIgJiYgKGNvbnRhaW5lci5ub2RlTmFtZSA9PT0gJ1VMJyB8fCBjb250YWluZXIubm9kZU5hbWUgPT09ICdPTCcpXG4gICAgICA/ICQoY29udGFpbmVyKS5maW5kKFNlbGVjdG9yLkFDVElWRV9VTClcbiAgICAgIDogJChjb250YWluZXIpLmNoaWxkcmVuKFNlbGVjdG9yLkFDVElWRSlcblxuICAgIGNvbnN0IGFjdGl2ZSA9IGFjdGl2ZUVsZW1lbnRzWzBdXG4gICAgY29uc3QgaXNUcmFuc2l0aW9uaW5nID0gY2FsbGJhY2sgJiYgKGFjdGl2ZSAmJiAkKGFjdGl2ZSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKVxuICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4gdGhpcy5fdHJhbnNpdGlvbkNvbXBsZXRlKFxuICAgICAgZWxlbWVudCxcbiAgICAgIGFjdGl2ZSxcbiAgICAgIGNhbGxiYWNrXG4gICAgKVxuXG4gICAgaWYgKGFjdGl2ZSAmJiBpc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQoYWN0aXZlKVxuXG4gICAgICAkKGFjdGl2ZSlcbiAgICAgICAgLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKVxuICAgICAgICAub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb21wbGV0ZSgpXG4gICAgfVxuICB9XG5cbiAgX3RyYW5zaXRpb25Db21wbGV0ZShlbGVtZW50LCBhY3RpdmUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgJChhY3RpdmUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpXG5cbiAgICAgIGNvbnN0IGRyb3Bkb3duQ2hpbGQgPSAkKGFjdGl2ZS5wYXJlbnROb2RlKS5maW5kKFxuICAgICAgICBTZWxlY3Rvci5EUk9QRE9XTl9BQ1RJVkVfQ0hJTERcbiAgICAgIClbMF1cblxuICAgICAgaWYgKGRyb3Bkb3duQ2hpbGQpIHtcbiAgICAgICAgJChkcm9wZG93bkNoaWxkKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKVxuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aXZlLmdldEF0dHJpYnV0ZSgncm9sZScpID09PSAndGFiJykge1xuICAgICAgICBhY3RpdmUuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpXG4gICAgICB9XG4gICAgfVxuXG4gICAgJChlbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKVxuICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgncm9sZScpID09PSAndGFiJykge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCB0cnVlKVxuICAgIH1cblxuICAgIFV0aWwucmVmbG93KGVsZW1lbnQpXG4gICAgJChlbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVylcblxuICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUgJiYgJChlbGVtZW50LnBhcmVudE5vZGUpLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QRE9XTl9NRU5VKSkge1xuICAgICAgY29uc3QgZHJvcGRvd25FbGVtZW50ID0gJChlbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLkRST1BET1dOKVswXVxuXG4gICAgICBpZiAoZHJvcGRvd25FbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGRyb3Bkb3duVG9nZ2xlTGlzdCA9IFtdLnNsaWNlLmNhbGwoZHJvcGRvd25FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuRFJPUERPV05fVE9HR0xFKSlcblxuICAgICAgICAkKGRyb3Bkb3duVG9nZ2xlTGlzdCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSlcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxuICAgIH1cblxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIC8vIFN0YXRpY1xuXG4gIHN0YXRpYyBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgJHRoaXMgPSAkKHRoaXMpXG4gICAgICBsZXQgZGF0YSA9ICR0aGlzLmRhdGEoREFUQV9LRVkpXG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICBkYXRhID0gbmV3IFRhYih0aGlzKVxuICAgICAgICAkdGhpcy5kYXRhKERBVEFfS0VZLCBkYXRhKVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTm8gbWV0aG9kIG5hbWVkIFwiJHtjb25maWd9XCJgKVxuICAgICAgICB9XG4gICAgICAgIGRhdGFbY29uZmlnXSgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbiQoZG9jdW1lbnQpXG4gIC5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBUYWIuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGhpcyksICdzaG93JylcbiAgfSlcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIGpRdWVyeVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuJC5mbltOQU1FXSA9IFRhYi5falF1ZXJ5SW50ZXJmYWNlXG4kLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gVGFiXG4kLmZuW05BTUVdLm5vQ29uZmxpY3QgPSAoKSA9PiB7XG4gICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1RcbiAgcmV0dXJuIFRhYi5falF1ZXJ5SW50ZXJmYWNlXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRhYlxuIl19
