"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery")),_popper=_interopRequireDefault(require("popper.js")),_util=_interopRequireDefault(require("./util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var NAME="dropdown",VERSION="4.2.1",DATA_KEY="bs.dropdown",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],ESCAPE_KEYCODE=27,SPACE_KEYCODE=32,TAB_KEYCODE=9,ARROW_UP_KEYCODE=38,ARROW_DOWN_KEYCODE=40,RIGHT_MOUSE_BUTTON_WHICH=3,REGEXP_KEYDOWN=new RegExp("".concat(ARROW_UP_KEYCODE,"|").concat(ARROW_DOWN_KEYCODE,"|").concat(ESCAPE_KEYCODE)),Event={HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),CLICK:"click".concat(EVENT_KEY),CLICK_DATA_API:"click".concat(EVENT_KEY).concat(DATA_API_KEY),KEYDOWN_DATA_API:"keydown".concat(EVENT_KEY).concat(DATA_API_KEY),KEYUP_DATA_API:"keyup".concat(EVENT_KEY).concat(DATA_API_KEY)},ClassName={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},Selector={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},AttachmentMap={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},Default={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},DefaultType={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Dropdown=function(){function i(e,t){_classCallCheck(this,i),this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}return _createClass(i,[{key:"toggle",value:function(){if(!this._element.disabled&&!(0,_jquery.default)(this._element).hasClass(ClassName.DISABLED)){var e=i._getParentFromElement(this._element),t=(0,_jquery.default)(this._menu).hasClass(ClassName.SHOW);if(i._clearMenus(),!t){var n={relatedTarget:this._element},r=_jquery.default.Event(Event.SHOW,n);if((0,_jquery.default)(e).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar){if(void 0===_popper.default)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var a=this._element;"parent"===this._config.reference?a=e:_util.default.isElement(this._config.reference)&&(a=this._config.reference,void 0!==this._config.reference.jquery&&(a=this._config.reference[0])),"scrollParent"!==this._config.boundary&&(0,_jquery.default)(e).addClass(ClassName.POSITION_STATIC),this._popper=new _popper.default(a,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===(0,_jquery.default)(e).closest(Selector.NAVBAR_NAV).length&&(0,_jquery.default)(document.body).children().on("mouseover",null,_jquery.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),(0,_jquery.default)(this._menu).toggleClass(ClassName.SHOW),(0,_jquery.default)(e).toggleClass(ClassName.SHOW).trigger(_jquery.default.Event(Event.SHOWN,n))}}}}},{key:"show",value:function(){if(!(this._element.disabled||(0,_jquery.default)(this._element).hasClass(ClassName.DISABLED)||(0,_jquery.default)(this._menu).hasClass(ClassName.SHOW))){var e={relatedTarget:this._element},t=_jquery.default.Event(Event.SHOW,e),n=i._getParentFromElement(this._element);(0,_jquery.default)(n).trigger(t),t.isDefaultPrevented()||((0,_jquery.default)(this._menu).toggleClass(ClassName.SHOW),(0,_jquery.default)(n).toggleClass(ClassName.SHOW).trigger(_jquery.default.Event(Event.SHOWN,e)))}}},{key:"hide",value:function(){if(!this._element.disabled&&!(0,_jquery.default)(this._element).hasClass(ClassName.DISABLED)&&(0,_jquery.default)(this._menu).hasClass(ClassName.SHOW)){var e={relatedTarget:this._element},t=_jquery.default.Event(Event.HIDE,e),n=i._getParentFromElement(this._element);(0,_jquery.default)(n).trigger(t),t.isDefaultPrevented()||((0,_jquery.default)(this._menu).toggleClass(ClassName.SHOW),(0,_jquery.default)(n).toggleClass(ClassName.SHOW).trigger(_jquery.default.Event(Event.HIDDEN,e)))}}},{key:"dispose",value:function(){_jquery.default.removeData(this._element,DATA_KEY),(0,_jquery.default)(this._element).off(EVENT_KEY),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)}},{key:"update",value:function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()}},{key:"_addEventListeners",value:function(){var t=this;(0,_jquery.default)(this._element).on(Event.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})}},{key:"_getConfig",value:function(e){return e=_objectSpread({},this.constructor.Default,(0,_jquery.default)(this._element).data(),e),_util.default.typeCheckConfig(NAME,e,this.constructor.DefaultType),e}},{key:"_getMenuElement",value:function(){if(!this._menu){var e=i._getParentFromElement(this._element);e&&(this._menu=e.querySelector(Selector.MENU))}return this._menu}},{key:"_getPlacement",value:function(){var e=(0,_jquery.default)(this._element.parentNode),t=AttachmentMap.BOTTOM;return e.hasClass(ClassName.DROPUP)?(t=AttachmentMap.TOP,(0,_jquery.default)(this._menu).hasClass(ClassName.MENURIGHT)&&(t=AttachmentMap.TOPEND)):e.hasClass(ClassName.DROPRIGHT)?t=AttachmentMap.RIGHT:e.hasClass(ClassName.DROPLEFT)?t=AttachmentMap.LEFT:(0,_jquery.default)(this._menu).hasClass(ClassName.MENURIGHT)&&(t=AttachmentMap.BOTTOMEND),t}},{key:"_detectNavbar",value:function(){return 0<(0,_jquery.default)(this._element).closest(".navbar").length}},{key:"_getPopperConfig",value:function(){var t=this,e={};"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=_objectSpread({},e.offsets,t._config.offset(e.offsets)||{}),e}:e.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:e,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(n.modifiers.applyStyle={enabled:!1}),n}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var e=(0,_jquery.default)(this).data(DATA_KEY),t="object"===_typeof(n)?n:null;if(e||(e=new i(this,t),(0,_jquery.default)(this).data(DATA_KEY,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'.concat(n,'"'));e[n]()}})}},{key:"_clearMenus",value:function(e){if(!e||e.which!==RIGHT_MOUSE_BUTTON_WHICH&&("keyup"!==e.type||e.which===TAB_KEYCODE))for(var t=[].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE)),n=0,r=t.length;n<r;n++){var a=i._getParentFromElement(t[n]),o=(0,_jquery.default)(t[n]).data(DATA_KEY),l={relatedTarget:t[n]};if(e&&"click"===e.type&&(l.clickEvent=e),o){var u=o._menu;if((0,_jquery.default)(a).hasClass(ClassName.SHOW)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.which===TAB_KEYCODE)&&_jquery.default.contains(a,e.target))){var s=_jquery.default.Event(Event.HIDE,l);(0,_jquery.default)(a).trigger(s),s.isDefaultPrevented()||("ontouchstart"in document.documentElement&&(0,_jquery.default)(document.body).children().off("mouseover",null,_jquery.default.noop),t[n].setAttribute("aria-expanded","false"),(0,_jquery.default)(u).removeClass(ClassName.SHOW),(0,_jquery.default)(a).removeClass(ClassName.SHOW).trigger(_jquery.default.Event(Event.HIDDEN,l)))}}}}},{key:"_getParentFromElement",value:function(e){var t,n=_util.default.getSelectorFromElement(e);return n&&(t=document.querySelector(n)),t||e.parentNode}},{key:"_dataApiKeydownHandler",value:function(e){if((/input|textarea/i.test(e.target.tagName)?!(e.which===SPACE_KEYCODE||e.which!==ESCAPE_KEYCODE&&(e.which!==ARROW_DOWN_KEYCODE&&e.which!==ARROW_UP_KEYCODE||(0,_jquery.default)(e.target).closest(Selector.MENU).length)):REGEXP_KEYDOWN.test(e.which))&&(e.preventDefault(),e.stopPropagation(),!this.disabled&&!(0,_jquery.default)(this).hasClass(ClassName.DISABLED))){var t=i._getParentFromElement(this),n=(0,_jquery.default)(t).hasClass(ClassName.SHOW);if(n&&(!n||e.which!==ESCAPE_KEYCODE&&e.which!==SPACE_KEYCODE)){var r=[].slice.call(t.querySelectorAll(Selector.VISIBLE_ITEMS));if(0!==r.length){var a=r.indexOf(e.target);e.which===ARROW_UP_KEYCODE&&0<a&&a--,e.which===ARROW_DOWN_KEYCODE&&a<r.length-1&&a++,a<0&&(a=0),r[a].focus()}}else{if(e.which===ESCAPE_KEYCODE){var o=t.querySelector(Selector.DATA_TOGGLE);(0,_jquery.default)(o).trigger("focus")}(0,_jquery.default)(this).trigger("click")}}}},{key:"VERSION",get:function(){return VERSION}},{key:"Default",get:function(){return Default}},{key:"DefaultType",get:function(){return DefaultType}}]),i}();(0,_jquery.default)(document).on(Event.KEYDOWN_DATA_API,Selector.DATA_TOGGLE,Dropdown._dataApiKeydownHandler).on(Event.KEYDOWN_DATA_API,Selector.MENU,Dropdown._dataApiKeydownHandler).on("".concat(Event.CLICK_DATA_API," ").concat(Event.KEYUP_DATA_API),Dropdown._clearMenus).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(e){e.preventDefault(),e.stopPropagation(),Dropdown._jQueryInterface.call((0,_jquery.default)(this),"toggle")}).on(Event.CLICK_DATA_API,Selector.FORM_CHILD,function(e){e.stopPropagation()}),_jquery.default.fn[NAME]=Dropdown._jQueryInterface,_jquery.default.fn[NAME].Constructor=Dropdown,_jquery.default.fn[NAME].noConflict=function(){return _jquery.default.fn[NAME]=JQUERY_NO_CONFLICT,Dropdown._jQueryInterface};var _default=Dropdown;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3Bkb3duLmpzIl0sIm5hbWVzIjpbIl9qcXVlcnkiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wb3BwZXIiLCJfdXRpbCIsIk5BTUUiLCJWRVJTSU9OIiwiREFUQV9LRVkiLCJFVkVOVF9LRVkiLCJjb25jYXQiLCJEQVRBX0FQSV9LRVkiLCJKUVVFUllfTk9fQ09ORkxJQ1QiLCIkIiwiZm4iLCJFU0NBUEVfS0VZQ09ERSIsIlNQQUNFX0tFWUNPREUiLCJUQUJfS0VZQ09ERSIsIkFSUk9XX1VQX0tFWUNPREUiLCJBUlJPV19ET1dOX0tFWUNPREUiLCJSSUdIVF9NT1VTRV9CVVRUT05fV0hJQ0giLCJSRUdFWFBfS0VZRE9XTiIsIlJlZ0V4cCIsIkV2ZW50IiwiSElERSIsIkhJRERFTiIsIlNIT1ciLCJTSE9XTiIsIkNMSUNLIiwiQ0xJQ0tfREFUQV9BUEkiLCJLRVlET1dOX0RBVEFfQVBJIiwiS0VZVVBfREFUQV9BUEkiLCJESVNBQkxFRCIsIkRST1BVUCIsIkRST1BSSUdIVCIsIkRST1BMRUZUIiwiTUVOVVJJR0hUIiwiTUVOVUxFRlQiLCJQT1NJVElPTl9TVEFUSUMiLCJDbGFzc05hbWUiLCJEQVRBX1RPR0dMRSIsIkZPUk1fQ0hJTEQiLCJNRU5VIiwiTkFWQkFSX05BViIsIlZJU0lCTEVfSVRFTVMiLCJkaXNwbGF5IiwiVE9QRU5EIiwiQk9UVE9NIiwiQk9UVE9NRU5EIiwiUklHSFQiLCJSSUdIVEVORCIsIkxFRlQiLCJEcm9wZG93biIsIkRlZmF1bHRUeXBlIiwiY29uZmlnIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIm9mZnNldCIsIl9lbGVtZW50IiwiZWxlbWVudCIsImZsaXAiLCJib3VuZGFyeSIsIl9nZXRDb25maWciLCJyZWZlcmVuY2UiLCJfZ2V0TWVudUVsZW1lbnQiLCJfaW5OYXZiYXIiLCJfZGV0ZWN0TmF2YmFyIiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiZGlzYWJsZWQiLCJkZWZhdWx0IiwiaGFzQ2xhc3MiLCJwYXJlbnQiLCJfZ2V0UGFyZW50RnJvbUVsZW1lbnQiLCJpc0FjdGl2ZSIsIl9tZW51IiwiX2NsZWFyTWVudXMiLCJyZWxhdGVkVGFyZ2V0Iiwic2hvd0V2ZW50IiwidHJpZ2dlciIsImlzRGVmYXVsdFByZXZlbnRlZCIsIlBvcHBlciIsIlR5cGVFcnJvciIsInJlZmVyZW5jZUVsZW1lbnQiLCJfY29uZmlnIiwiVXRpbCIsImlzRWxlbWVudCIsImpxdWVyeSIsIl9nZXRQb3BwZXJDb25maWciLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsb3Nlc3QiLCJTZWxlY3RvciIsImxlbmd0aCIsImNoaWxkcmVuIiwiZm9jdXMiLCJzZXRBdHRyaWJ1dGUiLCJ0b2dnbGVDbGFzcyIsImhpZGVFdmVudCIsInJlbW92ZURhdGEiLCJvZmYiLCJkZXN0cm95Iiwic2NoZWR1bGVVcGRhdGUiLCJfdGhpcyIsIm9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRvZ2dsZSIsIl9vYmplY3RTcHJlYWQiLCJjb25zdHJ1Y3RvciIsIkRlZmF1bHQiLCJkYXRhIiwidHlwZUNoZWNrQ29uZmlnIiwicXVlcnlTZWxlY3RvciIsIiRwYXJlbnREcm9wZG93biIsInBhcmVudE5vZGUiLCJwbGFjZW1lbnQiLCJBdHRhY2htZW50TWFwIiwib2Zmc2V0cyIsIl90aGlzMiIsIm9mZnNldENvbmYiLCJwb3BwZXJDb25maWciLCJfZ2V0UGxhY2VtZW50IiwibW9kaWZpZXJzIiwiZW5hYmxlZCIsInByZXZlbnRPdmVyZmxvdyIsImJvdW5kYXJpZXNFbGVtZW50IiwiYXBwbHlTdHlsZSIsIl90eXBlb2YiLCJlYWNoIiwid2hpY2giLCJ0eXBlIiwiY2FsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuIiwidG9nZ2xlcyIsImNvbnRleHQiLCJjbGlja0V2ZW50IiwiZHJvcGRvd25NZW51IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJib2R5Iiwibm9vcCIsInJlbW92ZUNsYXNzIiwic2VsZWN0b3IiLCJnZXRTZWxlY3RvckZyb21FbGVtZW50IiwidGVzdCIsIml0ZW1zIiwiaW5kZXgiLCJfZGF0YUFwaUtleWRvd25IYW5kbGVyIiwiX2pRdWVyeUludGVyZmFjZSIsImUiLCJDb25zdHJ1Y3RvciIsIm5vQ29uZmxpY3QiXSwibWFwcGluZ3MiOiIyRkFPQSxJQUFBQSxRQUFBQyx1QkFBQUMsUUFBQSxXQUNBQyxRQUFBRix1QkFBQUMsUUFBQSxjQUFBRSxNQUFBSCx1QkFBQUMsUUFBQSw4cUNBU0EsSUFBTUcsS0FBMkIsV0FDM0JDLFFBQTJCLFFBQzNCQyxTQUEyQixjQUMzQkMsVUFBUyxJQUFBQyxPQUFzQkYsVUFDL0JHLGFBQTJCLFlBQzNCQyxtQkFBMkJDLFFBQUFBLFFBQUVDLEdBQUdSLE1BQ2hDUyxlQUEyQixHQUMzQkMsY0FBMkIsR0FDM0JDLFlBQTJCLEVBQzNCQyxpQkFBMkIsR0FmakNDLG1CQUFBLEdBaUJNQyx5QkFBMkIsRUFDM0JDLGVBQTJCLElBQUlDLE9BQUosR0FBQVosT0FBY1EsaUJBQWQsS0FBQVIsT0FBa0NTLG1CQUFsQyxLQUFBVCxPQUF3REssaUJBRW5GUSxNQUFRLENBZGRDLEtBQU1sQixPQUFBQSxPQUFORyxXQUNBZ0IsT0FBTWxCLFNBQUFBLE9BQU5FLFdBQ0FpQixLQUFNbEIsT0FBQUEsT0FBTkMsV0FDQWtCLE1BQU1sQixRQUFBQSxPQUErQkQsV0FDckNvQixNQUFNakIsUUFBQUEsT0FBMkJGLFdBQ2pDb0IsZUFBTWpCLFFBQUFBLE9BQTJCQyxXQUEzQkQsT0FBNkJFLGNBQ25DZ0IsaUJBQW9CLFVBQUFwQixPQUFnQkQsV0FBaEJDLE9BQWdCQyxjQWdCbENvQixlQUFjLFFBQUFyQixPQUFhRCxXQUFiQyxPQUF5QkMsZUFkbkNNLFVBQTJCLENBa0IvQmUsU0FBa0IsV0FqQnBCTixLQUFzQixPQW1CcEJPLE9BQWtCLFNBbEJwQkMsVUFBTWYsWUFvQkpnQixTQUFrQixXQW5CcEJDLFVBQU1oQixzQkFxQkppQixTQUFrQixxQkFwQnBCQyxnQkFBb0IsbUJBSWxCYixTQUFN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U0FBQW5ELGNBQ0EsRUFBQXZDLFFBQUFvRSxTQUFBc0MsR0FBQTdCLFFBQUEsVUFNRSxFQUFBN0UsUUFBQW9FLFNBQUFiLE1BQUFzQixRQUFBLDJDQTdWRixPQUFPdkUsd0NBYlQsT0FBQXVHLDRDQUVFLE9BQUsxRyxzQkF3WUhpSixFQUFBQSxRQUFBQSxTQUFBQSxVQUNEOUMsR0FBQWhGLE1BQUFPLGlCQUFBNkQsU0FBQW5ELFlBQUFZLFNBQUFrRyx3QkFzQkYvQyxHQUFHaEYsTUFBTU8saUJBQWtCNkQsU0FBU2pELEtBQU1VLFNBQVNrRyx3QkFwQmxEL0MsR0FIRThDLEdBQUFBLE9BR0Y5SCxNQUFTTSxlQUhQd0gsS0FBQUEsT0FHa0JsSSxNQUFBQSxnQkFBOEJpSSxTQUFNeEQsYUFBY1csR0FBQWhGLE1BQUFNLGVBQUE4RCxTQUFBbkQsWUFBQSxTQUFBZ0UsR0FDcEU2QyxFQUFBQSxpQkFDRDdDLEVBQUFFLGtCQXVCRHRELFNBQVNtRyxpQkFBaUJuQixNQUFLLEVBQUFuSSxRQUFBb0UsU0FBRWIsTUFBTyxZQXBCdEM2RixHQUFBQSxNQUFBQSxlQUFBMUQsU0FBQWxELFdBQUEsU0FBQStHLEdBQ0RBLEVBQUE5QyxvQkErQkw3RixRQUFBQSxRQUFFQyxHQUFHUixNQUFROEMsU0FBU21HLGlCQUN0QjFJLFFBQUFBLFFBQUVDLEdBQUdSLE1BQU1tSixZQUFjckcsU0FDekJ2QyxRQUFBQSxRQUFFQyxHQUFHUixNQUFNb0osV0FwYVksV0FFcEIsT0FEQzdJLFFBQUFBLFFBQUFDLEdBQUFSLE1BQU93RyxtQkFDUjFELFNBQUFtRywrQkFHUWxHIiwiZmlsZSI6ImRyb3Bkb3duLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4yLjEpOiBkcm9wZG93bi5qc1xuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5J1xuaW1wb3J0IFBvcHBlciBmcm9tICdwb3BwZXIuanMnXG5pbXBvcnQgVXRpbCBmcm9tICcuL3V0aWwnXG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDb25zdGFudHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmNvbnN0IE5BTUUgICAgICAgICAgICAgICAgICAgICA9ICdkcm9wZG93bidcbmNvbnN0IFZFUlNJT04gICAgICAgICAgICAgICAgICA9ICc0LjIuMSdcbmNvbnN0IERBVEFfS0VZICAgICAgICAgICAgICAgICA9ICdicy5kcm9wZG93bidcbmNvbnN0IEVWRU5UX0tFWSAgICAgICAgICAgICAgICA9IGAuJHtEQVRBX0tFWX1gXG5jb25zdCBEQVRBX0FQSV9LRVkgICAgICAgICAgICAgPSAnLmRhdGEtYXBpJ1xuY29uc3QgSlFVRVJZX05PX0NPTkZMSUNUICAgICAgID0gJC5mbltOQU1FXVxuY29uc3QgRVNDQVBFX0tFWUNPREUgICAgICAgICAgID0gMjcgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgRXNjYXBlIChFc2MpIGtleVxuY29uc3QgU1BBQ0VfS0VZQ09ERSAgICAgICAgICAgID0gMzIgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3Igc3BhY2Uga2V5XG5jb25zdCBUQUJfS0VZQ09ERSAgICAgICAgICAgICAgPSA5IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIHRhYiBrZXlcbmNvbnN0IEFSUk9XX1VQX0tFWUNPREUgICAgICAgICA9IDM4IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIHVwIGFycm93IGtleVxuY29uc3QgQVJST1dfRE9XTl9LRVlDT0RFICAgICAgID0gNDAgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgZG93biBhcnJvdyBrZXlcbmNvbnN0IFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCA9IDMgLy8gTW91c2VFdmVudC53aGljaCB2YWx1ZSBmb3IgdGhlIHJpZ2h0IGJ1dHRvbiAoYXNzdW1pbmcgYSByaWdodC1oYW5kZWQgbW91c2UpXG5jb25zdCBSRUdFWFBfS0VZRE9XTiAgICAgICAgICAgPSBuZXcgUmVnRXhwKGAke0FSUk9XX1VQX0tFWUNPREV9fCR7QVJST1dfRE9XTl9LRVlDT0RFfXwke0VTQ0FQRV9LRVlDT0RFfWApXG5cbmNvbnN0IEV2ZW50ID0ge1xuICBISURFICAgICAgICAgICAgIDogYGhpZGUke0VWRU5UX0tFWX1gLFxuICBISURERU4gICAgICAgICAgIDogYGhpZGRlbiR7RVZFTlRfS0VZfWAsXG4gIFNIT1cgICAgICAgICAgICAgOiBgc2hvdyR7RVZFTlRfS0VZfWAsXG4gIFNIT1dOICAgICAgICAgICAgOiBgc2hvd24ke0VWRU5UX0tFWX1gLFxuICBDTElDSyAgICAgICAgICAgIDogYGNsaWNrJHtFVkVOVF9LRVl9YCxcbiAgQ0xJQ0tfREFUQV9BUEkgICA6IGBjbGljayR7RVZFTlRfS0VZfSR7REFUQV9BUElfS0VZfWAsXG4gIEtFWURPV05fREFUQV9BUEkgOiBga2V5ZG93biR7RVZFTlRfS0VZfSR7REFUQV9BUElfS0VZfWAsXG4gIEtFWVVQX0RBVEFfQVBJICAgOiBga2V5dXAke0VWRU5UX0tFWX0ke0RBVEFfQVBJX0tFWX1gXG59XG5cbmNvbnN0IENsYXNzTmFtZSA9IHtcbiAgRElTQUJMRUQgICAgICAgIDogJ2Rpc2FibGVkJyxcbiAgU0hPVyAgICAgICAgICAgIDogJ3Nob3cnLFxuICBEUk9QVVAgICAgICAgICAgOiAnZHJvcHVwJyxcbiAgRFJPUFJJR0hUICAgICAgIDogJ2Ryb3ByaWdodCcsXG4gIERST1BMRUZUICAgICAgICA6ICdkcm9wbGVmdCcsXG4gIE1FTlVSSUdIVCAgICAgICA6ICdkcm9wZG93bi1tZW51LXJpZ2h0JyxcbiAgTUVOVUxFRlQgICAgICAgIDogJ2Ryb3Bkb3duLW1lbnUtbGVmdCcsXG4gIFBPU0lUSU9OX1NUQVRJQyA6ICdwb3NpdGlvbi1zdGF0aWMnXG59XG5cbmNvbnN0IFNlbGVjdG9yID0ge1xuICBEQVRBX1RPR0dMRSAgIDogJ1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxcbiAgRk9STV9DSElMRCAgICA6ICcuZHJvcGRvd24gZm9ybScsXG4gIE1FTlUgICAgICAgICAgOiAnLmRyb3Bkb3duLW1lbnUnLFxuICBOQVZCQVJfTkFWICAgIDogJy5uYXZiYXItbmF2JyxcbiAgVklTSUJMRV9JVEVNUyA6ICcuZHJvcGRvd24tbWVudSAuZHJvcGRvd24taXRlbTpub3QoLmRpc2FibGVkKTpub3QoOmRpc2FibGVkKSdcbn1cblxuY29uc3QgQXR0YWNobWVudE1hcCA9IHtcbiAgVE9QICAgICAgIDogJ3RvcC1zdGFydCcsXG4gIFRPUEVORCAgICA6ICd0b3AtZW5kJyxcbiAgQk9UVE9NICAgIDogJ2JvdHRvbS1zdGFydCcsXG4gIEJPVFRPTUVORCA6ICdib3R0b20tZW5kJyxcbiAgUklHSFQgICAgIDogJ3JpZ2h0LXN0YXJ0JyxcbiAgUklHSFRFTkQgIDogJ3JpZ2h0LWVuZCcsXG4gIExFRlQgICAgICA6ICdsZWZ0LXN0YXJ0JyxcbiAgTEVGVEVORCAgIDogJ2xlZnQtZW5kJ1xufVxuXG5jb25zdCBEZWZhdWx0ID0ge1xuICBvZmZzZXQgICAgOiAwLFxuICBmbGlwICAgICAgOiB0cnVlLFxuICBib3VuZGFyeSAgOiAnc2Nyb2xsUGFyZW50JyxcbiAgcmVmZXJlbmNlIDogJ3RvZ2dsZScsXG4gIGRpc3BsYXkgICA6ICdkeW5hbWljJ1xufVxuXG5jb25zdCBEZWZhdWx0VHlwZSA9IHtcbiAgb2Zmc2V0ICAgIDogJyhudW1iZXJ8c3RyaW5nfGZ1bmN0aW9uKScsXG4gIGZsaXAgICAgICA6ICdib29sZWFuJyxcbiAgYm91bmRhcnkgIDogJyhzdHJpbmd8ZWxlbWVudCknLFxuICByZWZlcmVuY2UgOiAnKHN0cmluZ3xlbGVtZW50KScsXG4gIGRpc3BsYXkgICA6ICdzdHJpbmcnXG59XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDbGFzcyBEZWZpbml0aW9uXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG5jbGFzcyBEcm9wZG93biB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNvbmZpZykge1xuICAgIHRoaXMuX2VsZW1lbnQgID0gZWxlbWVudFxuICAgIHRoaXMuX3BvcHBlciAgID0gbnVsbFxuICAgIHRoaXMuX2NvbmZpZyAgID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZylcbiAgICB0aGlzLl9tZW51ICAgICA9IHRoaXMuX2dldE1lbnVFbGVtZW50KClcbiAgICB0aGlzLl9pbk5hdmJhciA9IHRoaXMuX2RldGVjdE5hdmJhcigpXG5cbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpXG4gIH1cblxuICAvLyBHZXR0ZXJzXG5cbiAgc3RhdGljIGdldCBWRVJTSU9OKCkge1xuICAgIHJldHVybiBWRVJTSU9OXG4gIH1cblxuICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgcmV0dXJuIERlZmF1bHRcbiAgfVxuXG4gIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgcmV0dXJuIERlZmF1bHRUeXBlXG4gIH1cblxuICAvLyBQdWJsaWNcblxuICB0b2dnbGUoKSB7XG4gICAgaWYgKHRoaXMuX2VsZW1lbnQuZGlzYWJsZWQgfHwgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRElTQUJMRUQpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnQgICA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KVxuICAgIGNvbnN0IGlzQWN0aXZlID0gJCh0aGlzLl9tZW51KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVylcblxuICAgIERyb3Bkb3duLl9jbGVhck1lbnVzKClcblxuICAgIGlmIChpc0FjdGl2ZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcmVsYXRlZFRhcmdldCA9IHtcbiAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcbiAgICB9XG4gICAgY29uc3Qgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCByZWxhdGVkVGFyZ2V0KVxuXG4gICAgJChwYXJlbnQpLnRyaWdnZXIoc2hvd0V2ZW50KVxuXG4gICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRGlzYWJsZSB0b3RhbGx5IFBvcHBlci5qcyBmb3IgRHJvcGRvd24gaW4gTmF2YmFyXG4gICAgaWYgKCF0aGlzLl9pbk5hdmJhcikge1xuICAgICAgLyoqXG4gICAgICAgKiBDaGVjayBmb3IgUG9wcGVyIGRlcGVuZGVuY3lcbiAgICAgICAqIFBvcHBlciAtIGh0dHBzOi8vcG9wcGVyLmpzLm9yZ1xuICAgICAgICovXG4gICAgICBpZiAodHlwZW9mIFBvcHBlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9vdHN0cmFwXFwncyBkcm9wZG93bnMgcmVxdWlyZSBQb3BwZXIuanMgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZy8pJylcbiAgICAgIH1cblxuICAgICAgbGV0IHJlZmVyZW5jZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcucmVmZXJlbmNlID09PSAncGFyZW50Jykge1xuICAgICAgICByZWZlcmVuY2VFbGVtZW50ID0gcGFyZW50XG4gICAgICB9IGVsc2UgaWYgKFV0aWwuaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UpKSB7XG4gICAgICAgIHJlZmVyZW5jZUVsZW1lbnQgPSB0aGlzLl9jb25maWcucmVmZXJlbmNlXG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBqUXVlcnkgZWxlbWVudFxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UuanF1ZXJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQgPSB0aGlzLl9jb25maWcucmVmZXJlbmNlWzBdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgYm91bmRhcnkgaXMgbm90IGBzY3JvbGxQYXJlbnRgLCB0aGVuIHNldCBwb3NpdGlvbiB0byBgc3RhdGljYFxuICAgICAgLy8gdG8gYWxsb3cgdGhlIG1lbnUgdG8gXCJlc2NhcGVcIiB0aGUgc2Nyb2xsIHBhcmVudCdzIGJvdW5kYXJpZXNcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9pc3N1ZXMvMjQyNTFcbiAgICAgIGlmICh0aGlzLl9jb25maWcuYm91bmRhcnkgIT09ICdzY3JvbGxQYXJlbnQnKSB7XG4gICAgICAgICQocGFyZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuUE9TSVRJT05fU1RBVElDKVxuICAgICAgfVxuICAgICAgdGhpcy5fcG9wcGVyID0gbmV3IFBvcHBlcihyZWZlcmVuY2VFbGVtZW50LCB0aGlzLl9tZW51LCB0aGlzLl9nZXRQb3BwZXJDb25maWcoKSlcbiAgICB9XG5cbiAgICAvLyBJZiB0aGlzIGlzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2Ugd2UgYWRkIGV4dHJhXG4gICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB0byB0aGUgYm9keSdzIGltbWVkaWF0ZSBjaGlsZHJlbjtcbiAgICAvLyBvbmx5IG5lZWRlZCBiZWNhdXNlIG9mIGJyb2tlbiBldmVudCBkZWxlZ2F0aW9uIG9uIGlPU1xuICAgIC8vIGh0dHBzOi8vd3d3LnF1aXJrc21vZGUub3JnL2Jsb2cvYXJjaGl2ZXMvMjAxNC8wMi9tb3VzZV9ldmVudF9idWIuaHRtbFxuICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiZcbiAgICAgICAgJChwYXJlbnQpLmNsb3Nlc3QoU2VsZWN0b3IuTkFWQkFSX05BVikubGVuZ3RoID09PSAwKSB7XG4gICAgICAkKGRvY3VtZW50LmJvZHkpLmNoaWxkcmVuKCkub24oJ21vdXNlb3ZlcicsIG51bGwsICQubm9vcClcbiAgICB9XG5cbiAgICB0aGlzLl9lbGVtZW50LmZvY3VzKClcbiAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpXG5cbiAgICAkKHRoaXMuX21lbnUpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKVxuICAgICQocGFyZW50KVxuICAgICAgLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKVxuICAgICAgLnRyaWdnZXIoJC5FdmVudChFdmVudC5TSE9XTiwgcmVsYXRlZFRhcmdldCkpXG4gIH1cblxuICBzaG93KCkge1xuICAgIGlmICh0aGlzLl9lbGVtZW50LmRpc2FibGVkIHx8ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSB8fCAkKHRoaXMuX21lbnUpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcmVsYXRlZFRhcmdldCA9IHtcbiAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcbiAgICB9XG4gICAgY29uc3Qgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCByZWxhdGVkVGFyZ2V0KVxuICAgIGNvbnN0IHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KVxuXG4gICAgJChwYXJlbnQpLnRyaWdnZXIoc2hvd0V2ZW50KVxuXG4gICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgJCh0aGlzLl9tZW51KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuU0hPVylcbiAgICAkKHBhcmVudClcbiAgICAgIC50b2dnbGVDbGFzcyhDbGFzc05hbWUuU0hPVylcbiAgICAgIC50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuU0hPV04sIHJlbGF0ZWRUYXJnZXQpKVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBpZiAodGhpcy5fZWxlbWVudC5kaXNhYmxlZCB8fCAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5ESVNBQkxFRCkgfHwgISQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCByZWxhdGVkVGFyZ2V0ID0ge1xuICAgICAgcmVsYXRlZFRhcmdldDogdGhpcy5fZWxlbWVudFxuICAgIH1cbiAgICBjb25zdCBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUsIHJlbGF0ZWRUYXJnZXQpXG4gICAgY29uc3QgcGFyZW50ID0gRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpXG5cbiAgICAkKHBhcmVudCkudHJpZ2dlcihoaWRlRXZlbnQpXG5cbiAgICBpZiAoaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAkKHRoaXMuX21lbnUpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKVxuICAgICQocGFyZW50KVxuICAgICAgLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5TSE9XKVxuICAgICAgLnRyaWdnZXIoJC5FdmVudChFdmVudC5ISURERU4sIHJlbGF0ZWRUYXJnZXQpKVxuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpXG4gICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKVxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsXG4gICAgdGhpcy5fbWVudSA9IG51bGxcbiAgICBpZiAodGhpcy5fcG9wcGVyICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9wb3BwZXIuZGVzdHJveSgpXG4gICAgICB0aGlzLl9wb3BwZXIgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMuX2luTmF2YmFyID0gdGhpcy5fZGV0ZWN0TmF2YmFyKClcbiAgICBpZiAodGhpcy5fcG9wcGVyICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9wb3BwZXIuc2NoZWR1bGVVcGRhdGUoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDSywgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgdGhpcy50b2dnbGUoKVxuICAgIH0pXG4gIH1cblxuICBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IHtcbiAgICAgIC4uLnRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCxcbiAgICAgIC4uLiQodGhpcy5fZWxlbWVudCkuZGF0YSgpLFxuICAgICAgLi4uY29uZmlnXG4gICAgfVxuXG4gICAgVXRpbC50eXBlQ2hlY2tDb25maWcoXG4gICAgICBOQU1FLFxuICAgICAgY29uZmlnLFxuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZVxuICAgIClcblxuICAgIHJldHVybiBjb25maWdcbiAgfVxuXG4gIF9nZXRNZW51RWxlbWVudCgpIHtcbiAgICBpZiAoIXRoaXMuX21lbnUpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KVxuXG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHRoaXMuX21lbnUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihTZWxlY3Rvci5NRU5VKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbWVudVxuICB9XG5cbiAgX2dldFBsYWNlbWVudCgpIHtcbiAgICBjb25zdCAkcGFyZW50RHJvcGRvd24gPSAkKHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSlcbiAgICBsZXQgcGxhY2VtZW50ID0gQXR0YWNobWVudE1hcC5CT1RUT01cblxuICAgIC8vIEhhbmRsZSBkcm9wdXBcbiAgICBpZiAoJHBhcmVudERyb3Bkb3duLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QVVApKSB7XG4gICAgICBwbGFjZW1lbnQgPSBBdHRhY2htZW50TWFwLlRPUFxuICAgICAgaWYgKCQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk1FTlVSSUdIVCkpIHtcbiAgICAgICAgcGxhY2VtZW50ID0gQXR0YWNobWVudE1hcC5UT1BFTkRcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCRwYXJlbnREcm9wZG93bi5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUFJJR0hUKSkge1xuICAgICAgcGxhY2VtZW50ID0gQXR0YWNobWVudE1hcC5SSUdIVFxuICAgIH0gZWxzZSBpZiAoJHBhcmVudERyb3Bkb3duLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QTEVGVCkpIHtcbiAgICAgIHBsYWNlbWVudCA9IEF0dGFjaG1lbnRNYXAuTEVGVFxuICAgIH0gZWxzZSBpZiAoJCh0aGlzLl9tZW51KS5oYXNDbGFzcyhDbGFzc05hbWUuTUVOVVJJR0hUKSkge1xuICAgICAgcGxhY2VtZW50ID0gQXR0YWNobWVudE1hcC5CT1RUT01FTkRcbiAgICB9XG4gICAgcmV0dXJuIHBsYWNlbWVudFxuICB9XG5cbiAgX2RldGVjdE5hdmJhcigpIHtcbiAgICByZXR1cm4gJCh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KCcubmF2YmFyJykubGVuZ3RoID4gMFxuICB9XG5cbiAgX2dldFBvcHBlckNvbmZpZygpIHtcbiAgICBjb25zdCBvZmZzZXRDb25mID0ge31cbiAgICBpZiAodHlwZW9mIHRoaXMuX2NvbmZpZy5vZmZzZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9mZnNldENvbmYuZm4gPSAoZGF0YSkgPT4ge1xuICAgICAgICBkYXRhLm9mZnNldHMgPSB7XG4gICAgICAgICAgLi4uZGF0YS5vZmZzZXRzLFxuICAgICAgICAgIC4uLnRoaXMuX2NvbmZpZy5vZmZzZXQoZGF0YS5vZmZzZXRzKSB8fCB7fVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldENvbmYub2Zmc2V0ID0gdGhpcy5fY29uZmlnLm9mZnNldFxuICAgIH1cblxuICAgIGNvbnN0IHBvcHBlckNvbmZpZyA9IHtcbiAgICAgIHBsYWNlbWVudDogdGhpcy5fZ2V0UGxhY2VtZW50KCksXG4gICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgb2Zmc2V0OiBvZmZzZXRDb25mLFxuICAgICAgICBmbGlwOiB7XG4gICAgICAgICAgZW5hYmxlZDogdGhpcy5fY29uZmlnLmZsaXBcbiAgICAgICAgfSxcbiAgICAgICAgcHJldmVudE92ZXJmbG93OiB7XG4gICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6IHRoaXMuX2NvbmZpZy5ib3VuZGFyeVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGlzYWJsZSBQb3BwZXIuanMgaWYgd2UgaGF2ZSBhIHN0YXRpYyBkaXNwbGF5XG4gICAgaWYgKHRoaXMuX2NvbmZpZy5kaXNwbGF5ID09PSAnc3RhdGljJykge1xuICAgICAgcG9wcGVyQ29uZmlnLm1vZGlmaWVycy5hcHBseVN0eWxlID0ge1xuICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9wcGVyQ29uZmlnXG4gIH1cblxuICAvLyBTdGF0aWNcblxuICBzdGF0aWMgX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKVxuICAgICAgY29uc3QgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnID8gY29uZmlnIDogbnVsbFxuXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgZGF0YSA9IG5ldyBEcm9wZG93bih0aGlzLCBfY29uZmlnKVxuICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgXCIke2NvbmZpZ31cImApXG4gICAgICAgIH1cbiAgICAgICAgZGF0YVtjb25maWddKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIF9jbGVhck1lbnVzKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50ICYmIChldmVudC53aGljaCA9PT0gUklHSFRfTU9VU0VfQlVUVE9OX1dISUNIIHx8XG4gICAgICBldmVudC50eXBlID09PSAna2V5dXAnICYmIGV2ZW50LndoaWNoICE9PSBUQUJfS0VZQ09ERSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHRvZ2dsZXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuREFUQV9UT0dHTEUpKVxuXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRvZ2dsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0b2dnbGVzW2ldKVxuICAgICAgY29uc3QgY29udGV4dCA9ICQodG9nZ2xlc1tpXSkuZGF0YShEQVRBX0tFWSlcbiAgICAgIGNvbnN0IHJlbGF0ZWRUYXJnZXQgPSB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRvZ2dsZXNbaV1cbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldC5jbGlja0V2ZW50ID0gZXZlbnRcbiAgICAgIH1cblxuICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRyb3Bkb3duTWVudSA9IGNvbnRleHQuX21lbnVcbiAgICAgIGlmICghJChwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdjbGljaycgJiZcbiAgICAgICAgICAvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSB8fCBldmVudC50eXBlID09PSAna2V5dXAnICYmIGV2ZW50LndoaWNoID09PSBUQUJfS0VZQ09ERSkgJiZcbiAgICAgICAgICAkLmNvbnRhaW5zKHBhcmVudCwgZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUsIHJlbGF0ZWRUYXJnZXQpXG4gICAgICAkKHBhcmVudCkudHJpZ2dlcihoaWRlRXZlbnQpXG4gICAgICBpZiAoaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoaXMgaXMgYSB0b3VjaC1lbmFibGVkIGRldmljZSB3ZSByZW1vdmUgdGhlIGV4dHJhXG4gICAgICAvLyBlbXB0eSBtb3VzZW92ZXIgbGlzdGVuZXJzIHdlIGFkZGVkIGZvciBpT1Mgc3VwcG9ydFxuICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICAkKGRvY3VtZW50LmJvZHkpLmNoaWxkcmVuKCkub2ZmKCdtb3VzZW92ZXInLCBudWxsLCAkLm5vb3ApXG4gICAgICB9XG5cbiAgICAgIHRvZ2dsZXNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcblxuICAgICAgJChkcm9wZG93bk1lbnUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKVxuICAgICAgJChwYXJlbnQpXG4gICAgICAgIC5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVylcbiAgICAgICAgLnRyaWdnZXIoJC5FdmVudChFdmVudC5ISURERU4sIHJlbGF0ZWRUYXJnZXQpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfZ2V0UGFyZW50RnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgIGxldCBwYXJlbnRcbiAgICBjb25zdCBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KVxuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnQgfHwgZWxlbWVudC5wYXJlbnROb2RlXG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICBzdGF0aWMgX2RhdGFBcGlLZXlkb3duSGFuZGxlcihldmVudCkge1xuICAgIC8vIElmIG5vdCBpbnB1dC90ZXh0YXJlYTpcbiAgICAvLyAgLSBBbmQgbm90IGEga2V5IGluIFJFR0VYUF9LRVlET1dOID0+IG5vdCBhIGRyb3Bkb3duIGNvbW1hbmRcbiAgICAvLyBJZiBpbnB1dC90ZXh0YXJlYTpcbiAgICAvLyAgLSBJZiBzcGFjZSBrZXkgPT4gbm90IGEgZHJvcGRvd24gY29tbWFuZFxuICAgIC8vICAtIElmIGtleSBpcyBvdGhlciB0aGFuIGVzY2FwZVxuICAgIC8vICAgIC0gSWYga2V5IGlzIG5vdCB1cCBvciBkb3duID0+IG5vdCBhIGRyb3Bkb3duIGNvbW1hbmRcbiAgICAvLyAgICAtIElmIHRyaWdnZXIgaW5zaWRlIHRoZSBtZW51ID0+IG5vdCBhIGRyb3Bkb3duIGNvbW1hbmRcbiAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSlcbiAgICAgID8gZXZlbnQud2hpY2ggPT09IFNQQUNFX0tFWUNPREUgfHwgZXZlbnQud2hpY2ggIT09IEVTQ0FQRV9LRVlDT0RFICYmXG4gICAgICAoZXZlbnQud2hpY2ggIT09IEFSUk9XX0RPV05fS0VZQ09ERSAmJiBldmVudC53aGljaCAhPT0gQVJST1dfVVBfS0VZQ09ERSB8fFxuICAgICAgICAkKGV2ZW50LnRhcmdldCkuY2xvc2VzdChTZWxlY3Rvci5NRU5VKS5sZW5ndGgpIDogIVJFR0VYUF9LRVlET1dOLnRlc3QoZXZlbnQud2hpY2gpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICQodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcGFyZW50ICAgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcylcbiAgICBjb25zdCBpc0FjdGl2ZSA9ICQocGFyZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVylcblxuICAgIGlmICghaXNBY3RpdmUgfHwgaXNBY3RpdmUgJiYgKGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSB8fCBldmVudC53aGljaCA9PT0gU1BBQ0VfS0VZQ09ERSkpIHtcbiAgICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcbiAgICAgICAgY29uc3QgdG9nZ2xlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IuREFUQV9UT0dHTEUpXG4gICAgICAgICQodG9nZ2xlKS50cmlnZ2VyKCdmb2N1cycpXG4gICAgICB9XG5cbiAgICAgICQodGhpcykudHJpZ2dlcignY2xpY2snKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgaXRlbXMgPSBbXS5zbGljZS5jYWxsKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLlZJU0lCTEVfSVRFTVMpKVxuXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IGluZGV4ID0gaXRlbXMuaW5kZXhPZihldmVudC50YXJnZXQpXG5cbiAgICBpZiAoZXZlbnQud2hpY2ggPT09IEFSUk9XX1VQX0tFWUNPREUgJiYgaW5kZXggPiAwKSB7IC8vIFVwXG4gICAgICBpbmRleC0tXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LndoaWNoID09PSBBUlJPV19ET1dOX0tFWUNPREUgJiYgaW5kZXggPCBpdGVtcy5sZW5ndGggLSAxKSB7IC8vIERvd25cbiAgICAgIGluZGV4KytcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICBpbmRleCA9IDBcbiAgICB9XG5cbiAgICBpdGVtc1tpbmRleF0uZm9jdXMoKVxuICB9XG59XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuJChkb2N1bWVudClcbiAgLm9uKEV2ZW50LktFWURPV05fREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKVxuICAub24oRXZlbnQuS0VZRE9XTl9EQVRBX0FQSSwgU2VsZWN0b3IuTUVOVSwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcilcbiAgLm9uKGAke0V2ZW50LkNMSUNLX0RBVEFfQVBJfSAke0V2ZW50LktFWVVQX0RBVEFfQVBJfWAsIERyb3Bkb3duLl9jbGVhck1lbnVzKVxuICAub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0aGlzKSwgJ3RvZ2dsZScpXG4gIH0pXG4gIC5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRk9STV9DSElMRCwgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0pXG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBqUXVlcnlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbiQuZm5bTkFNRV0gPSBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlXG4kLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gRHJvcGRvd25cbiQuZm5bTkFNRV0ubm9Db25mbGljdCA9ICgpID0+IHtcbiAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVFxuICByZXR1cm4gRHJvcGRvd24uX2pRdWVyeUludGVyZmFjZVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IERyb3Bkb3duXG4iXX0=
