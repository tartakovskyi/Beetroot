"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery")),_popper=_interopRequireDefault(require("popper.js")),_util=_interopRequireDefault(require("./util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var NAME="tooltip",VERSION="4.2.1",DATA_KEY="bs.tooltip",EVENT_KEY=".".concat(DATA_KEY),JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],CLASS_PREFIX="bs-tooltip",BSCLS_PREFIX_REGEX=new RegExp("(^|\\s)".concat(CLASS_PREFIX,"\\S+"),"g"),DefaultType={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Default={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},HoverState={SHOW:"show",OUT:"out"},Event={HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),INSERTED:"inserted".concat(EVENT_KEY),CLICK:"click".concat(EVENT_KEY),FOCUSIN:"focusin".concat(EVENT_KEY),FOCUSOUT:"focusout".concat(EVENT_KEY),MOUSEENTER:"mouseenter".concat(EVENT_KEY),MOUSELEAVE:"mouseleave".concat(EVENT_KEY)},ClassName={FADE:"fade",SHOW:"show"},Selector={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},Trigger={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},Tooltip=function(){function i(e,t){if(_classCallCheck(this,i),void 0===_popper.default)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}return _createClass(i,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,n=(0,_jquery.default)(e.currentTarget).data(t);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),(0,_jquery.default)(e.currentTarget).data(t,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if((0,_jquery.default)(this.getTipElement()).hasClass(ClassName.SHOW))return void this._leave(null,this);this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout),_jquery.default.removeData(this.element,this.constructor.DATA_KEY),(0,_jquery.default)(this.element).off(this.constructor.EVENT_KEY),(0,_jquery.default)(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&(0,_jquery.default)(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var t=this;if("none"===(0,_jquery.default)(this.element).css("display"))throw new Error("Please use show on visible elements");var e=_jquery.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){(0,_jquery.default)(this.element).trigger(e);var n=_util.default.findShadowRoot(this.element),i=_jquery.default.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!i)return;var r=this.getTipElement(),o=_util.default.getUID(this.constructor.NAME);r.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&(0,_jquery.default)(r).addClass(ClassName.FADE);var a="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,l=this._getAttachment(a);this.addAttachmentClass(l);var u=this._getContainer();(0,_jquery.default)(r).data(this.constructor.DATA_KEY,this),_jquery.default.contains(this.element.ownerDocument.documentElement,this.tip)||(0,_jquery.default)(r).appendTo(u),(0,_jquery.default)(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new _popper.default(this.element,r,{placement:l,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:Selector.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}}),(0,_jquery.default)(r).addClass(ClassName.SHOW),"ontouchstart"in document.documentElement&&(0,_jquery.default)(document.body).children().on("mouseover",null,_jquery.default.noop);var s=function(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,(0,_jquery.default)(t.element).trigger(t.constructor.Event.SHOWN),e===HoverState.OUT&&t._leave(null,t)};if((0,_jquery.default)(this.tip).hasClass(ClassName.FADE)){var c=_util.default.getTransitionDurationFromElement(this.tip);(0,_jquery.default)(this.tip).one(_util.default.TRANSITION_END,s).emulateTransitionEnd(c)}else s()}}},{key:"hide",value:function(e){var t=this,n=this.getTipElement(),i=_jquery.default.Event(this.constructor.Event.HIDE),r=function(){t._hoverState!==HoverState.SHOW&&n.parentNode&&n.parentNode.removeChild(n),t._cleanTipClass(),t.element.removeAttribute("aria-describedby"),(0,_jquery.default)(t.element).trigger(t.constructor.Event.HIDDEN),null!==t._popper&&t._popper.destroy(),e&&e()};if((0,_jquery.default)(this.element).trigger(i),!i.isDefaultPrevented()){if((0,_jquery.default)(n).removeClass(ClassName.SHOW),"ontouchstart"in document.documentElement&&(0,_jquery.default)(document.body).children().off("mouseover",null,_jquery.default.noop),this._activeTrigger[Trigger.CLICK]=!1,this._activeTrigger[Trigger.FOCUS]=!1,this._activeTrigger[Trigger.HOVER]=!1,(0,_jquery.default)(this.tip).hasClass(ClassName.FADE)){var o=_util.default.getTransitionDurationFromElement(n);(0,_jquery.default)(n).one(_util.default.TRANSITION_END,r).emulateTransitionEnd(o)}else r();this._hoverState=""}}},{key:"update",value:function(){null!==this._popper&&this._popper.scheduleUpdate()}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"addAttachmentClass",value:function(e){(0,_jquery.default)(this.getTipElement()).addClass("".concat(CLASS_PREFIX,"-").concat(e))}},{key:"getTipElement",value:function(){return this.tip=this.tip||(0,_jquery.default)(this.config.template)[0],this.tip}},{key:"setContent",value:function(){var e=this.getTipElement();this.setElementContent((0,_jquery.default)(e.querySelectorAll(Selector.TOOLTIP_INNER)),this.getTitle()),(0,_jquery.default)(e).removeClass("".concat(ClassName.FADE," ").concat(ClassName.SHOW))}},{key:"setElementContent",value:function(e,t){var n=this.config.html;"object"===_typeof(t)&&(t.nodeType||t.jquery)?n?(0,_jquery.default)(t).parent().is(e)||e.empty().append(t):e.text((0,_jquery.default)(t).text()):e[n?"html":"text"](t)}},{key:"getTitle",value:function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e}},{key:"_getContainer",value:function(){return!1===this.config.container?document.body:_util.default.isElement(this.config.container)?(0,_jquery.default)(this.config.container):(0,_jquery.default)(document).find(this.config.container)}},{key:"_getAttachment",value:function(e){return AttachmentMap[e.toUpperCase()]}},{key:"_setListeners",value:function(){var i=this;this.config.trigger.split(" ").forEach(function(e){if("click"===e)(0,_jquery.default)(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(e){return i.toggle(e)});else if(e!==Trigger.MANUAL){var t=e===Trigger.HOVER?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=e===Trigger.HOVER?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;(0,_jquery.default)(i.element).on(t,i.config.selector,function(e){return i._enter(e)}).on(n,i.config.selector,function(e){return i._leave(e)})}}),(0,_jquery.default)(this.element).closest(".modal").on("hide.bs.modal",function(){i.element&&i.hide()}),this.config.selector?this.config=_objectSpread({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var e=_typeof(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(e,t){var n=this.constructor.DATA_KEY;(t=t||(0,_jquery.default)(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),(0,_jquery.default)(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusin"===e.type?Trigger.FOCUS:Trigger.HOVER]=!0),(0,_jquery.default)(t.getTipElement()).hasClass(ClassName.SHOW)||t._hoverState===HoverState.SHOW?t._hoverState=HoverState.SHOW:(clearTimeout(t._timeout),t._hoverState=HoverState.SHOW,t.config.delay&&t.config.delay.show?t._timeout=setTimeout(function(){t._hoverState===HoverState.SHOW&&t.show()},t.config.delay.show):t.show())}},{key:"_leave",value:function(e,t){var n=this.constructor.DATA_KEY;(t=t||(0,_jquery.default)(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),(0,_jquery.default)(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusout"===e.type?Trigger.FOCUS:Trigger.HOVER]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=HoverState.OUT,t.config.delay&&t.config.delay.hide?t._timeout=setTimeout(function(){t._hoverState===HoverState.OUT&&t.hide()},t.config.delay.hide):t.hide())}},{key:"_isWithActiveTrigger",value:function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}},{key:"_getConfig",value:function(e){return"number"==typeof(e=_objectSpread({},this.constructor.Default,(0,_jquery.default)(this.element).data(),"object"===_typeof(e)&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),_util.default.typeCheckConfig(NAME,e,this.constructor.DefaultType),e}},{key:"_getDelegateConfig",value:function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e}},{key:"_cleanTipClass",value:function(){var e=(0,_jquery.default)(this.getTipElement()),t=e.attr("class").match(BSCLS_PREFIX_REGEX);null!==t&&t.length&&e.removeClass(t.join(""))}},{key:"_handlePopperPlacementChange",value:function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))}},{key:"_fixTransition",value:function(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&((0,_jquery.default)(e).removeClass(ClassName.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var e=(0,_jquery.default)(this).data(DATA_KEY),t="object"===_typeof(n)&&n;if((e||!/dispose|hide/.test(n))&&(e||(e=new i(this,t),(0,_jquery.default)(this).data(DATA_KEY,e)),"string"==typeof n)){if(void 0===e[n])throw new TypeError('No method named "'.concat(n,'"'));e[n]()}})}},{key:"VERSION",get:function(){return VERSION}},{key:"Default",get:function(){return Default}},{key:"NAME",get:function(){return NAME}},{key:"DATA_KEY",get:function(){return DATA_KEY}},{key:"Event",get:function(){return Event}},{key:"EVENT_KEY",get:function(){return EVENT_KEY}},{key:"DefaultType",get:function(){return DefaultType}}]),i}();_jquery.default.fn[NAME]=Tooltip._jQueryInterface,_jquery.default.fn[NAME].Constructor=Tooltip,_jquery.default.fn[NAME].noConflict=function(){return _jquery.default.fn[NAME]=JQUERY_NO_CONFLICT,Tooltip._jQueryInterface};var _default=Tooltip;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvb2x0aXAuanMiXSwibmFtZXMiOlsiX2pxdWVyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3BvcHBlciIsIl91dGlsIiwiTkFNRSIsIlZFUlNJT04iLCJEQVRBX0tFWSIsIkVWRU5UX0tFWSIsImNvbmNhdCIsIkpRVUVSWV9OT19DT05GTElDVCIsIiQiLCJmbiIsIkNMQVNTX1BSRUZJWCIsIkJTQ0xTX1BSRUZJWF9SRUdFWCIsIlJlZ0V4cCIsIkRlZmF1bHRUeXBlIiwiYW5pbWF0aW9uIiwidGVtcGxhdGUiLCJ0aXRsZSIsInRyaWdnZXIiLCJkZWxheSIsImh0bWwiLCJzZWxlY3RvciIsInBsYWNlbWVudCIsIm9mZnNldCIsImNvbnRhaW5lciIsImZhbGxiYWNrUGxhY2VtZW50IiwiYm91bmRhcnkiLCJBVVRPIiwiVE9QIiwiUklHSFQiLCJCT1RUT00iLCJMRUZUIiwiU0hPVyIsIlNIT1dOIiwiSG92ZXJTdGF0ZSIsIk9VVCIsIkZPQ1VTSU4iLCJGT0NVU09VVCIsIkhJREUiLCJISURERU4iLCJJTlNFUlRFRCIsIkNMSUNLIiwiTU9VU0VMRUFWRSIsIlRPT0xUSVAiLCJUT09MVElQX0lOTkVSIiwiRkFERSIsIlNlbGVjdG9yIiwiQVJST1ciLCJNQU5VQUwiLCJUb29sdGlwIiwiZWxlbWVudCIsImNvbmZpZyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJQb3BwZXIiLCJUeXBlRXJyb3IiLCJfaXNFbmFibGVkIiwiX3RpbWVvdXQiLCJfaG92ZXJTdGF0ZSIsIl9hY3RpdmVUcmlnZ2VyIiwiX2dldENvbmZpZyIsImV2ZW50IiwiY29udGV4dCIsIl9sZWF2ZSIsImRhdGFLZXkiLCJjb25zdHJ1Y3RvciIsImRlZmF1bHQiLCJjdXJyZW50VGFyZ2V0IiwiZGF0YSIsIl9lbnRlciIsIl9nZXREZWxlZ2F0ZUNvbmZpZyIsImNsaWNrIiwiX2lzV2l0aEFjdGl2ZVRyaWdnZXIiLCJnZXRUaXBFbGVtZW50IiwiaGFzQ2xhc3MiLCJDbGFzc05hbWUiLCJjbGVhclRpbWVvdXQiLCJyZW1vdmVEYXRhIiwidGlwIiwib2ZmIiwiY2xvc2VzdCIsInJlbW92ZSIsInNob3dFdmVudCIsImRlc3Ryb3kiLCJzaGFkb3dSb290IiwiaXNJblRoZURvbSIsIl90aGlzIiwiY3NzIiwiRXJyb3IiLCJVdGlsIiwiZ2V0VUlEIiwiaXNXaXRoQ29udGVudCIsInNldEF0dHJpYnV0ZSIsImZpbmRTaGFkb3dSb290IiwiY29udGFpbnMiLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiYWRkQXR0YWNobWVudENsYXNzIiwidGlwSWQiLCJzZXRDb250ZW50IiwiYWRkQ2xhc3MiLCJtb2RpZmllcnMiLCJjYWxsIiwiYXR0YWNobWVudCIsIl9nZXRBdHRhY2htZW50IiwiZmxpcCIsIl9nZXRDb250YWluZXIiLCJhcnJvdyIsInByZXZlbnRPdmVyZmxvdyIsIkV2ZW50Iiwib3JpZ2luYWxQbGFjZW1lbnQiLCJvblVwZGF0ZSIsImJlaGF2aW9yIiwiYm91bmRhcmllc0VsZW1lbnQiLCJkb2N1bWVudCIsIm9uQ3JlYXRlIiwiY29tcGxldGUiLCJfaGFuZGxlUG9wcGVyUGxhY2VtZW50Q2hhbmdlIiwiYm9keSIsImNoaWxkcmVuIiwib24iLCJwcmV2SG92ZXJTdGF0ZSIsImdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50IiwicGFyZW50Tm9kZSIsIm9uZSIsIlRSQU5TSVRJT05fRU5EIiwiZW11bGF0ZVRyYW5zaXRpb25FbmQiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJjYWxsYmFjayIsIl90aGlzMiIsImhpZGVFdmVudCIsInJlbW92ZUNoaWxkIiwiX2NsZWFuVGlwQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJyZW1vdmVDbGFzcyIsIm5vb3AiLCJUcmlnZ2VyIiwiRk9DVVMiLCJIT1ZFUiIsInNjaGVkdWxlVXBkYXRlIiwiQm9vbGVhbiIsImdldFRpdGxlIiwic2V0RWxlbWVudENvbnRlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29udGVudCIsImlzIiwiJGVsZW1lbnQiLCJ0ZXh0IiwiX3R5cGVvZiIsIm5vZGVUeXBlIiwianF1ZXJ5IiwicGFyZW50IiwiZW1wdHkiLCJhcHBlbmQiLCJnZXRBdHRyaWJ1dGUiLCJBdHRhY2htZW50TWFwIiwiZmluZCIsInRyaWdnZXJzIiwiX3RoaXMzIiwic3BsaXQiLCJmb3JFYWNoIiwiZXZlbnRPdXQiLCJldmVudEluIiwiaGlkZSIsIl9vYmplY3RTcHJlYWQiLCJ0aXRsZVR5cGUiLCJzaG93IiwidHlwZSIsInNldFRpbWVvdXQiLCJEZWZhdWx0IiwidG9TdHJpbmciLCJ0eXBlQ2hlY2tDb25maWciLCJ0YWJDbGFzcyIsIiR0aXAiLCJwb3BwZXJJbnN0YW5jZSIsInBvcHBlckRhdGEiLCJrZXkiLCJpbml0Q29uZmlnQW5pbWF0aW9uIiwiYXR0ciIsIm1hdGNoIiwibGVuZ3RoIiwiam9pbiIsImluc3RhbmNlIiwicG9wcGVyIiwiX2NvbmZpZyIsInRlc3QiLCJfalF1ZXJ5SW50ZXJmYWNlIiwiQ29uc3RydWN0b3IiLCJub0NvbmZsaWN0Il0sIm1hcHBpbmdzIjoiMkZBT0EsSUFBQUEsUUFBQUMsdUJBQUFDLFFBQUEsV0FDQUMsUUFBQUYsdUJBQUFDLFFBQUEsY0FBQUUsTUFBQUgsdUJBQUFDLFFBQUEsOHFDQVNBLElBQU1HLEtBQXFCLFVBQ3JCQyxRQUFxQixRQUNyQkMsU0FBcUIsYUFDckJDLFVBQVMsSUFBQUMsT0FBZ0JGLFVBQ3pCRyxtQkFBcUJDLFFBQUFBLFFBQUVDLEdBQUdQLE1BQzFCUSxhQUFxQixhQUNyQkMsbUJBQXFCLElBQUlDLE9BQUosVUFBQU4sT0FBcUJJLGFBQXJCLFFBQXlDLEtBRTlERyxZQUFjLENBQ2xCQyxVQUFvQixVQWZ0QkMsU0FBQSxTQWlCRUMsTUFBb0IsNEJBQ3BCQyxRQUFvQixTQUNwQkMsTUFBb0Isa0JBQ3BCQyxLQUFvQixVQWR0QkMsU0FBQSxtQkFDQUMsVUFBQSxvQkFDQUMsT0FBMkIsa0JBQzNCQyxVQUFlLDJCQUNmQyxrQkFBd0Is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RUFFOUMsSUFBS2lCLElBQVEsZUEzaUJLc0gsS0FBQXZJLE1BK2lCYmlCLElBQ0hBLEVBQU8sSUFBSW5CLEVBNWlCRUksS0FBQW9JLElBQ2pCLEVBQUEzTCxRQUFBb0UsU0FBQWIsTUFBT3dELEtBQVB4RyxTQUFBK0QsSUEraUJ3QixpQkFBWGpCLEdBQXFCLENBQzlCLFFBN2lCaUIsSUE2aUJOaUIsRUE3aUJNakIsR0FDckIsTUFBTzdDLElBQUFBLFVBQUFBLG9CQUFBQSxPQUFQNkMsRUFBTzdDLE1BK2lCSDhELEVBQUtqQix3Q0Fua0JULE9BQU8vQyx3Q0FJUCxPQUFPc0sscUNBSVAsT0FBT3ZLLHNDQUlQLE9BQU9FLHVDQUlQLE9BQU93Ryx3Q0F1QlIsT0FBQXZHLDhDQUdDLE9BQUtRLHFCQXFpQlRMLFFBQUFBLFFBQUVDLEdBQUdQLE1BQVE4QyxRQUFRMEksaUJBQ3JCbEwsUUFBQUEsUUFBRUMsR0FBR1AsTUFBTXlMLFlBQWMzSSxRQUN6QnhDLFFBQUFBLFFBQUVDLEdBQUdQLE1BQU0wTCxXQUFhLFdBRnhCcEwsT0FHRUEsUUFBQUEsUUFBRUMsR0FBR1AsTUFBUUssbUJBSGZDLFFBQUVDLCtCQUVGRCIsImZpbGUiOiJ0b29sdGlwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4yLjEpOiB0b29sdGlwLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknXG5pbXBvcnQgUG9wcGVyIGZyb20gJ3BvcHBlci5qcydcbmltcG9ydCBVdGlsIGZyb20gJy4vdXRpbCdcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIENvbnN0YW50c1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuY29uc3QgTkFNRSAgICAgICAgICAgICAgID0gJ3Rvb2x0aXAnXG5jb25zdCBWRVJTSU9OICAgICAgICAgICAgPSAnNC4yLjEnXG5jb25zdCBEQVRBX0tFWSAgICAgICAgICAgPSAnYnMudG9vbHRpcCdcbmNvbnN0IEVWRU5UX0tFWSAgICAgICAgICA9IGAuJHtEQVRBX0tFWX1gXG5jb25zdCBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdXG5jb25zdCBDTEFTU19QUkVGSVggICAgICAgPSAnYnMtdG9vbHRpcCdcbmNvbnN0IEJTQ0xTX1BSRUZJWF9SRUdFWCA9IG5ldyBSZWdFeHAoYChefFxcXFxzKSR7Q0xBU1NfUFJFRklYfVxcXFxTK2AsICdnJylcblxuY29uc3QgRGVmYXVsdFR5cGUgPSB7XG4gIGFuaW1hdGlvbiAgICAgICAgIDogJ2Jvb2xlYW4nLFxuICB0ZW1wbGF0ZSAgICAgICAgICA6ICdzdHJpbmcnLFxuICB0aXRsZSAgICAgICAgICAgICA6ICcoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJyxcbiAgdHJpZ2dlciAgICAgICAgICAgOiAnc3RyaW5nJyxcbiAgZGVsYXkgICAgICAgICAgICAgOiAnKG51bWJlcnxvYmplY3QpJyxcbiAgaHRtbCAgICAgICAgICAgICAgOiAnYm9vbGVhbicsXG4gIHNlbGVjdG9yICAgICAgICAgIDogJyhzdHJpbmd8Ym9vbGVhbiknLFxuICBwbGFjZW1lbnQgICAgICAgICA6ICcoc3RyaW5nfGZ1bmN0aW9uKScsXG4gIG9mZnNldCAgICAgICAgICAgIDogJyhudW1iZXJ8c3RyaW5nKScsXG4gIGNvbnRhaW5lciAgICAgICAgIDogJyhzdHJpbmd8ZWxlbWVudHxib29sZWFuKScsXG4gIGZhbGxiYWNrUGxhY2VtZW50IDogJyhzdHJpbmd8YXJyYXkpJyxcbiAgYm91bmRhcnkgICAgICAgICAgOiAnKHN0cmluZ3xlbGVtZW50KSdcbn1cblxuY29uc3QgQXR0YWNobWVudE1hcCA9IHtcbiAgQVVUTyAgIDogJ2F1dG8nLFxuICBUT1AgICAgOiAndG9wJyxcbiAgUklHSFQgIDogJ3JpZ2h0JyxcbiAgQk9UVE9NIDogJ2JvdHRvbScsXG4gIExFRlQgICA6ICdsZWZ0J1xufVxuXG5jb25zdCBEZWZhdWx0ID0ge1xuICBhbmltYXRpb24gICAgICAgICA6IHRydWUsXG4gIHRlbXBsYXRlICAgICAgICAgIDogJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIj48L2Rpdj48L2Rpdj4nLFxuICB0cmlnZ2VyICAgICAgICAgICA6ICdob3ZlciBmb2N1cycsXG4gIHRpdGxlICAgICAgICAgICAgIDogJycsXG4gIGRlbGF5ICAgICAgICAgICAgIDogMCxcbiAgaHRtbCAgICAgICAgICAgICAgOiBmYWxzZSxcbiAgc2VsZWN0b3IgICAgICAgICAgOiBmYWxzZSxcbiAgcGxhY2VtZW50ICAgICAgICAgOiAndG9wJyxcbiAgb2Zmc2V0ICAgICAgICAgICAgOiAwLFxuICBjb250YWluZXIgICAgICAgICA6IGZhbHNlLFxuICBmYWxsYmFja1BsYWNlbWVudCA6ICdmbGlwJyxcbiAgYm91bmRhcnkgICAgICAgICAgOiAnc2Nyb2xsUGFyZW50J1xufVxuXG5jb25zdCBIb3ZlclN0YXRlID0ge1xuICBTSE9XIDogJ3Nob3cnLFxuICBPVVQgIDogJ291dCdcbn1cblxuY29uc3QgRXZlbnQgPSB7XG4gIEhJREUgICAgICAgOiBgaGlkZSR7RVZFTlRfS0VZfWAsXG4gIEhJRERFTiAgICAgOiBgaGlkZGVuJHtFVkVOVF9LRVl9YCxcbiAgU0hPVyAgICAgICA6IGBzaG93JHtFVkVOVF9LRVl9YCxcbiAgU0hPV04gICAgICA6IGBzaG93biR7RVZFTlRfS0VZfWAsXG4gIElOU0VSVEVEICAgOiBgaW5zZXJ0ZWQke0VWRU5UX0tFWX1gLFxuICBDTElDSyAgICAgIDogYGNsaWNrJHtFVkVOVF9LRVl9YCxcbiAgRk9DVVNJTiAgICA6IGBmb2N1c2luJHtFVkVOVF9LRVl9YCxcbiAgRk9DVVNPVVQgICA6IGBmb2N1c291dCR7RVZFTlRfS0VZfWAsXG4gIE1PVVNFRU5URVIgOiBgbW91c2VlbnRlciR7RVZFTlRfS0VZfWAsXG4gIE1PVVNFTEVBVkUgOiBgbW91c2VsZWF2ZSR7RVZFTlRfS0VZfWBcbn1cblxuY29uc3QgQ2xhc3NOYW1lID0ge1xuICBGQURFIDogJ2ZhZGUnLFxuICBTSE9XIDogJ3Nob3cnXG59XG5cbmNvbnN0IFNlbGVjdG9yID0ge1xuICBUT09MVElQICAgICAgIDogJy50b29sdGlwJyxcbiAgVE9PTFRJUF9JTk5FUiA6ICcudG9vbHRpcC1pbm5lcicsXG4gIEFSUk9XICAgICAgICAgOiAnLmFycm93J1xufVxuXG5jb25zdCBUcmlnZ2VyID0ge1xuICBIT1ZFUiAgOiAnaG92ZXInLFxuICBGT0NVUyAgOiAnZm9jdXMnLFxuICBDTElDSyAgOiAnY2xpY2snLFxuICBNQU5VQUwgOiAnbWFudWFsJ1xufVxuXG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDbGFzcyBEZWZpbml0aW9uXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG5jbGFzcyBUb29sdGlwIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIFBvcHBlciBkZXBlbmRlbmN5XG4gICAgICogUG9wcGVyIC0gaHR0cHM6Ly9wb3BwZXIuanMub3JnXG4gICAgICovXG4gICAgaWYgKHR5cGVvZiBQb3BwZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb290c3RyYXBcXCdzIHRvb2x0aXBzIHJlcXVpcmUgUG9wcGVyLmpzIChodHRwczovL3BvcHBlci5qcy5vcmcvKScpXG4gICAgfVxuXG4gICAgLy8gcHJpdmF0ZVxuICAgIHRoaXMuX2lzRW5hYmxlZCAgICAgPSB0cnVlXG4gICAgdGhpcy5fdGltZW91dCAgICAgICA9IDBcbiAgICB0aGlzLl9ob3ZlclN0YXRlICAgID0gJydcbiAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0ge31cbiAgICB0aGlzLl9wb3BwZXIgICAgICAgID0gbnVsbFxuXG4gICAgLy8gUHJvdGVjdGVkXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxuICAgIHRoaXMuY29uZmlnICA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpXG4gICAgdGhpcy50aXAgICAgID0gbnVsbFxuXG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKClcbiAgfVxuXG4gIC8vIEdldHRlcnNcblxuICBzdGF0aWMgZ2V0IFZFUlNJT04oKSB7XG4gICAgcmV0dXJuIFZFUlNJT05cbiAgfVxuXG4gIHN0YXRpYyBnZXQgRGVmYXVsdCgpIHtcbiAgICByZXR1cm4gRGVmYXVsdFxuICB9XG5cbiAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgIHJldHVybiBOQU1FXG4gIH1cblxuICBzdGF0aWMgZ2V0IERBVEFfS0VZKCkge1xuICAgIHJldHVybiBEQVRBX0tFWVxuICB9XG5cbiAgc3RhdGljIGdldCBFdmVudCgpIHtcbiAgICByZXR1cm4gRXZlbnRcbiAgfVxuXG4gIHN0YXRpYyBnZXQgRVZFTlRfS0VZKCkge1xuICAgIHJldHVybiBFVkVOVF9LRVlcbiAgfVxuXG4gIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgcmV0dXJuIERlZmF1bHRUeXBlXG4gIH1cblxuICAvLyBQdWJsaWNcblxuICBlbmFibGUoKSB7XG4gICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZVxuICB9XG5cbiAgZGlzYWJsZSgpIHtcbiAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZVxuICB9XG5cbiAgdG9nZ2xlRW5hYmxlZCgpIHtcbiAgICB0aGlzLl9pc0VuYWJsZWQgPSAhdGhpcy5faXNFbmFibGVkXG4gIH1cblxuICB0b2dnbGUoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBjb25zdCBkYXRhS2V5ID0gdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWVxuICAgICAgbGV0IGNvbnRleHQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSlcblxuICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgICAgIHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKClcbiAgICAgICAgKVxuICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dClcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlci5jbGljayA9ICFjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrXG5cbiAgICAgIGlmIChjb250ZXh0Ll9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkpIHtcbiAgICAgICAgY29udGV4dC5fZW50ZXIobnVsbCwgY29udGV4dClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRleHQuX2xlYXZlKG51bGwsIGNvbnRleHQpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpIHtcbiAgICAgICAgdGhpcy5fbGVhdmUobnVsbCwgdGhpcylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2VudGVyKG51bGwsIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dClcblxuICAgICQucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVkpXG5cbiAgICAkKHRoaXMuZWxlbWVudCkub2ZmKHRoaXMuY29uc3RydWN0b3IuRVZFTlRfS0VZKVxuICAgICQodGhpcy5lbGVtZW50KS5jbG9zZXN0KCcubW9kYWwnKS5vZmYoJ2hpZGUuYnMubW9kYWwnKVxuXG4gICAgaWYgKHRoaXMudGlwKSB7XG4gICAgICAkKHRoaXMudGlwKS5yZW1vdmUoKVxuICAgIH1cblxuICAgIHRoaXMuX2lzRW5hYmxlZCAgICAgPSBudWxsXG4gICAgdGhpcy5fdGltZW91dCAgICAgICA9IG51bGxcbiAgICB0aGlzLl9ob3ZlclN0YXRlICAgID0gbnVsbFxuICAgIHRoaXMuX2FjdGl2ZVRyaWdnZXIgPSBudWxsXG4gICAgaWYgKHRoaXMuX3BvcHBlciAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKVxuICAgIH1cblxuICAgIHRoaXMuX3BvcHBlciA9IG51bGxcbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsXG4gICAgdGhpcy5jb25maWcgID0gbnVsbFxuICAgIHRoaXMudGlwICAgICA9IG51bGxcbiAgfVxuXG4gIHNob3coKSB7XG4gICAgaWYgKCQodGhpcy5lbGVtZW50KS5jc3MoJ2Rpc3BsYXknKSA9PT0gJ25vbmUnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSB1c2Ugc2hvdyBvbiB2aXNpYmxlIGVsZW1lbnRzJylcbiAgICB9XG5cbiAgICBjb25zdCBzaG93RXZlbnQgPSAkLkV2ZW50KHRoaXMuY29uc3RydWN0b3IuRXZlbnQuU0hPVylcbiAgICBpZiAodGhpcy5pc1dpdGhDb250ZW50KCkgJiYgdGhpcy5faXNFbmFibGVkKSB7XG4gICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpXG5cbiAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSBVdGlsLmZpbmRTaGFkb3dSb290KHRoaXMuZWxlbWVudClcbiAgICAgIGNvbnN0IGlzSW5UaGVEb20gPSAkLmNvbnRhaW5zKFxuICAgICAgICBzaGFkb3dSb290ICE9PSBudWxsID8gc2hhZG93Um9vdCA6IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgICAgICAgdGhpcy5lbGVtZW50XG4gICAgICApXG5cbiAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgIWlzSW5UaGVEb20pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRpcCAgID0gdGhpcy5nZXRUaXBFbGVtZW50KClcbiAgICAgIGNvbnN0IHRpcElkID0gVXRpbC5nZXRVSUQodGhpcy5jb25zdHJ1Y3Rvci5OQU1FKVxuXG4gICAgICB0aXAuc2V0QXR0cmlidXRlKCdpZCcsIHRpcElkKVxuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRpcElkKVxuXG4gICAgICB0aGlzLnNldENvbnRlbnQoKVxuXG4gICAgICBpZiAodGhpcy5jb25maWcuYW5pbWF0aW9uKSB7XG4gICAgICAgICQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuRkFERSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGxhY2VtZW50ICA9IHR5cGVvZiB0aGlzLmNvbmZpZy5wbGFjZW1lbnQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB0aGlzLmNvbmZpZy5wbGFjZW1lbnQuY2FsbCh0aGlzLCB0aXAsIHRoaXMuZWxlbWVudClcbiAgICAgICAgOiB0aGlzLmNvbmZpZy5wbGFjZW1lbnRcblxuICAgICAgY29uc3QgYXR0YWNobWVudCA9IHRoaXMuX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KVxuICAgICAgdGhpcy5hZGRBdHRhY2htZW50Q2xhc3MoYXR0YWNobWVudClcblxuICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5fZ2V0Q29udGFpbmVyKClcbiAgICAgICQodGlwKS5kYXRhKHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVksIHRoaXMpXG5cbiAgICAgIGlmICghJC5jb250YWlucyh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXMudGlwKSkge1xuICAgICAgICAkKHRpcCkuYXBwZW5kVG8oY29udGFpbmVyKVxuICAgICAgfVxuXG4gICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcih0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LklOU0VSVEVEKVxuXG4gICAgICB0aGlzLl9wb3BwZXIgPSBuZXcgUG9wcGVyKHRoaXMuZWxlbWVudCwgdGlwLCB7XG4gICAgICAgIHBsYWNlbWVudDogYXR0YWNobWVudCxcbiAgICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgICAgb2Zmc2V0OiB7XG4gICAgICAgICAgICBvZmZzZXQ6IHRoaXMuY29uZmlnLm9mZnNldFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmxpcDoge1xuICAgICAgICAgICAgYmVoYXZpb3I6IHRoaXMuY29uZmlnLmZhbGxiYWNrUGxhY2VtZW50XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcnJvdzoge1xuICAgICAgICAgICAgZWxlbWVudDogU2VsZWN0b3IuQVJST1dcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByZXZlbnRPdmVyZmxvdzoge1xuICAgICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6IHRoaXMuY29uZmlnLmJvdW5kYXJ5XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkNyZWF0ZTogKGRhdGEpID0+IHtcbiAgICAgICAgICBpZiAoZGF0YS5vcmlnaW5hbFBsYWNlbWVudCAhPT0gZGF0YS5wbGFjZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZShkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25VcGRhdGU6IChkYXRhKSA9PiB0aGlzLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UoZGF0YSlcbiAgICAgIH0pXG5cbiAgICAgICQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVylcblxuICAgICAgLy8gSWYgdGhpcyBpcyBhIHRvdWNoLWVuYWJsZWQgZGV2aWNlIHdlIGFkZCBleHRyYVxuICAgICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB0byB0aGUgYm9keSdzIGltbWVkaWF0ZSBjaGlsZHJlbjtcbiAgICAgIC8vIG9ubHkgbmVlZGVkIGJlY2F1c2Ugb2YgYnJva2VuIGV2ZW50IGRlbGVnYXRpb24gb24gaU9TXG4gICAgICAvLyBodHRwczovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMTQvMDIvbW91c2VfZXZlbnRfYnViLmh0bWxcbiAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgICAgJChkb2N1bWVudC5ib2R5KS5jaGlsZHJlbigpLm9uKCdtb3VzZW92ZXInLCBudWxsLCAkLm5vb3ApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jb25maWcuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgdGhpcy5fZml4VHJhbnNpdGlvbigpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldkhvdmVyU3RhdGUgPSB0aGlzLl9ob3ZlclN0YXRlXG4gICAgICAgIHRoaXMuX2hvdmVyU3RhdGUgICAgID0gbnVsbFxuXG4gICAgICAgICQodGhpcy5lbGVtZW50KS50cmlnZ2VyKHRoaXMuY29uc3RydWN0b3IuRXZlbnQuU0hPV04pXG5cbiAgICAgICAgaWYgKHByZXZIb3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLk9VVCkge1xuICAgICAgICAgIHRoaXMuX2xlYXZlKG51bGwsIHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCQodGhpcy50aXApLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuICAgICAgICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMudGlwKVxuXG4gICAgICAgICQodGhpcy50aXApXG4gICAgICAgICAgLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSlcbiAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcGxldGUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhpZGUoY2FsbGJhY2spIHtcbiAgICBjb25zdCB0aXAgICAgICAgPSB0aGlzLmdldFRpcEVsZW1lbnQoKVxuICAgIGNvbnN0IGhpZGVFdmVudCA9ICQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5ISURFKVxuICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2hvdmVyU3RhdGUgIT09IEhvdmVyU3RhdGUuU0hPVyAmJiB0aXAucGFyZW50Tm9kZSkge1xuICAgICAgICB0aXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aXApXG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NsZWFuVGlwQ2xhc3MoKVxuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpXG4gICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcih0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJRERFTilcbiAgICAgIGlmICh0aGlzLl9wb3BwZXIgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKVxuICAgICAgfVxuICAgIH1cblxuICAgICQodGhpcy5lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudClcblxuICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgICQodGlwKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVylcblxuICAgIC8vIElmIHRoaXMgaXMgYSB0b3VjaC1lbmFibGVkIGRldmljZSB3ZSByZW1vdmUgdGhlIGV4dHJhXG4gICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB3ZSBhZGRlZCBmb3IgaU9TIHN1cHBvcnRcbiAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICAkKGRvY3VtZW50LmJvZHkpLmNoaWxkcmVuKCkub2ZmKCdtb3VzZW92ZXInLCBudWxsLCAkLm5vb3ApXG4gICAgfVxuXG4gICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUcmlnZ2VyLkNMSUNLXSA9IGZhbHNlXG4gICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUcmlnZ2VyLkZPQ1VTXSA9IGZhbHNlXG4gICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUcmlnZ2VyLkhPVkVSXSA9IGZhbHNlXG5cbiAgICBpZiAoJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKSB7XG4gICAgICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRpcClcblxuICAgICAgJCh0aXApXG4gICAgICAgIC5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpXG4gICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbXBsZXRlKClcbiAgICB9XG5cbiAgICB0aGlzLl9ob3ZlclN0YXRlID0gJydcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5fcG9wcGVyICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9wb3BwZXIuc2NoZWR1bGVVcGRhdGUoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFByb3RlY3RlZFxuXG4gIGlzV2l0aENvbnRlbnQoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5nZXRUaXRsZSgpKVxuICB9XG5cbiAgYWRkQXR0YWNobWVudENsYXNzKGF0dGFjaG1lbnQpIHtcbiAgICAkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5hZGRDbGFzcyhgJHtDTEFTU19QUkVGSVh9LSR7YXR0YWNobWVudH1gKVxuICB9XG5cbiAgZ2V0VGlwRWxlbWVudCgpIHtcbiAgICB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICQodGhpcy5jb25maWcudGVtcGxhdGUpWzBdXG4gICAgcmV0dXJuIHRoaXMudGlwXG4gIH1cblxuICBzZXRDb250ZW50KCkge1xuICAgIGNvbnN0IHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpXG4gICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkKHRpcC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLlRPT0xUSVBfSU5ORVIpKSwgdGhpcy5nZXRUaXRsZSgpKVxuICAgICQodGlwKS5yZW1vdmVDbGFzcyhgJHtDbGFzc05hbWUuRkFERX0gJHtDbGFzc05hbWUuU0hPV31gKVxuICB9XG5cbiAgc2V0RWxlbWVudENvbnRlbnQoJGVsZW1lbnQsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBodG1sID0gdGhpcy5jb25maWcuaHRtbFxuICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ29iamVjdCcgJiYgKGNvbnRlbnQubm9kZVR5cGUgfHwgY29udGVudC5qcXVlcnkpKSB7XG4gICAgICAvLyBDb250ZW50IGlzIGEgRE9NIG5vZGUgb3IgYSBqUXVlcnlcbiAgICAgIGlmIChodG1sKSB7XG4gICAgICAgIGlmICghJChjb250ZW50KS5wYXJlbnQoKS5pcygkZWxlbWVudCkpIHtcbiAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpLmFwcGVuZChjb250ZW50KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkZWxlbWVudC50ZXh0KCQoY29udGVudCkudGV4dCgpKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbWVudFtodG1sID8gJ2h0bWwnIDogJ3RleHQnXShjb250ZW50KVxuICAgIH1cbiAgfVxuXG4gIGdldFRpdGxlKCkge1xuICAgIGxldCB0aXRsZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKVxuXG4gICAgaWYgKCF0aXRsZSkge1xuICAgICAgdGl0bGUgPSB0eXBlb2YgdGhpcy5jb25maWcudGl0bGUgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB0aGlzLmNvbmZpZy50aXRsZS5jYWxsKHRoaXMuZWxlbWVudClcbiAgICAgICAgOiB0aGlzLmNvbmZpZy50aXRsZVxuICAgIH1cblxuICAgIHJldHVybiB0aXRsZVxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIF9nZXRDb250YWluZXIoKSB7XG4gICAgaWYgKHRoaXMuY29uZmlnLmNvbnRhaW5lciA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5XG4gICAgfVxuXG4gICAgaWYgKFV0aWwuaXNFbGVtZW50KHRoaXMuY29uZmlnLmNvbnRhaW5lcikpIHtcbiAgICAgIHJldHVybiAkKHRoaXMuY29uZmlnLmNvbnRhaW5lcilcbiAgICB9XG5cbiAgICByZXR1cm4gJChkb2N1bWVudCkuZmluZCh0aGlzLmNvbmZpZy5jb250YWluZXIpXG4gIH1cblxuICBfZ2V0QXR0YWNobWVudChwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gQXR0YWNobWVudE1hcFtwbGFjZW1lbnQudG9VcHBlckNhc2UoKV1cbiAgfVxuXG4gIF9zZXRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgdHJpZ2dlcnMgPSB0aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KCcgJylcblxuICAgIHRyaWdnZXJzLmZvckVhY2goKHRyaWdnZXIpID0+IHtcbiAgICAgIGlmICh0cmlnZ2VyID09PSAnY2xpY2snKSB7XG4gICAgICAgICQodGhpcy5lbGVtZW50KS5vbihcbiAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLFxuICAgICAgICAgIHRoaXMuY29uZmlnLnNlbGVjdG9yLFxuICAgICAgICAgIChldmVudCkgPT4gdGhpcy50b2dnbGUoZXZlbnQpXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAodHJpZ2dlciAhPT0gVHJpZ2dlci5NQU5VQUwpIHtcbiAgICAgICAgY29uc3QgZXZlbnRJbiA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVJcbiAgICAgICAgICA/IHRoaXMuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VFTlRFUlxuICAgICAgICAgIDogdGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU0lOXG4gICAgICAgIGNvbnN0IGV2ZW50T3V0ID0gdHJpZ2dlciA9PT0gVHJpZ2dlci5IT1ZFUlxuICAgICAgICAgID8gdGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUxFQVZFXG4gICAgICAgICAgOiB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTT1VUXG5cbiAgICAgICAgJCh0aGlzLmVsZW1lbnQpXG4gICAgICAgICAgLm9uKFxuICAgICAgICAgICAgZXZlbnRJbixcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNlbGVjdG9yLFxuICAgICAgICAgICAgKGV2ZW50KSA9PiB0aGlzLl9lbnRlcihldmVudClcbiAgICAgICAgICApXG4gICAgICAgICAgLm9uKFxuICAgICAgICAgICAgZXZlbnRPdXQsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zZWxlY3RvcixcbiAgICAgICAgICAgIChldmVudCkgPT4gdGhpcy5fbGVhdmUoZXZlbnQpXG4gICAgICAgICAgKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAkKHRoaXMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub24oXG4gICAgICAnaGlkZS5icy5tb2RhbCcsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLmhpZGUoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuY29uZmlnLnNlbGVjdG9yKSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgLi4udGhpcy5jb25maWcsXG4gICAgICAgIHRyaWdnZXI6ICdtYW51YWwnLFxuICAgICAgICBzZWxlY3RvcjogJydcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZml4VGl0bGUoKVxuICAgIH1cbiAgfVxuXG4gIF9maXhUaXRsZSgpIHtcbiAgICBjb25zdCB0aXRsZVR5cGUgPSB0eXBlb2YgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScpXG5cbiAgICBpZiAodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCB0aXRsZVR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgICAnZGF0YS1vcmlnaW5hbC10aXRsZScsXG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgJydcbiAgICAgIClcblxuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnJylcbiAgICB9XG4gIH1cblxuICBfZW50ZXIoZXZlbnQsIGNvbnRleHQpIHtcbiAgICBjb25zdCBkYXRhS2V5ID0gdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWVxuICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KVxuXG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICBjb250ZXh0ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoXG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICAgIHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKClcbiAgICAgIClcbiAgICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LCBjb250ZXh0KVxuICAgIH1cblxuICAgIGlmIChldmVudCkge1xuICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlcltcbiAgICAgICAgZXZlbnQudHlwZSA9PT0gJ2ZvY3VzaW4nID8gVHJpZ2dlci5GT0NVUyA6IFRyaWdnZXIuSE9WRVJcbiAgICAgIF0gPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKCQoY29udGV4dC5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSB8fCBjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLlNIT1cpIHtcbiAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLlNIT1dcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNsZWFyVGltZW91dChjb250ZXh0Ll90aW1lb3V0KVxuXG4gICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhvdmVyU3RhdGUuU0hPV1xuXG4gICAgaWYgKCFjb250ZXh0LmNvbmZpZy5kZWxheSB8fCAhY29udGV4dC5jb25maWcuZGVsYXkuc2hvdykge1xuICAgICAgY29udGV4dC5zaG93KClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnRleHQuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLlNIT1cpIHtcbiAgICAgICAgY29udGV4dC5zaG93KClcbiAgICAgIH1cbiAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KVxuICB9XG5cbiAgX2xlYXZlKGV2ZW50LCBjb250ZXh0KSB7XG4gICAgY29uc3QgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVlcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSlcblxuICAgIGlmICghY29udGV4dCkge1xuICAgICAgY29udGV4dCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgICB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpXG4gICAgICApXG4gICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dClcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXJbXG4gICAgICAgIGV2ZW50LnR5cGUgPT09ICdmb2N1c291dCcgPyBUcmlnZ2VyLkZPQ1VTIDogVHJpZ2dlci5IT1ZFUlxuICAgICAgXSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQuX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpXG5cbiAgICBjb250ZXh0Ll9ob3ZlclN0YXRlID0gSG92ZXJTdGF0ZS5PVVRcblxuICAgIGlmICghY29udGV4dC5jb25maWcuZGVsYXkgfHwgIWNvbnRleHQuY29uZmlnLmRlbGF5LmhpZGUpIHtcbiAgICAgIGNvbnRleHQuaGlkZSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoY29udGV4dC5faG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5PVVQpIHtcbiAgICAgICAgY29udGV4dC5oaWRlKClcbiAgICAgIH1cbiAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKVxuICB9XG5cbiAgX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSB7XG4gICAgZm9yIChjb25zdCB0cmlnZ2VyIGluIHRoaXMuX2FjdGl2ZVRyaWdnZXIpIHtcbiAgICAgIGlmICh0aGlzLl9hY3RpdmVUcmlnZ2VyW3RyaWdnZXJdKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IHtcbiAgICAgIC4uLnRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCxcbiAgICAgIC4uLiQodGhpcy5lbGVtZW50KS5kYXRhKCksXG4gICAgICAuLi50eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcgPyBjb25maWcgOiB7fVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY29uZmlnLmRlbGF5ID09PSAnbnVtYmVyJykge1xuICAgICAgY29uZmlnLmRlbGF5ID0ge1xuICAgICAgICBzaG93OiBjb25maWcuZGVsYXksXG4gICAgICAgIGhpZGU6IGNvbmZpZy5kZWxheVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY29uZmlnLnRpdGxlID09PSAnbnVtYmVyJykge1xuICAgICAgY29uZmlnLnRpdGxlID0gY29uZmlnLnRpdGxlLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNvbmZpZy5jb250ZW50ID09PSAnbnVtYmVyJykge1xuICAgICAgY29uZmlnLmNvbnRlbnQgPSBjb25maWcuY29udGVudC50b1N0cmluZygpXG4gICAgfVxuXG4gICAgVXRpbC50eXBlQ2hlY2tDb25maWcoXG4gICAgICBOQU1FLFxuICAgICAgY29uZmlnLFxuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZVxuICAgIClcblxuICAgIHJldHVybiBjb25maWdcbiAgfVxuXG4gIF9nZXREZWxlZ2F0ZUNvbmZpZygpIHtcbiAgICBjb25zdCBjb25maWcgPSB7fVxuXG4gICAgaWYgKHRoaXMuY29uZmlnKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNvbmZpZykge1xuICAgICAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0W2tleV0gIT09IHRoaXMuY29uZmlnW2tleV0pIHtcbiAgICAgICAgICBjb25maWdba2V5XSA9IHRoaXMuY29uZmlnW2tleV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb25maWdcbiAgfVxuXG4gIF9jbGVhblRpcENsYXNzKCkge1xuICAgIGNvbnN0ICR0aXAgPSAkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKVxuICAgIGNvbnN0IHRhYkNsYXNzID0gJHRpcC5hdHRyKCdjbGFzcycpLm1hdGNoKEJTQ0xTX1BSRUZJWF9SRUdFWClcbiAgICBpZiAodGFiQ2xhc3MgIT09IG51bGwgJiYgdGFiQ2xhc3MubGVuZ3RoKSB7XG4gICAgICAkdGlwLnJlbW92ZUNsYXNzKHRhYkNsYXNzLmpvaW4oJycpKVxuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UocG9wcGVyRGF0YSkge1xuICAgIGNvbnN0IHBvcHBlckluc3RhbmNlID0gcG9wcGVyRGF0YS5pbnN0YW5jZVxuICAgIHRoaXMudGlwID0gcG9wcGVySW5zdGFuY2UucG9wcGVyXG4gICAgdGhpcy5fY2xlYW5UaXBDbGFzcygpXG4gICAgdGhpcy5hZGRBdHRhY2htZW50Q2xhc3ModGhpcy5fZ2V0QXR0YWNobWVudChwb3BwZXJEYXRhLnBsYWNlbWVudCkpXG4gIH1cblxuICBfZml4VHJhbnNpdGlvbigpIHtcbiAgICBjb25zdCB0aXAgPSB0aGlzLmdldFRpcEVsZW1lbnQoKVxuICAgIGNvbnN0IGluaXRDb25maWdBbmltYXRpb24gPSB0aGlzLmNvbmZpZy5hbmltYXRpb25cblxuICAgIGlmICh0aXAuZ2V0QXR0cmlidXRlKCd4LXBsYWNlbWVudCcpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAkKHRpcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpXG4gICAgdGhpcy5jb25maWcuYW5pbWF0aW9uID0gZmFsc2VcbiAgICB0aGlzLmhpZGUoKVxuICAgIHRoaXMuc2hvdygpXG4gICAgdGhpcy5jb25maWcuYW5pbWF0aW9uID0gaW5pdENvbmZpZ0FuaW1hdGlvblxuICB9XG5cbiAgLy8gU3RhdGljXG5cbiAgc3RhdGljIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSlcbiAgICAgIGNvbnN0IF9jb25maWcgPSB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWdcblxuICAgICAgaWYgKCFkYXRhICYmIC9kaXNwb3NlfGhpZGUvLnRlc3QoY29uZmlnKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIGRhdGEgPSBuZXcgVG9vbHRpcCh0aGlzLCBfY29uZmlnKVxuICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgXCIke2NvbmZpZ31cImApXG4gICAgICAgIH1cbiAgICAgICAgZGF0YVtjb25maWddKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBqUXVlcnlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbiQuZm5bTkFNRV0gPSBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2VcbiQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBUb29sdGlwXG4kLmZuW05BTUVdLm5vQ29uZmxpY3QgPSAoKSA9PiB7XG4gICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1RcbiAgcmV0dXJuIFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb29sdGlwXG4iXX0=
