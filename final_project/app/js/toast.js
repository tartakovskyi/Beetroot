"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery")),_util=_interopRequireDefault(require("./util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var NAME="toast",VERSION="4.2.1",DATA_KEY="bs.toast",EVENT_KEY=".".concat(DATA_KEY),JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],Event={CLICK_DISMISS:"click.dismiss".concat(EVENT_KEY),HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY)},ClassName={FADE:"fade",HIDE:"hide",SHOW:"show",SHOWING:"showing"},DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:500},Selector={DATA_DISMISS:'[data-dismiss="toast"]'},Toast=function(){function a(e,t){_classCallCheck(this,a),this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}return _createClass(a,[{key:"show",value:function(){var e=this;(0,_jquery.default)(this._element).trigger(Event.SHOW),this._config.animation&&this._element.classList.add(ClassName.FADE);var t=function(){e._element.classList.remove(ClassName.SHOWING),e._element.classList.add(ClassName.SHOW),(0,_jquery.default)(e._element).trigger(Event.SHOWN),e._config.autohide&&e.hide()};if(this._element.classList.remove(ClassName.HIDE),this._element.classList.add(ClassName.SHOWING),this._config.animation){var n=_util.default.getTransitionDurationFromElement(this._element);(0,_jquery.default)(this._element).one(_util.default.TRANSITION_END,t).emulateTransitionEnd(n)}else t()}},{key:"hide",value:function(e){var t=this;this._element.classList.contains(ClassName.SHOW)&&((0,_jquery.default)(this._element).trigger(Event.HIDE),e?this._close():this._timeout=setTimeout(function(){t._close()},this._config.delay))}},{key:"dispose",value:function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(ClassName.SHOW)&&this._element.classList.remove(ClassName.SHOW),(0,_jquery.default)(this._element).off(Event.CLICK_DISMISS),_jquery.default.removeData(this._element,DATA_KEY),this._element=null,this._config=null}},{key:"_getConfig",value:function(e){return e=_objectSpread({},Default,(0,_jquery.default)(this._element).data(),"object"===_typeof(e)&&e?e:{}),_util.default.typeCheckConfig(NAME,e,this.constructor.DefaultType),e}},{key:"_setListeners",value:function(){var e=this;(0,_jquery.default)(this._element).on(Event.CLICK_DISMISS,Selector.DATA_DISMISS,function(){return e.hide(!0)})}},{key:"_close",value:function(){var e=this,t=function(){e._element.classList.add(ClassName.HIDE),(0,_jquery.default)(e._element).trigger(Event.HIDDEN)};if(this._element.classList.remove(ClassName.SHOW),this._config.animation){var n=_util.default.getTransitionDurationFromElement(this._element);(0,_jquery.default)(this._element).one(_util.default.TRANSITION_END,t).emulateTransitionEnd(n)}else t()}}],[{key:"_jQueryInterface",value:function(i){return this.each(function(){var e=(0,_jquery.default)(this),t=e.data(DATA_KEY),n="object"===_typeof(i)&&i;if(t||(t=new a(this,n),e.data(DATA_KEY,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'.concat(i,'"'));t[i](this)}})}},{key:"VERSION",get:function(){return VERSION}},{key:"DefaultType",get:function(){return DefaultType}}]),a}();_jquery.default.fn[NAME]=Toast._jQueryInterface,_jquery.default.fn[NAME].Constructor=Toast,_jquery.default.fn[NAME].noConflict=function(){return _jquery.default.fn[NAME]=JQUERY_NO_CONFLICT,Toast._jQueryInterface};var _default=Toast;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvYXN0LmpzIl0sIm5hbWVzIjpbIl9qcXVlcnkiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl91dGlsIiwiTkFNRSIsIlZFUlNJT04iLCJEQVRBX0tFWSIsIkVWRU5UX0tFWSIsImNvbmNhdCIsIkpRVUVSWV9OT19DT05GTElDVCIsIiQiLCJmbiIsIkV2ZW50IiwiQ0xJQ0tfRElTTUlTUyIsIkhJREUiLCJISURERU4iLCJTSE9XIiwiU0hPV04iLCJGQURFIiwiU0hPV0lORyIsIkRlZmF1bHRUeXBlIiwiRGVmYXVsdCIsImFuaW1hdGlvbiIsImF1dG9oaWRlIiwiREFUQV9ESVNNSVNTIiwiVG9hc3QiLCJlbGVtZW50IiwiY29uZmlnIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9lbGVtZW50IiwiX2NvbmZpZyIsIl9nZXRDb25maWciLCJfdGltZW91dCIsIl9zZXRMaXN0ZW5lcnMiLCJfdGhpcyIsImRlZmF1bHQiLCJ0cmlnZ2VyIiwiY2xhc3NMaXN0IiwiYWRkIiwiQ2xhc3NOYW1lIiwiY29tcGxldGUiLCJyZW1vdmUiLCJoaWRlIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiVXRpbCIsImdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50Iiwib25lIiwiVFJBTlNJVElPTl9FTkQiLCJlbXVsYXRlVHJhbnNpdGlvbkVuZCIsIndpdGhvdXRUaW1lb3V0IiwiX2Nsb3NlIiwic2V0VGltZW91dCIsIl90aGlzMiIsImRlbGF5IiwiY2xlYXJUaW1lb3V0IiwiY29udGFpbnMiLCJyZW1vdmVEYXRhIiwiX29iamVjdFNwcmVhZCIsImRhdGEiLCJfdHlwZW9mIiwidHlwZUNoZWNrQ29uZmlnIiwiY29uc3RydWN0b3IiLCJfdGhpczMiLCJTZWxlY3RvciIsIl90aGlzNCIsImVhY2giLCIkZWxlbWVudCIsIl9qUXVlcnlJbnRlcmZhY2UiLCJDb25zdHJ1Y3RvciIsIm5vQ29uZmxpY3QiXSwibWFwcGluZ3MiOiIyRkFPQSxJQUFBQSxRQUFB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KipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjIuMSk6IHRvYXN0LmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknXG5pbXBvcnQgVXRpbCBmcm9tICcuL3V0aWwnXG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDb25zdGFudHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmNvbnN0IE5BTUUgICAgICAgICAgICAgICA9ICd0b2FzdCdcbmNvbnN0IFZFUlNJT04gICAgICAgICAgICA9ICc0LjIuMSdcbmNvbnN0IERBVEFfS0VZICAgICAgICAgICA9ICdicy50b2FzdCdcbmNvbnN0IEVWRU5UX0tFWSAgICAgICAgICA9IGAuJHtEQVRBX0tFWX1gXG5jb25zdCBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdXG5cbmNvbnN0IEV2ZW50ID0ge1xuICBDTElDS19ESVNNSVNTIDogYGNsaWNrLmRpc21pc3Mke0VWRU5UX0tFWX1gLFxuICBISURFICAgICAgICAgIDogYGhpZGUke0VWRU5UX0tFWX1gLFxuICBISURERU4gICAgICAgIDogYGhpZGRlbiR7RVZFTlRfS0VZfWAsXG4gIFNIT1cgICAgICAgICAgOiBgc2hvdyR7RVZFTlRfS0VZfWAsXG4gIFNIT1dOICAgICAgICAgOiBgc2hvd24ke0VWRU5UX0tFWX1gXG59XG5cbmNvbnN0IENsYXNzTmFtZSA9IHtcbiAgRkFERSAgICA6ICdmYWRlJyxcbiAgSElERSAgICA6ICdoaWRlJyxcbiAgU0hPVyAgICA6ICdzaG93JyxcbiAgU0hPV0lORyA6ICdzaG93aW5nJ1xufVxuXG5jb25zdCBEZWZhdWx0VHlwZSA9IHtcbiAgYW5pbWF0aW9uIDogJ2Jvb2xlYW4nLFxuICBhdXRvaGlkZSAgOiAnYm9vbGVhbicsXG4gIGRlbGF5ICAgICA6ICdudW1iZXInXG59XG5cbmNvbnN0IERlZmF1bHQgPSB7XG4gIGFuaW1hdGlvbiA6IHRydWUsXG4gIGF1dG9oaWRlICA6IHRydWUsXG4gIGRlbGF5ICAgICA6IDUwMFxufVxuXG5jb25zdCBTZWxlY3RvciA9IHtcbiAgREFUQV9ESVNNSVNTIDogJ1tkYXRhLWRpc21pc3M9XCJ0b2FzdFwiXSdcbn1cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIENsYXNzIERlZmluaXRpb25cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmNsYXNzIFRvYXN0IHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnRcbiAgICB0aGlzLl9jb25maWcgID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZylcbiAgICB0aGlzLl90aW1lb3V0ID0gbnVsbFxuICAgIHRoaXMuX3NldExpc3RlbmVycygpXG4gIH1cblxuICAvLyBHZXR0ZXJzXG5cbiAgc3RhdGljIGdldCBWRVJTSU9OKCkge1xuICAgIHJldHVybiBWRVJTSU9OXG4gIH1cblxuICBzdGF0aWMgZ2V0IERlZmF1bHRUeXBlKCkge1xuICAgIHJldHVybiBEZWZhdWx0VHlwZVxuICB9XG5cbiAgLy8gUHVibGljXG5cbiAgc2hvdygpIHtcbiAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuU0hPVylcblxuICAgIGlmICh0aGlzLl9jb25maWcuYW5pbWF0aW9uKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lLkZBREUpXG4gICAgfVxuXG4gICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lLlNIT1dJTkcpXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lLlNIT1cpXG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5TSE9XTilcblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5hdXRvaGlkZSkge1xuICAgICAgICB0aGlzLmhpZGUoKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUuSElERSlcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lLlNIT1dJTkcpXG4gICAgaWYgKHRoaXMuX2NvbmZpZy5hbmltYXRpb24pIHtcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudClcblxuICAgICAgJCh0aGlzLl9lbGVtZW50KVxuICAgICAgICAub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb21wbGV0ZSgpXG4gICAgfVxuICB9XG5cbiAgaGlkZSh3aXRob3V0VGltZW91dCkge1xuICAgIGlmICghdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lLlNIT1cpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuSElERSlcblxuICAgIGlmICh3aXRob3V0VGltZW91dCkge1xuICAgICAgdGhpcy5fY2xvc2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuX2Nsb3NlKClcbiAgICAgIH0sIHRoaXMuX2NvbmZpZy5kZWxheSlcbiAgICB9XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KVxuICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsXG5cbiAgICBpZiAodGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lLlNIT1cpKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lLlNIT1cpXG4gICAgfVxuXG4gICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuQ0xJQ0tfRElTTUlTUylcblxuICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSlcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbFxuICAgIHRoaXMuX2NvbmZpZyAgPSBudWxsXG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgX2dldENvbmZpZyhjb25maWcpIHtcbiAgICBjb25maWcgPSB7XG4gICAgICAuLi5EZWZhdWx0LFxuICAgICAgLi4uJCh0aGlzLl9lbGVtZW50KS5kYXRhKCksXG4gICAgICAuLi50eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcgPyBjb25maWcgOiB7fVxuICAgIH1cblxuICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKFxuICAgICAgTkFNRSxcbiAgICAgIGNvbmZpZyxcbiAgICAgIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGVcbiAgICApXG5cbiAgICByZXR1cm4gY29uZmlnXG4gIH1cblxuICBfc2V0TGlzdGVuZXJzKCkge1xuICAgICQodGhpcy5fZWxlbWVudCkub24oXG4gICAgICBFdmVudC5DTElDS19ESVNNSVNTLFxuICAgICAgU2VsZWN0b3IuREFUQV9ESVNNSVNTLFxuICAgICAgKCkgPT4gdGhpcy5oaWRlKHRydWUpXG4gICAgKVxuICB9XG5cbiAgX2Nsb3NlKCkge1xuICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENsYXNzTmFtZS5ISURFKVxuICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LkhJRERFTilcbiAgICB9XG5cbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lLlNIT1cpXG4gICAgaWYgKHRoaXMuX2NvbmZpZy5hbmltYXRpb24pIHtcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudClcblxuICAgICAgJCh0aGlzLl9lbGVtZW50KVxuICAgICAgICAub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb21wbGV0ZSgpXG4gICAgfVxuICB9XG5cbiAgLy8gU3RhdGljXG5cbiAgc3RhdGljIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCAkZWxlbWVudCA9ICQodGhpcylcbiAgICAgIGxldCBkYXRhICAgICAgID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSlcbiAgICAgIGNvbnN0IF9jb25maWcgID0gdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcgJiYgY29uZmlnXG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICBkYXRhID0gbmV3IFRvYXN0KHRoaXMsIF9jb25maWcpXG4gICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgXCIke2NvbmZpZ31cImApXG4gICAgICAgIH1cblxuICAgICAgICBkYXRhW2NvbmZpZ10odGhpcylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBqUXVlcnlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbiQuZm5bTkFNRV0gICAgICAgICAgICAgPSBUb2FzdC5falF1ZXJ5SW50ZXJmYWNlXG4kLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gVG9hc3RcbiQuZm5bTkFNRV0ubm9Db25mbGljdCAgPSAoKSA9PiB7XG4gICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1RcbiAgcmV0dXJuIFRvYXN0Ll9qUXVlcnlJbnRlcmZhY2Vcbn1cblxuZXhwb3J0IGRlZmF1bHQgVG9hc3RcbiJdfQ==
