"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery")),_util=_interopRequireDefault(require("./util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(e){_defineProperty(t,e,i[e])})}return t}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var NAME="modal",VERSION="4.2.1",DATA_KEY="bs.modal",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],ESCAPE_KEYCODE=27,Default={backdrop:!0,keyboard:!0,focus:!0,show:!0},DefaultType={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Event={HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),FOCUSIN:"focusin".concat(EVENT_KEY),RESIZE:"resize".concat(EVENT_KEY),CLICK_DISMISS:"click.dismiss".concat(EVENT_KEY),KEYDOWN_DISMISS:"keydown.dismiss".concat(EVENT_KEY),MOUSEUP_DISMISS:"mouseup.dismiss".concat(EVENT_KEY),MOUSEDOWN_DISMISS:"mousedown.dismiss".concat(EVENT_KEY),CLICK_DATA_API:"click".concat(EVENT_KEY).concat(DATA_API_KEY)},ClassName={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},Selector={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},Modal=function(){function n(e,t){_classCallCheck(this,n),this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(Selector.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}return _createClass(n,[{key:"toggle",value:function(e){return this._isShown?this.hide():this.show(e)}},{key:"show",value:function(e){var t=this;if(!this._isShown&&!this._isTransitioning){(0,_jquery.default)(this._element).hasClass(ClassName.FADE)&&(this._isTransitioning=!0);var i=_jquery.default.Event(Event.SHOW,{relatedTarget:e});(0,_jquery.default)(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),(0,_jquery.default)(this._element).on(Event.CLICK_DISMISS,Selector.DATA_DISMISS,function(e){return t.hide(e)}),(0,_jquery.default)(this._dialog).on(Event.MOUSEDOWN_DISMISS,function(){(0,_jquery.default)(t._element).one(Event.MOUSEUP_DISMISS,function(e){(0,_jquery.default)(e.target).is(t._element)&&(t._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return t._showElement(e)}))}}},{key:"hide",value:function(e){var t=this;if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){var i=_jquery.default.Event(Event.HIDE);if((0,_jquery.default)(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var a=(0,_jquery.default)(this._element).hasClass(ClassName.FADE);if(a&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),(0,_jquery.default)(document).off(Event.FOCUSIN),(0,_jquery.default)(this._element).removeClass(ClassName.SHOW),(0,_jquery.default)(this._element).off(Event.CLICK_DISMISS),(0,_jquery.default)(this._dialog).off(Event.MOUSEDOWN_DISMISS),a){var n=_util.default.getTransitionDurationFromElement(this._element);(0,_jquery.default)(this._element).one(_util.default.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(n)}else this._hideModal()}}}},{key:"dispose",value:function(){[window,this._element,this._dialog].forEach(function(e){return(0,_jquery.default)(e).off(EVENT_KEY)}),(0,_jquery.default)(document).off(Event.FOCUSIN),_jquery.default.removeData(this._element,DATA_KEY),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_getConfig",value:function(e){return e=_objectSpread({},Default,e),_util.default.typeCheckConfig(NAME,e,DefaultType),e}},{key:"_showElement",value:function(e){var t=this,i=(0,_jquery.default)(this._element).hasClass(ClassName.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.scrollTop=0,i&&_util.default.reflow(this._element),(0,_jquery.default)(this._element).addClass(ClassName.SHOW),this._config.focus&&this._enforceFocus();var a=_jquery.default.Event(Event.SHOWN,{relatedTarget:e}),n=function(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,(0,_jquery.default)(t._element).trigger(a)};if(i){var o=_util.default.getTransitionDurationFromElement(this._dialog);(0,_jquery.default)(this._dialog).one(_util.default.TRANSITION_END,n).emulateTransitionEnd(o)}else n()}},{key:"_enforceFocus",value:function(){var t=this;(0,_jquery.default)(document).off(Event.FOCUSIN).on(Event.FOCUSIN,function(e){document!==e.target&&t._element!==e.target&&0===(0,_jquery.default)(t._element).has(e.target).length&&t._element.focus()})}},{key:"_setEscapeEvent",value:function(){var t=this;this._isShown&&this._config.keyboard?(0,_jquery.default)(this._element).on(Event.KEYDOWN_DISMISS,function(e){e.which===ESCAPE_KEYCODE&&(e.preventDefault(),t.hide())}):this._isShown||(0,_jquery.default)(this._element).off(Event.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){var t=this;this._isShown?(0,_jquery.default)(window).on(Event.RESIZE,function(e){return t.handleUpdate(e)}):(0,_jquery.default)(window).off(Event.RESIZE)}},{key:"_hideModal",value:function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){(0,_jquery.default)(document.body).removeClass(ClassName.OPEN),e._resetAdjustments(),e._resetScrollbar(),(0,_jquery.default)(e._element).trigger(Event.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&((0,_jquery.default)(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(e){var t=this,i=(0,_jquery.default)(this._element).hasClass(ClassName.FADE)?ClassName.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=ClassName.BACKDROP,i&&this._backdrop.classList.add(i),(0,_jquery.default)(this._backdrop).appendTo(document.body),(0,_jquery.default)(this._element).on(Event.CLICK_DISMISS,function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===t._config.backdrop?t._element.focus():t.hide())}),i&&_util.default.reflow(this._backdrop),(0,_jquery.default)(this._backdrop).addClass(ClassName.SHOW),!e)return;if(!i)return void e();var a=_util.default.getTransitionDurationFromElement(this._backdrop);(0,_jquery.default)(this._backdrop).one(_util.default.TRANSITION_END,e).emulateTransitionEnd(a)}else if(!this._isShown&&this._backdrop){(0,_jquery.default)(this._backdrop).removeClass(ClassName.SHOW);var n=function(){t._removeBackdrop(),e&&e()};if((0,_jquery.default)(this._element).hasClass(ClassName.FADE)){var o=_util.default.getTransitionDurationFromElement(this._backdrop);(0,_jquery.default)(this._backdrop).one(_util.default.TRANSITION_END,n).emulateTransitionEnd(o)}else n()}else e&&e()}},{key:"_adjustDialog",value:function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft="".concat(this._scrollbarWidth,"px")),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight="".concat(this._scrollbarWidth,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var n=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(Selector.FIXED_CONTENT)),t=[].slice.call(document.querySelectorAll(Selector.STICKY_CONTENT));(0,_jquery.default)(e).each(function(e,t){var i=t.style.paddingRight,a=(0,_jquery.default)(t).css("padding-right");(0,_jquery.default)(t).data("padding-right",i).css("padding-right","".concat(parseFloat(a)+n._scrollbarWidth,"px"))}),(0,_jquery.default)(t).each(function(e,t){var i=t.style.marginRight,a=(0,_jquery.default)(t).css("margin-right");(0,_jquery.default)(t).data("margin-right",i).css("margin-right","".concat(parseFloat(a)-n._scrollbarWidth,"px"))});var i=document.body.style.paddingRight,a=(0,_jquery.default)(document.body).css("padding-right");(0,_jquery.default)(document.body).data("padding-right",i).css("padding-right","".concat(parseFloat(a)+this._scrollbarWidth,"px"))}(0,_jquery.default)(document.body).addClass(ClassName.OPEN)}},{key:"_resetScrollbar",value:function(){var e=[].slice.call(document.querySelectorAll(Selector.FIXED_CONTENT));(0,_jquery.default)(e).each(function(e,t){var i=(0,_jquery.default)(t).data("padding-right");(0,_jquery.default)(t).removeData("padding-right"),t.style.paddingRight=i||""});var t=[].slice.call(document.querySelectorAll("".concat(Selector.STICKY_CONTENT)));(0,_jquery.default)(t).each(function(e,t){var i=(0,_jquery.default)(t).data("margin-right");void 0!==i&&(0,_jquery.default)(t).css("margin-right",i).removeData("margin-right")});var i=(0,_jquery.default)(document.body).data("padding-right");(0,_jquery.default)(document.body).removeData("padding-right"),document.body.style.paddingRight=i||""}},{key:"_getScrollbarWidth",value:function(){var e=document.createElement("div");e.className=ClassName.SCROLLBAR_MEASURER,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t}}],[{key:"_jQueryInterface",value:function(i,a){return this.each(function(){var e=(0,_jquery.default)(this).data(DATA_KEY),t=_objectSpread({},Default,(0,_jquery.default)(this).data(),"object"===_typeof(i)&&i?i:{});if(e||(e=new n(this,t),(0,_jquery.default)(this).data(DATA_KEY,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'.concat(i,'"'));e[i](a)}else t.show&&e.show(a)})}},{key:"VERSION",get:function(){return VERSION}},{key:"Default",get:function(){return Default}}]),n}();(0,_jquery.default)(document).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(e){var t,i=this,a=_util.default.getSelectorFromElement(this);a&&(t=document.querySelector(a));var n=(0,_jquery.default)(t).data(DATA_KEY)?"toggle":_objectSpread({},(0,_jquery.default)(t).data(),(0,_jquery.default)(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var o=(0,_jquery.default)(t).one(Event.SHOW,function(e){e.isDefaultPrevented()||o.one(Event.HIDDEN,function(){(0,_jquery.default)(i).is(":visible")&&i.focus()})});Modal._jQueryInterface.call((0,_jquery.default)(t),n,this)}),_jquery.default.fn[NAME]=Modal._jQueryInterface,_jquery.default.fn[NAME].Constructor=Modal,_jquery.default.fn[NAME].noConflict=function(){return _jquery.default.fn[NAME]=JQUERY_NO_CONFLICT,Modal._jQueryInterface};var _default=Modal;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLmpzIl0sIm5hbWVzIjpbIl9qcXVlcnkiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl91dGlsIiwiTkFNRSIsIlZFUlNJT04iLCJEQVRBX0tFWSIsIkVWRU5UX0tFWSIsImNvbmNhdCIsIkRBVEFfQVBJX0tFWSIsIkpRVUVSWV9OT19DT05GTElDVCIsIiQiLCJmbiIsIkVTQ0FQRV9LRVlDT0RFIiwiRGVmYXVsdCIsImJhY2tkcm9wIiwia2V5Ym9hcmQiLCJmb2N1cyIsInNob3ciLCJGT0NVU0lOIiwiUkVTSVpFIiwiRGVmYXVsdFR5cGUiLCJDTElDS19EQVRBX0FQSSIsIkhJRERFTiIsIlNIT1ciLCJTSE9XTiIsIkNMSUNLX0RJU01JU1MiLCJNT1VTRURPV05fRElTTUlTUyIsIkRBVEFfVE9HR0xFIiwiREFUQV9ESVNNSVNTIiwiU0NST0xMQkFSX01FQVNVUkVSIiwiQkFDS0RST1AiLCJGSVhFRF9DT05URU5UIiwiU1RJQ0tZX0NPTlRFTlQiLCJjb25maWciLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiTW9kYWwiLCJfY29uZmlnIiwiX2dldENvbmZpZyIsIl9lbGVtZW50IiwiZWxlbWVudCIsIl9kaWFsb2ciLCJxdWVyeVNlbGVjdG9yIiwiU2VsZWN0b3IiLCJESUFMT0ciLCJfYmFja2Ryb3AiLCJfaXNTaG93biIsIl9pc0JvZHlPdmVyZmxvd2luZyIsIl9pZ25vcmVCYWNrZHJvcENsaWNrIiwiX2lzVHJhbnNpdGlvbmluZyIsIl9zY3JvbGxiYXJXaWR0aCIsInJlbGF0ZWRUYXJnZXQiLCJoaWRlIiwiX3RoaXMiLCJkZWZhdWx0IiwiaGFzQ2xhc3MiLCJDbGFzc05hbWUiLCJGQURFIiwic2hvd0V2ZW50IiwiRXZlbnQiLCJ0cmlnZ2VyIiwiaXNEZWZhdWx0UHJldmVudGVkIiwiX2NoZWNrU2Nyb2xsYmFyIiwiX3NldFNjcm9sbGJhciIsIl9hZGp1c3REaWFsb2ciLCJfc2V0RXNjYXBlRXZlbnQiLCJfc2V0UmVzaXplRXZlbnQiLCJvbiIsImV2ZW50IiwiTU9VU0VVUF9ESVNNSVNTIiwidGFyZ2V0IiwiaXMiLCJfc2hvd0JhY2tkcm9wIiwiX3RoaXMyIiwicHJldmVudERlZmF1bHQiLCJoaWRlRXZlbnQiLCJISURFIiwidHJhbnNpdGlvbiIsImRvY3VtZW50Iiwib2ZmIiwicmVtb3ZlQ2xhc3MiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJVdGlsIiwiZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQiLCJvbmUiLCJfaGlkZU1vZGFsIiwiZW11bGF0ZVRyYW5zaXRpb25FbmQiLCJ3aW5kb3ciLCJmb3JFYWNoIiwiaHRtbEVsZW1lbnQiLCJyZW1vdmVEYXRhIiwiX29iamVjdFNwcmVhZCIsInR5cGVDaGVja0NvbmZpZyIsIl90aGlzMyIsInBhcmVudE5vZGUiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzdHlsZSIsImRpc3BsYXkiLCJzZXRBdHRyaWJ1dGUiLCJzY3JvbGxUb3AiLCJyZWZsb3ciLCJhZGRDbGFzcyIsInNob3duRXZlbnQiLCJ0cmFuc2l0aW9uQ29tcGxldGUiLCJfZW5mb3JjZUZvY3VzIiwiVFJBTlNJVElPTl9FTkQiLCJfdGhpczQiLCJoYXMiLCJsZW5ndGgiLCJfdGhpczUiLCJLRVlET1dOX0RJU01JU1MiLCJ3aGljaCIsIl90aGlzNiIsImhhbmRsZVVwZGF0ZSIsIk9QRU4iLCJfdGhpczciLCJfcmVzZXRBZGp1c3RtZW50cyIsIl9yZXNldFNjcm9sbGJhciIsInJlbW92ZSIsImNhbGxiYWNrIiwiX3RoaXM4IiwiYW5pbWF0ZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJiYWNrZHJvcFRyYW5zaXRpb25EdXJhdGlvbiIsImNhbGxiYWNrUmVtb3ZlIiwiX3JlbW92ZUJhY2tkcm9wIiwiaXNNb2RhbE92ZXJmbG93aW5nIiwic2Nyb2xsSGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGVmdCIsInJpZ2h0IiwiX3RoaXM5Iiwic2xpY2UiLCJjYWxsIiwicXVlcnlTZWxlY3RvckFsbCIsInN0aWNreUNvbnRlbnQiLCJmaXhlZENvbnRlbnQiLCJlYWNoIiwiaW5kZXgiLCJhY3R1YWxQYWRkaW5nIiwiY2FsY3VsYXRlZFBhZGRpbmciLCJjc3MiLCJkYXRhIiwicGFyc2VGbG9hdCIsImFjdHVhbE1hcmdpbiIsIm1hcmdpblJpZ2h0IiwiY2FsY3VsYXRlZE1hcmdpbiIsInBhZGRpbmciLCJlbGVtZW50cyIsIm1hcmdpbiIsInNjcm9sbERpdiIsInNjcm9sbGJhcldpZHRoIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX3R5cGVvZiIsIlR5cGVFcnJvciIsIl90aGlzMTAiLCJzZWxlY3RvciIsImdldFNlbGVjdG9yRnJvbUVsZW1lbnQiLCJ0YWdOYW1lIiwiJHRhcmdldCIsIl9qUXVlcnlJbnRlcmZhY2UiLCJDb25zdHJ1Y3RvciIsIm5vQ29uZmxpY3QiXSwibWFwcGluZ3MiOiIyRkFPQSxJQUFBQSxRQUFBQyx1QkFBQUMsUUFBQSxXQUNBQyxNQUFBRix1QkFBQUMsUUFBQSw4cUNBUUEsSUFBTUUsS0FBcUIsUUFDckJDLFFBQXFCLFFBQ3JCQyxTQUFxQixXQUNyQkMsVUFBUyxJQUFBQyxPQUFnQkYsVUFDekJHLGFBQXFCLFlBQ3JCQyxtQkFBcUJDLFFBQUFBLFFBQUVDLEdBQUdSLE1BQzFCUyxlQUFxQixHQUVyQkMsUUFBVSxDQWRoQkMsVUFBQSxFQWdCRUMsVUFBVyxFQUNYQyxPQUFXLEVBQ1hDLE1BQVcsR0FYUGIsWUFBcUIsQ0FDM0JVLFNBQWMsbUJBQ2RDLFNBQWUsVUFDZkMsTUFBTVIsVUFDTlMsS0FBTVIsV0FHQUksTUFBVSxDQUNkQyxLQUFBQSxPQUFBQSxPQURjUixXQUVkUyxPQUFBQSxTQUFBQSxPQUZjVCxXQUdk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WUFBYSxTQUFVeUMsR0FBTyxJQUN0RUUsRUFEc0VvRyxFQUFBdkksS0FFcEV3SSxFQUFXekYsTUFBQUEsUUFBSzBGLHVCQWxDVXpILE1BRTVCd0gsSUFtQ0ZyRyxFQUFTUSxTQUFTcEMsY0FBY2lJLElBNUI5QixJQUFBMUksR0FBQSxFQUFBbEMsUUFBQXVELFNBQVdnQixHQUFBcUYsS0FBQXRKLFVBQ1RzSixTQURGaEUsY0FBQSxJQUVFLEVBQUE1RixRQUFBdUQsU0FBQWdCLEdBQUFxRixRQUNELEVBQUE1SixRQUFBdUQsU0FBQW5CLE1BQUF3SCxRQUdZQSxNQUFYeEgsS0FBQTBJLFNBQTRCLFNBQVo1SSxLQUFaNEksU0FDRnpHLEVBQUFNLGlCQUVGaUYsSUFBQUEsR0FBSzFILEVBQUFBLFFBQUFBLFNBQUFBLEdBQVFrQixJQUFBQSxNQUFiNUIsS0FBQSxTQUFBbUMsR0FDREEsRUFBTUcsc0JBcUNUaUgsRUFBUTFGLElBQUl6QixNQUFNckMsT0FBUSxZQUNwQixFQUFBdkIsUUFBQXVELFNBQUVvSCxHQUFNbkcsR0FBRyxhQUNibUcsRUFBSzFKLFlBS1hvQixNQUFNMkksaUJBN2RlN0IsTUFBQSxFQUFBbkosUUFBQXVELFNBQUFnQixHQUFBckMsRUFBQUUsUUFzZXZCekIsUUFBQUEsUUFBRUMsR0FBR1IsTUFBUWlDLE1BQU0ySSxpQkFDbkJySyxRQUFBQSxRQUFFQyxHQUFHUixNQUFNNkssWUFBYzVJLE1BQ3pCMUIsUUFBQUEsUUFBRUMsR0FBR1IsTUFBTThLLFdBQWEsV0FFdEIsT0FEQXZLLFFBQUFBLFFBQUVDLEdBQUdSLE1BQVFNLG1CQUNOMkIsTUFBTTJJLCtCQUdBM0kiLCJmaWxlIjoibW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjIuMSk6IG1vZGFsLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknXG5pbXBvcnQgVXRpbCBmcm9tICcuL3V0aWwnXG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDb25zdGFudHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmNvbnN0IE5BTUUgICAgICAgICAgICAgICA9ICdtb2RhbCdcbmNvbnN0IFZFUlNJT04gICAgICAgICAgICA9ICc0LjIuMSdcbmNvbnN0IERBVEFfS0VZICAgICAgICAgICA9ICdicy5tb2RhbCdcbmNvbnN0IEVWRU5UX0tFWSAgICAgICAgICA9IGAuJHtEQVRBX0tFWX1gXG5jb25zdCBEQVRBX0FQSV9LRVkgICAgICAgPSAnLmRhdGEtYXBpJ1xuY29uc3QgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXVxuY29uc3QgRVNDQVBFX0tFWUNPREUgICAgID0gMjcgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgRXNjYXBlIChFc2MpIGtleVxuXG5jb25zdCBEZWZhdWx0ID0ge1xuICBiYWNrZHJvcCA6IHRydWUsXG4gIGtleWJvYXJkIDogdHJ1ZSxcbiAgZm9jdXMgICAgOiB0cnVlLFxuICBzaG93ICAgICA6IHRydWVcbn1cblxuY29uc3QgRGVmYXVsdFR5cGUgPSB7XG4gIGJhY2tkcm9wIDogJyhib29sZWFufHN0cmluZyknLFxuICBrZXlib2FyZCA6ICdib29sZWFuJyxcbiAgZm9jdXMgICAgOiAnYm9vbGVhbicsXG4gIHNob3cgICAgIDogJ2Jvb2xlYW4nXG59XG5cbmNvbnN0IEV2ZW50ID0ge1xuICBISURFICAgICAgICAgICAgICA6IGBoaWRlJHtFVkVOVF9LRVl9YCxcbiAgSElEREVOICAgICAgICAgICAgOiBgaGlkZGVuJHtFVkVOVF9LRVl9YCxcbiAgU0hPVyAgICAgICAgICAgICAgOiBgc2hvdyR7RVZFTlRfS0VZfWAsXG4gIFNIT1dOICAgICAgICAgICAgIDogYHNob3duJHtFVkVOVF9LRVl9YCxcbiAgRk9DVVNJTiAgICAgICAgICAgOiBgZm9jdXNpbiR7RVZFTlRfS0VZfWAsXG4gIFJFU0laRSAgICAgICAgICAgIDogYHJlc2l6ZSR7RVZFTlRfS0VZfWAsXG4gIENMSUNLX0RJU01JU1MgICAgIDogYGNsaWNrLmRpc21pc3Mke0VWRU5UX0tFWX1gLFxuICBLRVlET1dOX0RJU01JU1MgICA6IGBrZXlkb3duLmRpc21pc3Mke0VWRU5UX0tFWX1gLFxuICBNT1VTRVVQX0RJU01JU1MgICA6IGBtb3VzZXVwLmRpc21pc3Mke0VWRU5UX0tFWX1gLFxuICBNT1VTRURPV05fRElTTUlTUyA6IGBtb3VzZWRvd24uZGlzbWlzcyR7RVZFTlRfS0VZfWAsXG4gIENMSUNLX0RBVEFfQVBJICAgIDogYGNsaWNrJHtFVkVOVF9LRVl9JHtEQVRBX0FQSV9LRVl9YFxufVxuXG5jb25zdCBDbGFzc05hbWUgPSB7XG4gIFNDUk9MTEJBUl9NRUFTVVJFUiA6ICdtb2RhbC1zY3JvbGxiYXItbWVhc3VyZScsXG4gIEJBQ0tEUk9QICAgICAgICAgICA6ICdtb2RhbC1iYWNrZHJvcCcsXG4gIE9QRU4gICAgICAgICAgICAgICA6ICdtb2RhbC1vcGVuJyxcbiAgRkFERSAgICAgICAgICAgICAgIDogJ2ZhZGUnLFxuICBTSE9XICAgICAgICAgICAgICAgOiAnc2hvdydcbn1cblxuY29uc3QgU2VsZWN0b3IgPSB7XG4gIERJQUxPRyAgICAgICAgIDogJy5tb2RhbC1kaWFsb2cnLFxuICBEQVRBX1RPR0dMRSAgICA6ICdbZGF0YS10b2dnbGU9XCJtb2RhbFwiXScsXG4gIERBVEFfRElTTUlTUyAgIDogJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsXG4gIEZJWEVEX0NPTlRFTlQgIDogJy5maXhlZC10b3AsIC5maXhlZC1ib3R0b20sIC5pcy1maXhlZCwgLnN0aWNreS10b3AnLFxuICBTVElDS1lfQ09OVEVOVCA6ICcuc3RpY2t5LXRvcCdcbn1cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIENsYXNzIERlZmluaXRpb25cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmNsYXNzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgdGhpcy5fY29uZmlnICAgICAgICAgICAgICA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpXG4gICAgdGhpcy5fZWxlbWVudCAgICAgICAgICAgICA9IGVsZW1lbnRcbiAgICB0aGlzLl9kaWFsb2cgICAgICAgICAgICAgID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yLkRJQUxPRylcbiAgICB0aGlzLl9iYWNrZHJvcCAgICAgICAgICAgID0gbnVsbFxuICAgIHRoaXMuX2lzU2hvd24gICAgICAgICAgICAgPSBmYWxzZVxuICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nICAgPSBmYWxzZVxuICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZVxuICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyAgICAgPSBmYWxzZVxuICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoICAgICAgPSAwXG4gIH1cblxuICAvLyBHZXR0ZXJzXG5cbiAgc3RhdGljIGdldCBWRVJTSU9OKCkge1xuICAgIHJldHVybiBWRVJTSU9OXG4gIH1cblxuICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgcmV0dXJuIERlZmF1bHRcbiAgfVxuXG4gIC8vIFB1YmxpY1xuXG4gIHRvZ2dsZShyZWxhdGVkVGFyZ2V0KSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyhyZWxhdGVkVGFyZ2V0KVxuICB9XG5cbiAgc2hvdyhyZWxhdGVkVGFyZ2V0KSB7XG4gICAgaWYgKHRoaXMuX2lzU2hvd24gfHwgdGhpcy5faXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1csIHtcbiAgICAgIHJlbGF0ZWRUYXJnZXRcbiAgICB9KVxuXG4gICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudClcblxuICAgIGlmICh0aGlzLl9pc1Nob3duIHx8IHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5faXNTaG93biA9IHRydWVcblxuICAgIHRoaXMuX2NoZWNrU2Nyb2xsYmFyKClcbiAgICB0aGlzLl9zZXRTY3JvbGxiYXIoKVxuXG4gICAgdGhpcy5fYWRqdXN0RGlhbG9nKClcblxuICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KClcbiAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpXG5cbiAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKFxuICAgICAgRXZlbnQuQ0xJQ0tfRElTTUlTUyxcbiAgICAgIFNlbGVjdG9yLkRBVEFfRElTTUlTUyxcbiAgICAgIChldmVudCkgPT4gdGhpcy5oaWRlKGV2ZW50KVxuICAgIClcblxuICAgICQodGhpcy5fZGlhbG9nKS5vbihFdmVudC5NT1VTRURPV05fRElTTUlTUywgKCkgPT4ge1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoRXZlbnQuTU9VU0VVUF9ESVNNSVNTLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5pcyh0aGlzLl9lbGVtZW50KSkge1xuICAgICAgICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMuX3Nob3dCYWNrZHJvcCgoKSA9PiB0aGlzLl9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSlcbiAgfVxuXG4gIGhpZGUoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2lzU2hvd24gfHwgdGhpcy5faXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUpXG5cbiAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoaGlkZUV2ZW50KVxuXG4gICAgaWYgKCF0aGlzLl9pc1Nob3duIHx8IGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5faXNTaG93biA9IGZhbHNlXG4gICAgY29uc3QgdHJhbnNpdGlvbiA9ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpXG5cbiAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KClcbiAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpXG5cbiAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTilcblxuICAgICQodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpXG5cbiAgICAkKHRoaXMuX2VsZW1lbnQpLm9mZihFdmVudC5DTElDS19ESVNNSVNTKVxuICAgICQodGhpcy5fZGlhbG9nKS5vZmYoRXZlbnQuTU9VU0VET1dOX0RJU01JU1MpXG5cblxuICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb24gID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KVxuXG4gICAgICAkKHRoaXMuX2VsZW1lbnQpXG4gICAgICAgIC5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgKGV2ZW50KSA9PiB0aGlzLl9oaWRlTW9kYWwoZXZlbnQpKVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgW3dpbmRvdywgdGhpcy5fZWxlbWVudCwgdGhpcy5fZGlhbG9nXVxuICAgICAgLmZvckVhY2goKGh0bWxFbGVtZW50KSA9PiAkKGh0bWxFbGVtZW50KS5vZmYoRVZFTlRfS0VZKSlcblxuICAgIC8qKlxuICAgICAqIGBkb2N1bWVudGAgaGFzIDIgZXZlbnRzIGBFdmVudC5GT0NVU0lOYCBhbmQgYEV2ZW50LkNMSUNLX0RBVEFfQVBJYFxuICAgICAqIERvIG5vdCBtb3ZlIGBkb2N1bWVudGAgaW4gYGh0bWxFbGVtZW50c2AgYXJyYXlcbiAgICAgKiBJdCB3aWxsIHJlbW92ZSBgRXZlbnQuQ0xJQ0tfREFUQV9BUElgIGV2ZW50IHRoYXQgc2hvdWxkIHJlbWFpblxuICAgICAqL1xuICAgICQoZG9jdW1lbnQpLm9mZihFdmVudC5GT0NVU0lOKVxuXG4gICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKVxuXG4gICAgdGhpcy5fY29uZmlnICAgICAgICAgICAgICA9IG51bGxcbiAgICB0aGlzLl9lbGVtZW50ICAgICAgICAgICAgID0gbnVsbFxuICAgIHRoaXMuX2RpYWxvZyAgICAgICAgICAgICAgPSBudWxsXG4gICAgdGhpcy5fYmFja2Ryb3AgICAgICAgICAgICA9IG51bGxcbiAgICB0aGlzLl9pc1Nob3duICAgICAgICAgICAgID0gbnVsbFxuICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nICAgPSBudWxsXG4gICAgdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IG51bGxcbiAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgICAgID0gbnVsbFxuICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoICAgICAgPSBudWxsXG4gIH1cblxuICBoYW5kbGVVcGRhdGUoKSB7XG4gICAgdGhpcy5fYWRqdXN0RGlhbG9nKClcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IHtcbiAgICAgIC4uLkRlZmF1bHQsXG4gICAgICAuLi5jb25maWdcbiAgICB9XG4gICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSwgY29uZmlnLCBEZWZhdWx0VHlwZSlcbiAgICByZXR1cm4gY29uZmlnXG4gIH1cblxuICBfc2hvd0VsZW1lbnQocmVsYXRlZFRhcmdldCkge1xuICAgIGNvbnN0IHRyYW5zaXRpb24gPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKVxuXG4gICAgaWYgKCF0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgfHxcbiAgICAgICAgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgLy8gRG9uJ3QgbW92ZSBtb2RhbCdzIERPTSBwb3NpdGlvblxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9lbGVtZW50KVxuICAgIH1cblxuICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKVxuICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW1vZGFsJywgdHJ1ZSlcbiAgICB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDBcblxuICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICBVdGlsLnJlZmxvdyh0aGlzLl9lbGVtZW50KVxuICAgIH1cblxuICAgICQodGhpcy5fZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpXG5cbiAgICBpZiAodGhpcy5fY29uZmlnLmZvY3VzKSB7XG4gICAgICB0aGlzLl9lbmZvcmNlRm9jdXMoKVxuICAgIH1cblxuICAgIGNvbnN0IHNob3duRXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1dOLCB7XG4gICAgICByZWxhdGVkVGFyZ2V0XG4gICAgfSlcblxuICAgIGNvbnN0IHRyYW5zaXRpb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9jb25maWcuZm9jdXMpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5mb2N1cygpXG4gICAgICB9XG4gICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZVxuICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpXG4gICAgfVxuXG4gICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25EdXJhdGlvbiAgPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2RpYWxvZylcblxuICAgICAgJCh0aGlzLl9kaWFsb2cpXG4gICAgICAgIC5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgdHJhbnNpdGlvbkNvbXBsZXRlKVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uQ29tcGxldGUoKVxuICAgIH1cbiAgfVxuXG4gIF9lbmZvcmNlRm9jdXMoKSB7XG4gICAgJChkb2N1bWVudClcbiAgICAgIC5vZmYoRXZlbnQuRk9DVVNJTikgLy8gR3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBmb2N1cyBsb29wXG4gICAgICAub24oRXZlbnQuRk9DVVNJTiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChkb2N1bWVudCAhPT0gZXZlbnQudGFyZ2V0ICYmXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ICE9PSBldmVudC50YXJnZXQgJiZcbiAgICAgICAgICAgICQodGhpcy5fZWxlbWVudCkuaGFzKGV2ZW50LnRhcmdldCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5mb2N1cygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICBfc2V0RXNjYXBlRXZlbnQoKSB7XG4gICAgaWYgKHRoaXMuX2lzU2hvd24gJiYgdGhpcy5fY29uZmlnLmtleWJvYXJkKSB7XG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LktFWURPV05fRElTTUlTUywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgdGhpcy5oaWRlKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKCF0aGlzLl9pc1Nob3duKSB7XG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLm9mZihFdmVudC5LRVlET1dOX0RJU01JU1MpXG4gICAgfVxuICB9XG5cbiAgX3NldFJlc2l6ZUV2ZW50KCkge1xuICAgIGlmICh0aGlzLl9pc1Nob3duKSB7XG4gICAgICAkKHdpbmRvdykub24oRXZlbnQuUkVTSVpFLCAoZXZlbnQpID0+IHRoaXMuaGFuZGxlVXBkYXRlKGV2ZW50KSlcbiAgICB9IGVsc2Uge1xuICAgICAgJCh3aW5kb3cpLm9mZihFdmVudC5SRVNJWkUpXG4gICAgfVxuICB9XG5cbiAgX2hpZGVNb2RhbCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKVxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLW1vZGFsJylcbiAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZVxuICAgIHRoaXMuX3Nob3dCYWNrZHJvcCgoKSA9PiB7XG4gICAgICAkKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5PUEVOKVxuICAgICAgdGhpcy5fcmVzZXRBZGp1c3RtZW50cygpXG4gICAgICB0aGlzLl9yZXNldFNjcm9sbGJhcigpXG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuSElEREVOKVxuICAgIH0pXG4gIH1cblxuICBfcmVtb3ZlQmFja2Ryb3AoKSB7XG4gICAgaWYgKHRoaXMuX2JhY2tkcm9wKSB7XG4gICAgICAkKHRoaXMuX2JhY2tkcm9wKS5yZW1vdmUoKVxuICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgX3Nob3dCYWNrZHJvcChjYWxsYmFjaykge1xuICAgIGNvbnN0IGFuaW1hdGUgPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKVxuICAgICAgPyBDbGFzc05hbWUuRkFERSA6ICcnXG5cbiAgICBpZiAodGhpcy5faXNTaG93biAmJiB0aGlzLl9jb25maWcuYmFja2Ryb3ApIHtcbiAgICAgIHRoaXMuX2JhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHRoaXMuX2JhY2tkcm9wLmNsYXNzTmFtZSA9IENsYXNzTmFtZS5CQUNLRFJPUFxuXG4gICAgICBpZiAoYW5pbWF0ZSkge1xuICAgICAgICB0aGlzLl9iYWNrZHJvcC5jbGFzc0xpc3QuYWRkKGFuaW1hdGUpXG4gICAgICB9XG5cbiAgICAgICQodGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpXG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrKSB7XG4gICAgICAgICAgdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jb25maWcuYmFja2Ryb3AgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5mb2N1cygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5oaWRlKClcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgVXRpbC5yZWZsb3codGhpcy5fYmFja2Ryb3ApXG4gICAgICB9XG5cbiAgICAgICQodGhpcy5fYmFja2Ryb3ApLmFkZENsYXNzKENsYXNzTmFtZS5TSE9XKVxuXG4gICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoIWFuaW1hdGUpIHtcbiAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2JhY2tkcm9wKVxuXG4gICAgICAkKHRoaXMuX2JhY2tkcm9wKVxuICAgICAgICAub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNhbGxiYWNrKVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24pXG4gICAgfSBlbHNlIGlmICghdGhpcy5faXNTaG93biAmJiB0aGlzLl9iYWNrZHJvcCkge1xuICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpXG5cbiAgICAgIGNvbnN0IGNhbGxiYWNrUmVtb3ZlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9yZW1vdmVCYWNrZHJvcCgpXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgICAgY29uc3QgYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2JhY2tkcm9wKVxuXG4gICAgICAgICQodGhpcy5fYmFja2Ryb3ApXG4gICAgICAgICAgLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFja1JlbW92ZSlcbiAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFja1JlbW92ZSgpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gdGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIHRvIGhhbmRsZSBvdmVyZmxvd2luZyBtb2RhbHNcbiAgLy8gdG9kbyAoZmF0KTogdGhlc2Ugc2hvdWxkIHByb2JhYmx5IGJlIHJlZmFjdG9yZWQgb3V0IG9mIG1vZGFsLmpzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBfYWRqdXN0RGlhbG9nKCkge1xuICAgIGNvbnN0IGlzTW9kYWxPdmVyZmxvd2luZyA9XG4gICAgICB0aGlzLl9lbGVtZW50LnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcblxuICAgIGlmICghdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgJiYgaXNNb2RhbE92ZXJmbG93aW5nKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gYCR7dGhpcy5fc2Nyb2xsYmFyV2lkdGh9cHhgXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nICYmICFpc01vZGFsT3ZlcmZsb3dpbmcpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7dGhpcy5fc2Nyb2xsYmFyV2lkdGh9cHhgXG4gICAgfVxuICB9XG5cbiAgX3Jlc2V0QWRqdXN0bWVudHMoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9ICcnXG4gICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSAnJ1xuICB9XG5cbiAgX2NoZWNrU2Nyb2xsYmFyKCkge1xuICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgPSByZWN0LmxlZnQgKyByZWN0LnJpZ2h0IDwgd2luZG93LmlubmVyV2lkdGhcbiAgICB0aGlzLl9zY3JvbGxiYXJXaWR0aCA9IHRoaXMuX2dldFNjcm9sbGJhcldpZHRoKClcbiAgfVxuXG4gIF9zZXRTY3JvbGxiYXIoKSB7XG4gICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nKSB7XG4gICAgICAvLyBOb3RlOiBET01Ob2RlLnN0eWxlLnBhZGRpbmdSaWdodCByZXR1cm5zIHRoZSBhY3R1YWwgdmFsdWUgb3IgJycgaWYgbm90IHNldFxuICAgICAgLy8gICB3aGlsZSAkKERPTU5vZGUpLmNzcygncGFkZGluZy1yaWdodCcpIHJldHVybnMgdGhlIGNhbGN1bGF0ZWQgdmFsdWUgb3IgMCBpZiBub3Qgc2V0XG4gICAgICBjb25zdCBmaXhlZENvbnRlbnQgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IuRklYRURfQ09OVEVOVCkpXG4gICAgICBjb25zdCBzdGlja3lDb250ZW50ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yLlNUSUNLWV9DT05URU5UKSlcblxuICAgICAgLy8gQWRqdXN0IGZpeGVkIGNvbnRlbnQgcGFkZGluZ1xuICAgICAgJChmaXhlZENvbnRlbnQpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdHVhbFBhZGRpbmcgPSBlbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodFxuICAgICAgICBjb25zdCBjYWxjdWxhdGVkUGFkZGluZyA9ICQoZWxlbWVudCkuY3NzKCdwYWRkaW5nLXJpZ2h0JylcbiAgICAgICAgJChlbGVtZW50KVxuICAgICAgICAgIC5kYXRhKCdwYWRkaW5nLXJpZ2h0JywgYWN0dWFsUGFkZGluZylcbiAgICAgICAgICAuY3NzKCdwYWRkaW5nLXJpZ2h0JywgYCR7cGFyc2VGbG9hdChjYWxjdWxhdGVkUGFkZGluZykgKyB0aGlzLl9zY3JvbGxiYXJXaWR0aH1weGApXG4gICAgICB9KVxuXG4gICAgICAvLyBBZGp1c3Qgc3RpY2t5IGNvbnRlbnQgbWFyZ2luXG4gICAgICAkKHN0aWNreUNvbnRlbnQpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdHVhbE1hcmdpbiA9IGVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHRcbiAgICAgICAgY29uc3QgY2FsY3VsYXRlZE1hcmdpbiA9ICQoZWxlbWVudCkuY3NzKCdtYXJnaW4tcmlnaHQnKVxuICAgICAgICAkKGVsZW1lbnQpXG4gICAgICAgICAgLmRhdGEoJ21hcmdpbi1yaWdodCcsIGFjdHVhbE1hcmdpbilcbiAgICAgICAgICAuY3NzKCdtYXJnaW4tcmlnaHQnLCBgJHtwYXJzZUZsb2F0KGNhbGN1bGF0ZWRNYXJnaW4pIC0gdGhpcy5fc2Nyb2xsYmFyV2lkdGh9cHhgKVxuICAgICAgfSlcblxuICAgICAgLy8gQWRqdXN0IGJvZHkgcGFkZGluZ1xuICAgICAgY29uc3QgYWN0dWFsUGFkZGluZyA9IGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0XG4gICAgICBjb25zdCBjYWxjdWxhdGVkUGFkZGluZyA9ICQoZG9jdW1lbnQuYm9keSkuY3NzKCdwYWRkaW5nLXJpZ2h0JylcbiAgICAgICQoZG9jdW1lbnQuYm9keSlcbiAgICAgICAgLmRhdGEoJ3BhZGRpbmctcmlnaHQnLCBhY3R1YWxQYWRkaW5nKVxuICAgICAgICAuY3NzKCdwYWRkaW5nLXJpZ2h0JywgYCR7cGFyc2VGbG9hdChjYWxjdWxhdGVkUGFkZGluZykgKyB0aGlzLl9zY3JvbGxiYXJXaWR0aH1weGApXG4gICAgfVxuXG4gICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhDbGFzc05hbWUuT1BFTilcbiAgfVxuXG4gIF9yZXNldFNjcm9sbGJhcigpIHtcbiAgICAvLyBSZXN0b3JlIGZpeGVkIGNvbnRlbnQgcGFkZGluZ1xuICAgIGNvbnN0IGZpeGVkQ29udGVudCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3Rvci5GSVhFRF9DT05URU5UKSlcbiAgICAkKGZpeGVkQ29udGVudCkuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHBhZGRpbmcgPSAkKGVsZW1lbnQpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKVxuICAgICAgJChlbGVtZW50KS5yZW1vdmVEYXRhKCdwYWRkaW5nLXJpZ2h0JylcbiAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZyA/IHBhZGRpbmcgOiAnJ1xuICAgIH0pXG5cbiAgICAvLyBSZXN0b3JlIHN0aWNreSBjb250ZW50XG4gICAgY29uc3QgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7U2VsZWN0b3IuU1RJQ0tZX0NPTlRFTlR9YCkpXG4gICAgJChlbGVtZW50cykuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IG1hcmdpbiA9ICQoZWxlbWVudCkuZGF0YSgnbWFyZ2luLXJpZ2h0JylcbiAgICAgIGlmICh0eXBlb2YgbWFyZ2luICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAkKGVsZW1lbnQpLmNzcygnbWFyZ2luLXJpZ2h0JywgbWFyZ2luKS5yZW1vdmVEYXRhKCdtYXJnaW4tcmlnaHQnKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBSZXN0b3JlIGJvZHkgcGFkZGluZ1xuICAgIGNvbnN0IHBhZGRpbmcgPSAkKGRvY3VtZW50LmJvZHkpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKVxuICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlRGF0YSgncGFkZGluZy1yaWdodCcpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBwYWRkaW5nID8gcGFkZGluZyA6ICcnXG4gIH1cblxuICBfZ2V0U2Nyb2xsYmFyV2lkdGgoKSB7IC8vIHRoeCBkLndhbHNoXG4gICAgY29uc3Qgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gQ2xhc3NOYW1lLlNDUk9MTEJBUl9NRUFTVVJFUlxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KVxuICAgIGNvbnN0IHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpXG4gICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoXG4gIH1cblxuICAvLyBTdGF0aWNcblxuICBzdGF0aWMgX2pRdWVyeUludGVyZmFjZShjb25maWcsIHJlbGF0ZWRUYXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKVxuICAgICAgY29uc3QgX2NvbmZpZyA9IHtcbiAgICAgICAgLi4uRGVmYXVsdCxcbiAgICAgICAgLi4uJCh0aGlzKS5kYXRhKCksXG4gICAgICAgIC4uLnR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyA/IGNvbmZpZyA6IHt9XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICBkYXRhID0gbmV3IE1vZGFsKHRoaXMsIF9jb25maWcpXG4gICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSlcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYClcbiAgICAgICAgfVxuICAgICAgICBkYXRhW2NvbmZpZ10ocmVsYXRlZFRhcmdldClcbiAgICAgIH0gZWxzZSBpZiAoX2NvbmZpZy5zaG93KSB7XG4gICAgICAgIGRhdGEuc2hvdyhyZWxhdGVkVGFyZ2V0KVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4kKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuICBsZXQgdGFyZ2V0XG4gIGNvbnN0IHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpXG5cbiAgaWYgKHNlbGVjdG9yKSB7XG4gICAgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgfVxuXG4gIGNvbnN0IGNvbmZpZyA9ICQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKVxuICAgID8gJ3RvZ2dsZScgOiB7XG4gICAgICAuLi4kKHRhcmdldCkuZGF0YSgpLFxuICAgICAgLi4uJCh0aGlzKS5kYXRhKClcbiAgICB9XG5cbiAgaWYgKHRoaXMudGFnTmFtZSA9PT0gJ0EnIHx8IHRoaXMudGFnTmFtZSA9PT0gJ0FSRUEnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9XG5cbiAgY29uc3QgJHRhcmdldCA9ICQodGFyZ2V0KS5vbmUoRXZlbnQuU0hPVywgKHNob3dFdmVudCkgPT4ge1xuICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgIC8vIE9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd25cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgICR0YXJnZXQub25lKEV2ZW50LkhJRERFTiwgKCkgPT4ge1xuICAgICAgaWYgKCQodGhpcykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgdGhpcy5mb2N1cygpXG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0YXJnZXQpLCBjb25maWcsIHRoaXMpXG59KVxuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogalF1ZXJ5XG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4kLmZuW05BTUVdID0gTW9kYWwuX2pRdWVyeUludGVyZmFjZVxuJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IE1vZGFsXG4kLmZuW05BTUVdLm5vQ29uZmxpY3QgPSAoKSA9PiB7XG4gICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1RcbiAgcmV0dXJuIE1vZGFsLl9qUXVlcnlJbnRlcmZhY2Vcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kYWxcbiJdfQ==
